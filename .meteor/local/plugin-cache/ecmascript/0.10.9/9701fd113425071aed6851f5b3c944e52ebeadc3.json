{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"client/lib/definitions/behaviors/visibility.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/lib/definitions/behaviors/visibility.js","filename":"client/lib/definitions/behaviors/visibility.js","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/martijn/Documents/GitHub/QRSMeteor","root":"/home/martijn/Documents/GitHub/QRSMeteor","generatorOpts":{"filename":"client/lib/definitions/behaviors/visibility.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/definitions/behaviors/visibility.js"}},"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n\n/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  $.fn.visibility = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.visibility.settings, parameters) : $.extend({}, $.fn.visibility.settings),\n          className = settings.className,\n          namespace = settings.namespace,\n          error = settings.error,\n          metadata = settings.metadata,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = 'module-' + namespace,\n          $window = $(window),\n          $module = $(this),\n          $context = $(settings.context),\n          $placeholder,\n          selector = $module.selector || '',\n          instance = $module.data(moduleNamespace),\n          requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n        setTimeout(callback, 0);\n      },\n          element = this,\n          disabled = false,\n          observer,\n          module;\n\n      module = {\n        initialize: function () {\n          module.debug('Initializing', settings);\n          module.setup.cache();\n\n          if (module.should.trackChanges()) {\n            if (settings.type == 'image') {\n              module.setup.image();\n            }\n\n            if (settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if (settings.observeChanges) {\n              module.observeChanges();\n            }\n\n            module.bind.events();\n          }\n\n          module.save.position();\n\n          if (!module.is.visible()) {\n            module.error(error.visible, $module);\n          }\n\n          if (settings.initialCheck) {\n            module.checkVisibility();\n          }\n\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.debug('Storing instance', module);\n          $module.data(moduleNamespace, module);\n          instance = module;\n        },\n        destroy: function () {\n          module.verbose('Destroying previous module');\n\n          if (observer) {\n            observer.disconnect();\n          }\n\n          $window.off('load' + eventNamespace, module.event.load).off('resize' + eventNamespace, module.event.resize);\n          $context.off('scrollchange' + eventNamespace, module.event.scrollchange);\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n        observeChanges: function () {\n          if ('MutationObserver' in window) {\n            observer = new MutationObserver(function (mutations) {\n              module.verbose('DOM tree modified, updating visibility calculations');\n              module.timer = setTimeout(function () {\n                module.verbose('DOM tree modified, updating sticky menu');\n                module.refresh();\n              }, 100);\n            });\n            observer.observe(element, {\n              childList: true,\n              subtree: true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n        bind: {\n          events: function () {\n            module.verbose('Binding visibility events to scroll and resize');\n\n            if (settings.refreshOnLoad) {\n              $window.on('load' + eventNamespace, module.event.load);\n            }\n\n            $window.on('resize' + eventNamespace, module.event.resize); // pub/sub pattern\n\n            $context.off('scroll' + eventNamespace).on('scroll' + eventNamespace, module.event.scroll).on('scrollchange' + eventNamespace, module.event.scrollchange);\n          }\n        },\n        event: {\n          resize: function () {\n            module.debug('Window resized');\n\n            if (settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function () {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function () {\n            if (settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              }, settings.throttle);\n            } else {\n              requestAnimationFrame(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function (event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          }\n        },\n        precache: function (images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n\n          var imagesLength = images.length,\n              loadedCounter = 0,\n              cache = [],\n              cacheImage = document.createElement('img'),\n              handleLoad = function () {\n            loadedCounter++;\n\n            if (loadedCounter >= images.length) {\n              if ($.isFunction(callback)) {\n                callback();\n              }\n            }\n          };\n\n          while (imagesLength--) {\n            cacheImage = document.createElement('img');\n            cacheImage.onload = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n        enableCallbacks: function () {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n        disableCallbacks: function () {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n        should: {\n          trackChanges: function () {\n            if (methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n        setup: {\n          cache: function () {\n            module.cache = {\n              occurred: {},\n              screen: {},\n              element: {}\n            };\n          },\n          image: function () {\n            var src = $module.data(metadata.src);\n\n            if (src) {\n              module.verbose('Lazy loading image', src);\n              settings.once = true;\n              settings.observeChanges = false; // show when top visible\n\n              settings.onOnScreen = function () {\n                module.debug('Image on screen', element);\n                module.precache(src, function () {\n                  module.set.image(src);\n                });\n              };\n            }\n          },\n          fixed: function () {\n            module.debug('Setting up fixed');\n            settings.once = false;\n            settings.observeChanges = false;\n            settings.initialCheck = true;\n            settings.refreshOnLoad = true;\n\n            if (!parameters.transition) {\n              settings.transition = false;\n            }\n\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n\n            settings.onTopPassed = function () {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n\n              if (settings.transition) {\n                if ($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n\n            settings.onTopPassedReverse = function () {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n        create: {\n          placeholder: function () {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module.clone(false).css('display', 'none').addClass(className.placeholder).insertAfter($module);\n          }\n        },\n        show: {\n          placeholder: function () {\n            module.verbose('Showing placeholder');\n            $placeholder.css('display', 'block').css('visibility', 'hidden');\n          }\n        },\n        hide: {\n          placeholder: function () {\n            module.verbose('Hiding placeholder');\n            $placeholder.css('display', 'none').css('visibility', '');\n          }\n        },\n        set: {\n          fixed: function () {\n            module.verbose('Setting element to fixed position');\n            $module.addClass(className.fixed).css({\n              position: 'fixed',\n              top: settings.offset + 'px',\n              left: 'auto',\n              zIndex: '1'\n            });\n          },\n          image: function (src) {\n            $module.attr('src', src);\n\n            if (settings.transition) {\n              if ($.fn.transition !== undefined) {\n                $module.transition(settings.transition, settings.duration);\n              } else {\n                $module.fadeIn(settings.duration);\n              }\n            } else {\n              $module.show();\n            }\n          }\n        },\n        is: {\n          onScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.onScreen;\n          },\n          offScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.offScreen;\n          },\n          visible: function () {\n            if (module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n\n            return false;\n          }\n        },\n        refresh: function () {\n          module.debug('Refreshing constants (width/height)');\n\n          if (settings.type == 'fixed') {\n            module.remove.fixed();\n            module.remove.occurred();\n          }\n\n          module.reset();\n          module.save.position();\n\n          if (settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n\n          settings.onRefresh.call(element);\n        },\n        reset: function () {\n          module.verbose('Reseting all cached values');\n\n          if ($.isPlainObject(module.cache)) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n        checkVisibility: function (scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if (!disabled && module.is.visible()) {\n            // save scroll position\n            module.save.scroll(scroll); // update calculations derived from scroll\n\n            module.save.calculations(); // percentage\n\n            module.passed(); // reverse (must be first)\n\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse(); // one time\n\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed(); // on update callback\n\n            if (settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n        passed: function (amount, newCallback) {\n          var calculations = module.get.elementCalculations(),\n              amountInPixels; // assign callback\n\n          if (amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          } else if (amount !== undefined) {\n            return module.get.pixelsPassed(amount) > calculations.pixelsPassed;\n          } else if (calculations.passing) {\n            $.each(settings.onPassed, function (amount, callback) {\n              if (calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              } else if (!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n        onScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOnScreen,\n              callbackName = 'onScreen';\n\n          if (newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n\n          if (calculations.onScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n        offScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOffScreen,\n              callbackName = 'offScreen';\n\n          if (newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n\n          if (calculations.offScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n        passing: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassing,\n              callbackName = 'passing';\n\n          if (newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n\n          if (calculations.passing) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n        topVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisible,\n              callbackName = 'topVisible';\n\n          if (newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n\n          if (calculations.topVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n        bottomVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisible,\n              callbackName = 'bottomVisible';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n\n          if (calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n        topPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassed,\n              callbackName = 'topPassed';\n\n          if (newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n\n          if (calculations.topPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n        bottomPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassed,\n              callbackName = 'bottomPassed';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n\n          if (calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n        passingReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassingReverse,\n              callbackName = 'passingReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n\n          if (!calculations.passing) {\n            if (module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n        topVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisibleReverse,\n              callbackName = 'topVisibleReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n\n          if (!calculations.topVisible) {\n            if (module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n        bottomVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisibleReverse,\n              callbackName = 'bottomVisibleReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n\n          if (!calculations.bottomVisible) {\n            if (module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n        topPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassedReverse,\n              callbackName = 'topPassedReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n\n          if (!calculations.topPassed) {\n            if (module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n        bottomPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassedReverse,\n              callbackName = 'bottomPassedReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n\n          if (!calculations.bottomPassed) {\n            if (module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n        execute: function (callback, callbackName) {\n          var calculations = module.get.elementCalculations(),\n              screen = module.get.screenCalculations();\n          callback = callback || false;\n\n          if (callback) {\n            if (settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            } else if (!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n\n          module.save.occurred(callbackName);\n        },\n        remove: {\n          fixed: function () {\n            module.debug('Removing fixed position');\n            $module.removeClass(className.fixed).css({\n              position: '',\n              top: '',\n              left: '',\n              zIndex: ''\n            });\n          },\n          occurred: function (callback) {\n            if (callback) {\n              var occurred = module.cache.occurred;\n\n              if (occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            } else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n        save: {\n          calculations: function () {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function (callback) {\n            if (callback) {\n              if (module.cache.occurred[callback] === undefined || module.cache.occurred[callback] !== true) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function (scrollPosition) {\n            scrollPosition = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function () {\n            var scroll = module.get.scroll(),\n                lastScroll = module.get.lastScroll(),\n                direction;\n\n            if (scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            } else if (scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            } else {\n              direction = 'static';\n            }\n\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            var element = module.cache.element,\n                screen = module.get.screenSize();\n            module.verbose('Saving element position'); // (quicker than $.extend)\n\n            element.fits = element.height < screen.height;\n            element.offset = $module.offset();\n            element.width = $module.outerWidth();\n            element.height = $module.outerHeight(); // store\n\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function () {\n            var screen = module.get.screenCalculations(),\n                element = module.get.elementPosition(); // offset\n\n            if (settings.includeMargin) {\n              element.margin = {};\n              element.margin.top = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            } else {\n              element.top = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            } // visibility\n\n\n            element.topVisible = screen.bottom >= element.top;\n            element.topPassed = screen.top >= element.top;\n            element.bottomVisible = screen.bottom >= element.bottom;\n            element.bottomPassed = screen.top >= element.bottom;\n            element.pixelsPassed = 0;\n            element.percentagePassed = 0; // meta calculations\n\n            element.onScreen = element.topVisible && !element.bottomPassed;\n            element.passing = element.topPassed && !element.bottomPassed;\n            element.offScreen = !element.onScreen; // passing calculations\n\n            if (element.passing) {\n              element.pixelsPassed = screen.top - element.top;\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function () {\n            var scroll = module.get.scroll();\n            module.save.direction();\n            module.cache.screen.top = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function () {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n        get: {\n          pixelsPassed: function (amount) {\n            var element = module.get.elementCalculations();\n\n            if (amount.search('%') > -1) {\n              return element.height * (parseInt(amount, 10) / 100);\n            }\n\n            return parseInt(amount, 10);\n          },\n          occurred: function (callback) {\n            return module.cache.occurred !== undefined ? module.cache.occurred[callback] || false : false;\n          },\n          direction: function () {\n            if (module.cache.direction === undefined) {\n              module.save.direction();\n            }\n\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n\n            return module.cache.element;\n          },\n          elementCalculations: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n\n            return module.cache.element;\n          },\n          screenCalculations: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n\n            return module.cache.screen;\n          },\n          scroll: function () {\n            if (module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n\n            return module.cache.scroll;\n          },\n          lastScroll: function () {\n            if (module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n\n            return module.cache.screen.top;\n          }\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.visibility.settings = {\n    name: 'Visibility',\n    namespace: 'visibility',\n    debug: false,\n    verbose: false,\n    performance: true,\n    // whether to use mutation observers to follow changes\n    observeChanges: true,\n    // check position immediately on init\n    initialCheck: true,\n    // whether to refresh calculations after all page images load\n    refreshOnLoad: true,\n    // whether to refresh calculations after page resize event\n    refreshOnResize: true,\n    // should call callbacks on refresh event (resize, etc)\n    checkOnRefresh: true,\n    // callback should only occur one time\n    once: true,\n    // callback should fire continuously whe evaluates to true\n    continuous: false,\n    // offset to use with scroll top\n    offset: 0,\n    // whether to include margin in elements position\n    includeMargin: false,\n    // scroll context for visibility checks\n    context: window,\n    // visibility check delay in ms (defaults to animationFrame)\n    throttle: false,\n    // special visibility type (image, fixed)\n    type: false,\n    // image only animation settings\n    transition: 'fade in',\n    duration: 1000,\n    // array of callbacks for percentage\n    onPassed: {},\n    // standard callbacks\n    onOnScreen: false,\n    onOffScreen: false,\n    onPassing: false,\n    onTopVisible: false,\n    onBottomVisible: false,\n    onTopPassed: false,\n    onBottomPassed: false,\n    // reverse callbacks\n    onPassingReverse: false,\n    onTopVisibleReverse: false,\n    onBottomVisibleReverse: false,\n    onTopPassedReverse: false,\n    onBottomPassedReverse: false,\n    // utility callbacks\n    onUpdate: false,\n    // disabled by default for performance\n    onRefresh: function () {},\n    metadata: {\n      src: 'src'\n    },\n    className: {\n      fixed: 'fixed',\n      placeholder: 'placeholder'\n    },\n    error: {\n      method: 'The method you called is not defined.',\n      visible: 'Element is hidden, you must call refresh after element becomes visible'\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["client/lib/definitions/behaviors/visibility.js"],"names":["$","window","document","undefined","fn","visibility","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","className","namespace","error","metadata","eventNamespace","moduleNamespace","$window","$module","$context","context","$placeholder","instance","data","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","element","disabled","observer","module","initialize","debug","setup","cache","should","trackChanges","type","image","fixed","observeChanges","bind","events","save","position","is","visible","initialCheck","checkVisibility","instantiate","destroy","verbose","disconnect","off","event","load","resize","scrollchange","removeData","MutationObserver","mutations","timer","refresh","observe","childList","subtree","refreshOnLoad","on","scroll","refreshOnResize","throttle","clearTimeout","triggerHandler","scrollTop","scrollPosition","precache","images","Array","imagesLength","length","loadedCounter","cacheImage","createElement","handleLoad","isFunction","onload","onerror","src","push","enableCallbacks","disableCallbacks","occurred","screen","once","onOnScreen","set","transition","create","placeholder","onTopPassed","show","duration","onTopPassedReverse","hide","remove","clone","css","addClass","insertAfter","top","offset","left","zIndex","attr","fadeIn","onScreen","calculations","get","elementCalculations","offScreen","width","reset","checkOnRefresh","onRefresh","passed","passingReverse","topVisibleReverse","bottomVisibleReverse","topPassedReverse","bottomPassedReverse","passing","topVisible","bottomVisible","topPassed","bottomPassed","onUpdate","amount","newCallback","amountInPixels","onPassed","pixelsPassed","execute","callbackName","onOffScreen","onPassing","onTopVisible","onBottomVisible","onBottomPassed","onPassingReverse","onTopVisibleReverse","onBottomVisibleReverse","onBottomPassedReverse","screenCalculations","continuous","removeClass","direction","lastScroll","elementPosition","screenSize","fits","height","outerWidth","outerHeight","includeMargin","margin","parseInt","bottom","percentagePassed","search","setting","name","value","internal","log","Function","prototype","console","info","apply","message","currentTime","executionTime","previousTime","display","title","totalTime","index","group","table","groupCollapsed","groupEnd","invoke","passedArguments","object","maxDepth","found","response","split","depth","camelCaseValue","charAt","toUpperCase","method","isArray","jQuery"],"mappings":"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","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ( $, window, document, undefined ) {\n\n\"use strict\";\n\n$.fn.visibility = function(parameters) {\n  var\n    $allModules    = $(this),\n    moduleSelector = $allModules.selector || '',\n\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n\n  $allModules\n    .each(function() {\n      var\n        settings        = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.visibility.settings, parameters)\n          : $.extend({}, $.fn.visibility.settings),\n\n        className       = settings.className,\n        namespace       = settings.namespace,\n        error           = settings.error,\n        metadata        = settings.metadata,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        $window         = $(window),\n\n        $module         = $(this),\n        $context        = $(settings.context),\n\n        $placeholder,\n\n        selector        = $module.selector || '',\n        instance        = $module.data(moduleNamespace),\n\n        requestAnimationFrame = window.requestAnimationFrame\n          || window.mozRequestAnimationFrame\n          || window.webkitRequestAnimationFrame\n          || window.msRequestAnimationFrame\n          || function(callback) { setTimeout(callback, 0); },\n\n        element         = this,\n        disabled        = false,\n\n        observer,\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.debug('Initializing', settings);\n\n          module.setup.cache();\n\n          if( module.should.trackChanges() ) {\n\n            if(settings.type == 'image') {\n              module.setup.image();\n            }\n            if(settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if(settings.observeChanges) {\n              module.observeChanges();\n            }\n            module.bind.events();\n          }\n\n          module.save.position();\n          if( !module.is.visible() ) {\n            module.error(error.visible, $module);\n          }\n\n          if(settings.initialCheck) {\n            module.checkVisibility();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.debug('Storing instance', module);\n          $module\n            .data(moduleNamespace, module)\n          ;\n          instance = module;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module');\n          if(observer) {\n            observer.disconnect();\n          }\n          $window\n            .off('load'   + eventNamespace, module.event.load)\n            .off('resize' + eventNamespace, module.event.resize)\n          ;\n          $context\n            .off('scrollchange' + eventNamespace, module.event.scrollchange)\n          ;\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            observer = new MutationObserver(function(mutations) {\n              module.verbose('DOM tree modified, updating visibility calculations');\n              module.timer = setTimeout(function() {\n                module.verbose('DOM tree modified, updating sticky menu');\n                module.refresh();\n              }, 100);\n            });\n            observer.observe(element, {\n              childList : true,\n              subtree   : true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding visibility events to scroll and resize');\n            if(settings.refreshOnLoad) {\n              $window\n                .on('load'   + eventNamespace, module.event.load)\n              ;\n            }\n            $window\n              .on('resize' + eventNamespace, module.event.resize)\n            ;\n            // pub/sub pattern\n            $context\n              .off('scroll'      + eventNamespace)\n              .on('scroll'       + eventNamespace, module.event.scroll)\n              .on('scrollchange' + eventNamespace, module.event.scrollchange)\n            ;\n          }\n        },\n\n        event: {\n          resize: function() {\n            module.debug('Window resized');\n            if(settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function() {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function() {\n            if(settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              }, settings.throttle);\n            }\n            else {\n              requestAnimationFrame(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function(event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          },\n        },\n\n        precache: function(images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n          var\n            imagesLength  = images.length,\n            loadedCounter = 0,\n            cache         = [],\n            cacheImage    = document.createElement('img'),\n            handleLoad    = function() {\n              loadedCounter++;\n              if (loadedCounter >= images.length) {\n                if ($.isFunction(callback)) {\n                  callback();\n                }\n              }\n            }\n          ;\n          while (imagesLength--) {\n            cacheImage         = document.createElement('img');\n            cacheImage.onload  = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src     = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n\n        enableCallbacks: function() {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n\n        disableCallbacks: function() {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n\n        should: {\n          trackChanges: function() {\n            if(methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n\n        setup: {\n          cache: function() {\n            module.cache = {\n              occurred : {},\n              screen   : {},\n              element  : {},\n            };\n          },\n          image: function() {\n            var\n              src = $module.data(metadata.src)\n            ;\n            if(src) {\n              module.verbose('Lazy loading image', src);\n              settings.once           = true;\n              settings.observeChanges = false;\n\n              // show when top visible\n              settings.onOnScreen = function() {\n                module.debug('Image on screen', element);\n                module.precache(src, function() {\n                  module.set.image(src);\n                });\n              };\n            }\n          },\n          fixed: function() {\n            module.debug('Setting up fixed');\n            settings.once           = false;\n            settings.observeChanges = false;\n            settings.initialCheck   = true;\n            settings.refreshOnLoad  = true;\n            if(!parameters.transition) {\n              settings.transition = false;\n            }\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n            settings.onTopPassed = function() {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n              if(settings.transition) {\n                if($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n            settings.onTopPassedReverse = function() {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n\n        create: {\n          placeholder: function() {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module\n              .clone(false)\n              .css('display', 'none')\n              .addClass(className.placeholder)\n              .insertAfter($module)\n            ;\n          }\n        },\n\n        show: {\n          placeholder: function() {\n            module.verbose('Showing placeholder');\n            $placeholder\n              .css('display', 'block')\n              .css('visibility', 'hidden')\n            ;\n          }\n        },\n        hide: {\n          placeholder: function() {\n            module.verbose('Hiding placeholder');\n            $placeholder\n              .css('display', 'none')\n              .css('visibility', '')\n            ;\n          }\n        },\n\n        set: {\n          fixed: function() {\n            module.verbose('Setting element to fixed position');\n            $module\n              .addClass(className.fixed)\n              .css({\n                position : 'fixed',\n                top      : settings.offset + 'px',\n                left     : 'auto',\n                zIndex   : '1'\n              })\n            ;\n          },\n          image: function(src) {\n            $module\n              .attr('src', src)\n            ;\n            if(settings.transition) {\n              if( $.fn.transition !== undefined ) {\n                $module.transition(settings.transition, settings.duration);\n              }\n              else {\n                $module.fadeIn(settings.duration);\n              }\n            }\n            else {\n              $module.show();\n            }\n          }\n        },\n\n        is: {\n          onScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.onScreen;\n          },\n          offScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.offScreen;\n          },\n          visible: function() {\n            if(module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n            return false;\n          }\n        },\n\n        refresh: function() {\n          module.debug('Refreshing constants (width/height)');\n          if(settings.type == 'fixed') {\n            module.remove.fixed();\n            module.remove.occurred();\n          }\n          module.reset();\n          module.save.position();\n          if(settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n          settings.onRefresh.call(element);\n        },\n\n        reset: function() {\n          module.verbose('Reseting all cached values');\n          if( $.isPlainObject(module.cache) ) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n\n        checkVisibility: function(scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if( !disabled && module.is.visible() ) {\n\n            // save scroll position\n            module.save.scroll(scroll);\n\n            // update calculations derived from scroll\n            module.save.calculations();\n\n            // percentage\n            module.passed();\n\n            // reverse (must be first)\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse();\n\n            // one time\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed();\n\n            // on update callback\n            if(settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n\n        passed: function(amount, newCallback) {\n          var\n            calculations   = module.get.elementCalculations(),\n            amountInPixels\n          ;\n          // assign callback\n          if(amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          }\n          else if(amount !== undefined) {\n            return (module.get.pixelsPassed(amount) > calculations.pixelsPassed);\n          }\n          else if(calculations.passing) {\n            $.each(settings.onPassed, function(amount, callback) {\n              if(calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              }\n              else if(!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n\n        onScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOnScreen,\n            callbackName = 'onScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n          if(calculations.onScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n\n        offScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOffScreen,\n            callbackName = 'offScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n          if(calculations.offScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n\n        passing: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassing,\n            callbackName = 'passing'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n          if(calculations.passing) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n\n\n        topVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisible,\n            callbackName = 'topVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n          if(calculations.topVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n\n        bottomVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisible,\n            callbackName = 'bottomVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n          if(calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n\n        topPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassed,\n            callbackName = 'topPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n          if(calculations.topPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n\n        bottomPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassed,\n            callbackName = 'bottomPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n          if(calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n\n        passingReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassingReverse,\n            callbackName = 'passingReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n          if(!calculations.passing) {\n            if(module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n\n\n        topVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisibleReverse,\n            callbackName = 'topVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n          if(!calculations.topVisible) {\n            if(module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n\n        bottomVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisibleReverse,\n            callbackName = 'bottomVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n          if(!calculations.bottomVisible) {\n            if(module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n\n        topPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassedReverse,\n            callbackName = 'topPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n          if(!calculations.topPassed) {\n            if(module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n\n        bottomPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassedReverse,\n            callbackName = 'bottomPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n          if(!calculations.bottomPassed) {\n            if(module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n\n        execute: function(callback, callbackName) {\n          var\n            calculations = module.get.elementCalculations(),\n            screen       = module.get.screenCalculations()\n          ;\n          callback = callback || false;\n          if(callback) {\n            if(settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n            else if(!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n          module.save.occurred(callbackName);\n        },\n\n        remove: {\n          fixed: function() {\n            module.debug('Removing fixed position');\n            $module\n              .removeClass(className.fixed)\n              .css({\n                position : '',\n                top      : '',\n                left     : '',\n                zIndex   : ''\n              })\n            ;\n          },\n          occurred: function(callback) {\n            if(callback) {\n              var\n                occurred = module.cache.occurred\n              ;\n              if(occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            }\n            else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n\n        save: {\n          calculations: function() {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function(callback) {\n            if(callback) {\n              if(module.cache.occurred[callback] === undefined || (module.cache.occurred[callback] !== true)) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function(scrollPosition) {\n            scrollPosition      = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function() {\n            var\n              scroll     = module.get.scroll(),\n              lastScroll = module.get.lastScroll(),\n              direction\n            ;\n            if(scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            }\n            else if(scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            }\n            else {\n              direction = 'static';\n            }\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            var\n              element = module.cache.element,\n              screen  = module.get.screenSize()\n            ;\n            module.verbose('Saving element position');\n            // (quicker than $.extend)\n            element.fits          = (element.height < screen.height);\n            element.offset        = $module.offset();\n            element.width         = $module.outerWidth();\n            element.height        = $module.outerHeight();\n            // store\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function() {\n            var\n              screen     = module.get.screenCalculations(),\n              element    = module.get.elementPosition()\n            ;\n            // offset\n            if(settings.includeMargin) {\n              element.margin        = {};\n              element.margin.top    = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top    = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            }\n            else {\n              element.top    = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            }\n\n            // visibility\n            element.topVisible       = (screen.bottom >= element.top);\n            element.topPassed        = (screen.top >= element.top);\n            element.bottomVisible    = (screen.bottom >= element.bottom);\n            element.bottomPassed     = (screen.top >= element.bottom);\n            element.pixelsPassed     = 0;\n            element.percentagePassed = 0;\n\n            // meta calculations\n            element.onScreen  = (element.topVisible && !element.bottomPassed);\n            element.passing   = (element.topPassed && !element.bottomPassed);\n            element.offScreen = (!element.onScreen);\n\n            // passing calculations\n            if(element.passing) {\n              element.pixelsPassed     = (screen.top - element.top);\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function() {\n            var\n              scroll = module.get.scroll()\n            ;\n            module.save.direction();\n            module.cache.screen.top    = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function() {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n\n        get: {\n          pixelsPassed: function(amount) {\n            var\n              element = module.get.elementCalculations()\n            ;\n            if(amount.search('%') > -1) {\n              return ( element.height * (parseInt(amount, 10) / 100) );\n            }\n            return parseInt(amount, 10);\n          },\n          occurred: function(callback) {\n            return (module.cache.occurred !== undefined)\n              ? module.cache.occurred[callback] || false\n              : false\n            ;\n          },\n          direction: function() {\n            if(module.cache.direction === undefined) {\n              module.save.direction();\n            }\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n            return module.cache.element;\n          },\n          elementCalculations: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n            return module.cache.element;\n          },\n          screenCalculations: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n            return module.cache.screen;\n          },\n          scroll: function() {\n            if(module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n            return module.cache.scroll;\n          },\n          lastScroll: function() {\n            if(module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n            return module.cache.screen.top;\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.visibility.settings = {\n\n  name                   : 'Visibility',\n  namespace              : 'visibility',\n\n  debug                  : false,\n  verbose                : false,\n  performance            : true,\n\n  // whether to use mutation observers to follow changes\n  observeChanges         : true,\n\n  // check position immediately on init\n  initialCheck           : true,\n\n  // whether to refresh calculations after all page images load\n  refreshOnLoad          : true,\n\n  // whether to refresh calculations after page resize event\n  refreshOnResize        : true,\n\n  // should call callbacks on refresh event (resize, etc)\n  checkOnRefresh         : true,\n\n  // callback should only occur one time\n  once                   : true,\n\n  // callback should fire continuously whe evaluates to true\n  continuous             : false,\n\n  // offset to use with scroll top\n  offset                 : 0,\n\n  // whether to include margin in elements position\n  includeMargin          : false,\n\n  // scroll context for visibility checks\n  context                : window,\n\n  // visibility check delay in ms (defaults to animationFrame)\n  throttle               : false,\n\n  // special visibility type (image, fixed)\n  type                   : false,\n\n  // image only animation settings\n  transition             : 'fade in',\n  duration               : 1000,\n\n  // array of callbacks for percentage\n  onPassed               : {},\n\n  // standard callbacks\n  onOnScreen             : false,\n  onOffScreen            : false,\n  onPassing              : false,\n  onTopVisible           : false,\n  onBottomVisible        : false,\n  onTopPassed            : false,\n  onBottomPassed         : false,\n\n  // reverse callbacks\n  onPassingReverse       : false,\n  onTopVisibleReverse    : false,\n  onBottomVisibleReverse : false,\n  onTopPassedReverse     : false,\n  onBottomPassedReverse  : false,\n\n  // utility callbacks\n  onUpdate               : false, // disabled by default for performance\n  onRefresh              : function(){},\n\n  metadata : {\n    src: 'src'\n  },\n\n  className: {\n    fixed       : 'fixed',\n    placeholder : 'placeholder'\n  },\n\n  error : {\n    method  : 'The method you called is not defined.',\n    visible : 'Element is hidden, you must call refresh after element becomes visible'\n  }\n\n};\n\n})( jQuery, window, document );"]},"sourceType":"script","hash":"9701fd113425071aed6851f5b3c944e52ebeadc3"}
