{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"client/lib/definitions/behaviors/api.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/lib/definitions/behaviors/api.js","filename":"client/lib/definitions/behaviors/api.js","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/martijn/Documents/GitHub/QRSMeteor","root":"/home/martijn/Documents/GitHub/QRSMeteor","generatorOpts":{"filename":"client/lib/definitions/behaviors/api.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/definitions/behaviors/api.js"}},"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n\n/*!\n * # Semantic UI - API\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  $.api = $.fn.api = function (parameters) {\n    var // use window context if none specified\n    $allModules = $.isFunction(this) ? $(window) : $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.api.settings, parameters) : $.extend({}, $.fn.api.settings),\n          // internal aliases\n      namespace = settings.namespace,\n          metadata = settings.metadata,\n          selector = settings.selector,\n          error = settings.error,\n          className = settings.className,\n          // define namespaces for modules\n      eventNamespace = '.' + namespace,\n          moduleNamespace = 'module-' + namespace,\n          // element that creates request\n      $module = $(this),\n          $form = $module.closest(selector.form),\n          // context used for state\n      $context = settings.stateContext ? $(settings.stateContext) : $module,\n          // request details\n      ajaxSettings,\n          requestSettings,\n          url,\n          data,\n          requestStartTime,\n          // standard module\n      element = this,\n          context = $context[0],\n          instance = $module.data(moduleNamespace),\n          module;\n      module = {\n        initialize: function () {\n          if (!methodInvoked) {\n            module.bind.events();\n          }\n\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, instance);\n        },\n        destroy: function () {\n          module.verbose('Destroying previous module for', element);\n          $module.removeData(moduleNamespace).off(eventNamespace);\n        },\n        bind: {\n          events: function () {\n            var triggerEvent = module.get.event();\n\n            if (triggerEvent) {\n              module.verbose('Attaching API events to element', triggerEvent);\n              $module.on(triggerEvent + eventNamespace, module.event.trigger);\n            } else if (settings.on == 'now') {\n              module.debug('Querying API endpoint immediately');\n              module.query();\n            }\n          }\n        },\n        decode: {\n          json: function (response) {\n            if (response !== undefined && typeof response == 'string') {\n              try {\n                response = JSON.parse(response);\n              } catch (e) {// isnt json string\n              }\n            }\n\n            return response;\n          }\n        },\n        read: {\n          cachedResponse: function (url) {\n            var response;\n\n            if (window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n\n            response = sessionStorage.getItem(url);\n            module.debug('Using cached response', url, response);\n            response = module.decode.json(response);\n            return false;\n          }\n        },\n        write: {\n          cachedResponse: function (url, response) {\n            if (response && response === '') {\n              module.debug('Response empty, not caching', response);\n              return;\n            }\n\n            if (window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n\n            if ($.isPlainObject(response)) {\n              response = JSON.stringify(response);\n            }\n\n            sessionStorage.setItem(url, response);\n            module.verbose('Storing cached response for url', url, response);\n          }\n        },\n        query: function () {\n          if (module.is.disabled()) {\n            module.debug('Element is disabled API request aborted');\n            return;\n          }\n\n          if (module.is.loading()) {\n            if (settings.interruptRequests) {\n              module.debug('Interrupting previous request');\n              module.abort();\n            } else {\n              module.debug('Cancelling request, previous request is still pending');\n              return;\n            }\n          } // pass element metadata to url (value, text)\n\n\n          if (settings.defaultData) {\n            $.extend(true, settings.urlData, module.get.defaultData());\n          } // Add form content\n\n\n          if (settings.serializeForm) {\n            settings.data = module.add.formData(settings.data);\n          } // call beforesend and get any settings changes\n\n\n          requestSettings = module.get.settings(); // check if before send cancelled request\n\n          if (requestSettings === false) {\n            module.cancelled = true;\n            module.error(error.beforeSend);\n            return;\n          } else {\n            module.cancelled = false;\n          } // get url\n\n\n          url = module.get.templatedURL();\n\n          if (!url && !module.is.mocked()) {\n            module.error(error.missingURL);\n            return;\n          } // replace variables\n\n\n          url = module.add.urlData(url); // missing url parameters\n\n          if (!url && !module.is.mocked()) {\n            return;\n          }\n\n          requestSettings.url = settings.base + url; // look for jQuery ajax parameters in settings\n\n          ajaxSettings = $.extend(true, {}, settings, {\n            type: settings.method || settings.type,\n            data: data,\n            url: settings.base + url,\n            beforeSend: settings.beforeXHR,\n            success: function () {},\n            failure: function () {},\n            complete: function () {}\n          });\n          module.debug('Querying URL', ajaxSettings.url);\n          module.verbose('Using AJAX settings', ajaxSettings);\n\n          if (settings.cache === 'local' && module.read.cachedResponse(url)) {\n            module.debug('Response returned from local cache');\n            module.request = module.create.request();\n            module.request.resolveWith(context, [module.read.cachedResponse(url)]);\n            return;\n          }\n\n          if (!settings.throttle) {\n            module.debug('Sending request', data, ajaxSettings.method);\n            module.send.request();\n          } else {\n            if (!settings.throttleFirstRequest && !module.timer) {\n              module.debug('Sending request', data, ajaxSettings.method);\n              module.send.request();\n              module.timer = setTimeout(function () {}, settings.throttle);\n            } else {\n              module.debug('Throttling request', settings.throttle);\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function () {\n                if (module.timer) {\n                  delete module.timer;\n                }\n\n                module.debug('Sending throttled request', data, ajaxSettings.method);\n                module.send.request();\n              }, settings.throttle);\n            }\n          }\n        },\n        should: {\n          removeError: function () {\n            return settings.hideError === true || settings.hideError === 'auto' && !module.is.form();\n          }\n        },\n        is: {\n          disabled: function () {\n            return $module.filter(selector.disabled).length > 0;\n          },\n          form: function () {\n            return $module.is('form') || $context.is('form');\n          },\n          mocked: function () {\n            return settings.mockResponse || settings.mockResponseAsync || settings.response || settings.responseAsync;\n          },\n          input: function () {\n            return $module.is('input');\n          },\n          loading: function () {\n            return module.request && module.request.state() == 'pending';\n          },\n          abortedRequest: function (xhr) {\n            if (xhr && xhr.readyState !== undefined && xhr.readyState === 0) {\n              module.verbose('XHR request determined to be aborted');\n              return true;\n            } else {\n              module.verbose('XHR request was not aborted');\n              return false;\n            }\n          },\n          validResponse: function (response) {\n            if (settings.dataType !== 'json' && settings.dataType !== 'jsonp' || !$.isFunction(settings.successTest)) {\n              module.verbose('Response is not JSON, skipping validation', settings.successTest, response);\n              return true;\n            }\n\n            module.debug('Checking JSON returned success', settings.successTest, response);\n\n            if (settings.successTest(response)) {\n              module.debug('Response passed success test', response);\n              return true;\n            } else {\n              module.debug('Response failed success test', response);\n              return false;\n            }\n          }\n        },\n        was: {\n          cancelled: function () {\n            return module.cancelled || false;\n          },\n          succesful: function () {\n            return module.request && module.request.state() == 'resolved';\n          },\n          failure: function () {\n            return module.request && module.request.state() == 'rejected';\n          },\n          complete: function () {\n            return module.request && (module.request.state() == 'resolved' || module.request.state() == 'rejected');\n          }\n        },\n        add: {\n          urlData: function (url, urlData) {\n            var requiredVariables, optionalVariables;\n\n            if (url) {\n              requiredVariables = url.match(settings.regExp.required);\n              optionalVariables = url.match(settings.regExp.optional);\n              urlData = urlData || settings.urlData;\n\n              if (requiredVariables) {\n                module.debug('Looking for required URL variables', requiredVariables);\n                $.each(requiredVariables, function (index, templatedString) {\n                  var // allow legacy {$var} style\n                  variable = templatedString.indexOf('$') !== -1 ? templatedString.substr(2, templatedString.length - 3) : templatedString.substr(1, templatedString.length - 2),\n                      value = $.isPlainObject(urlData) && urlData[variable] !== undefined ? urlData[variable] : $module.data(variable) !== undefined ? $module.data(variable) : $context.data(variable) !== undefined ? $context.data(variable) : urlData[variable]; // remove value\n\n                  if (value === undefined) {\n                    module.error(error.requiredParameter, variable, url);\n                    url = false;\n                    return false;\n                  } else {\n                    module.verbose('Found required variable', variable, value);\n                    value = settings.encodeParameters ? module.get.urlEncodedValue(value) : value;\n                    url = url.replace(templatedString, value);\n                  }\n                });\n              }\n\n              if (optionalVariables) {\n                module.debug('Looking for optional URL variables', requiredVariables);\n                $.each(optionalVariables, function (index, templatedString) {\n                  var // allow legacy {/$var} style\n                  variable = templatedString.indexOf('$') !== -1 ? templatedString.substr(3, templatedString.length - 4) : templatedString.substr(2, templatedString.length - 3),\n                      value = $.isPlainObject(urlData) && urlData[variable] !== undefined ? urlData[variable] : $module.data(variable) !== undefined ? $module.data(variable) : $context.data(variable) !== undefined ? $context.data(variable) : urlData[variable]; // optional replacement\n\n                  if (value !== undefined) {\n                    module.verbose('Optional variable Found', variable, value);\n                    url = url.replace(templatedString, value);\n                  } else {\n                    module.verbose('Optional variable not found', variable); // remove preceding slash if set\n\n                    if (url.indexOf('/' + templatedString) !== -1) {\n                      url = url.replace('/' + templatedString, '');\n                    } else {\n                      url = url.replace(templatedString, '');\n                    }\n                  }\n                });\n              }\n            }\n\n            return url;\n          },\n          formData: function (data) {\n            var canSerialize = $.fn.serializeObject !== undefined,\n                formData = canSerialize ? $form.serializeObject() : $form.serialize(),\n                hasOtherData;\n            data = data || settings.data;\n            hasOtherData = $.isPlainObject(data);\n\n            if (hasOtherData) {\n              if (canSerialize) {\n                module.debug('Extending existing data with form data', data, formData);\n                data = $.extend(true, {}, data, formData);\n              } else {\n                module.error(error.missingSerialize);\n                module.debug('Cant extend data. Replacing data with form data', data, formData);\n                data = formData;\n              }\n            } else {\n              module.debug('Adding form data', formData);\n              data = formData;\n            }\n\n            return data;\n          }\n        },\n        send: {\n          request: function () {\n            module.set.loading();\n            module.request = module.create.request();\n\n            if (module.is.mocked()) {\n              module.mockedXHR = module.create.mockedXHR();\n            } else {\n              module.xhr = module.create.xhr();\n            }\n\n            settings.onRequest.call(context, module.request, module.xhr);\n          }\n        },\n        event: {\n          trigger: function (event) {\n            module.query();\n\n            if (event.type == 'submit' || event.type == 'click') {\n              event.preventDefault();\n            }\n          },\n          xhr: {\n            always: function () {// nothing special\n            },\n            done: function (response, textStatus, xhr) {\n              var context = this,\n                  elapsedTime = new Date().getTime() - requestStartTime,\n                  timeLeft = settings.loadingDuration - elapsedTime,\n                  translatedResponse = $.isFunction(settings.onResponse) ? settings.onResponse.call(context, $.extend(true, {}, response)) : false;\n              timeLeft = timeLeft > 0 ? timeLeft : 0;\n\n              if (translatedResponse) {\n                module.debug('Modified API response in onResponse callback', settings.onResponse, translatedResponse, response);\n                response = translatedResponse;\n              }\n\n              if (timeLeft > 0) {\n                module.debug('Response completed early delaying state change by', timeLeft);\n              }\n\n              setTimeout(function () {\n                if (module.is.validResponse(response)) {\n                  module.request.resolveWith(context, [response, xhr]);\n                } else {\n                  module.request.rejectWith(context, [xhr, 'invalid']);\n                }\n              }, timeLeft);\n            },\n            fail: function (xhr, status, httpMessage) {\n              var context = this,\n                  elapsedTime = new Date().getTime() - requestStartTime,\n                  timeLeft = settings.loadingDuration - elapsedTime;\n              timeLeft = timeLeft > 0 ? timeLeft : 0;\n\n              if (timeLeft > 0) {\n                module.debug('Response completed early delaying state change by', timeLeft);\n              }\n\n              setTimeout(function () {\n                if (module.is.abortedRequest(xhr)) {\n                  module.request.rejectWith(context, [xhr, 'aborted', httpMessage]);\n                } else {\n                  module.request.rejectWith(context, [xhr, 'error', status, httpMessage]);\n                }\n              }, timeLeft);\n            }\n          },\n          request: {\n            done: function (response, xhr) {\n              module.debug('Successful API Response', response);\n\n              if (settings.cache === 'local' && url) {\n                module.write.cachedResponse(url, response);\n                module.debug('Saving server response locally', module.cache);\n              }\n\n              settings.onSuccess.call(context, response, $module, xhr);\n            },\n            complete: function (firstParameter, secondParameter) {\n              var xhr, response; // have to guess callback parameters based on request success\n\n              if (module.was.succesful()) {\n                response = firstParameter;\n                xhr = secondParameter;\n              } else {\n                xhr = firstParameter;\n                response = module.get.responseFromXHR(xhr);\n              }\n\n              module.remove.loading();\n              settings.onComplete.call(context, response, $module, xhr);\n            },\n            fail: function (xhr, status, httpMessage) {\n              var // pull response from xhr if available\n              response = module.get.responseFromXHR(xhr),\n                  errorMessage = module.get.errorFromRequest(response, status, httpMessage);\n\n              if (status == 'aborted') {\n                module.debug('XHR Aborted (Most likely caused by page navigation or CORS Policy)', status, httpMessage);\n                settings.onAbort.call(context, status, $module, xhr);\n              } else if (status == 'invalid') {\n                module.debug('JSON did not pass success test. A server-side error has most likely occurred', response);\n              } else if (status == 'error') {\n                if (xhr !== undefined) {\n                  module.debug('XHR produced a server error', status, httpMessage); // make sure we have an error to display to console\n\n                  if (xhr.status != 200 && httpMessage !== undefined && httpMessage !== '') {\n                    module.error(error.statusMessage + httpMessage, ajaxSettings.url);\n                  }\n\n                  settings.onError.call(context, errorMessage, $module, xhr);\n                }\n              }\n\n              if (settings.errorDuration && status !== 'aborted') {\n                module.debug('Adding error state');\n                module.set.error();\n\n                if (module.should.removeError()) {\n                  setTimeout(module.remove.error, settings.errorDuration);\n                }\n              }\n\n              module.debug('API Request failed', errorMessage, xhr);\n              settings.onFailure.call(context, response, $module, xhr);\n            }\n          }\n        },\n        create: {\n          request: function () {\n            // api request promise\n            return $.Deferred().always(module.event.request.complete).done(module.event.request.done).fail(module.event.request.fail);\n          },\n          mockedXHR: function () {\n            var // xhr does not simulate these properties of xhr but must return them\n            textStatus = false,\n                status = false,\n                httpMessage = false,\n                responder = settings.mockResponse || settings.response,\n                asyncResponder = settings.mockResponseAsync || settings.responseAsync,\n                asyncCallback,\n                response,\n                mockedXHR;\n            mockedXHR = $.Deferred().always(module.event.xhr.complete).done(module.event.xhr.done).fail(module.event.xhr.fail);\n\n            if (responder) {\n              if ($.isFunction(responder)) {\n                module.debug('Using specified synchronous callback', responder);\n                response = responder.call(context, requestSettings);\n              } else {\n                module.debug('Using settings specified response', responder);\n                response = responder;\n              } // simulating response\n\n\n              mockedXHR.resolveWith(context, [response, textStatus, {\n                responseText: response\n              }]);\n            } else if ($.isFunction(asyncResponder)) {\n              asyncCallback = function (response) {\n                module.debug('Async callback returned response', response);\n\n                if (response) {\n                  mockedXHR.resolveWith(context, [response, textStatus, {\n                    responseText: response\n                  }]);\n                } else {\n                  mockedXHR.rejectWith(context, [{\n                    responseText: response\n                  }, status, httpMessage]);\n                }\n              };\n\n              module.debug('Using specified async response callback', asyncResponder);\n              asyncResponder.call(context, requestSettings, asyncCallback);\n            }\n\n            return mockedXHR;\n          },\n          xhr: function () {\n            var xhr; // ajax request promise\n\n            xhr = $.ajax(ajaxSettings).always(module.event.xhr.always).done(module.event.xhr.done).fail(module.event.xhr.fail);\n            module.verbose('Created server request', xhr);\n            return xhr;\n          }\n        },\n        set: {\n          error: function () {\n            module.verbose('Adding error state to element', $context);\n            $context.addClass(className.error);\n          },\n          loading: function () {\n            module.verbose('Adding loading state to element', $context);\n            $context.addClass(className.loading);\n            requestStartTime = new Date().getTime();\n          }\n        },\n        remove: {\n          error: function () {\n            module.verbose('Removing error state from element', $context);\n            $context.removeClass(className.error);\n          },\n          loading: function () {\n            module.verbose('Removing loading state from element', $context);\n            $context.removeClass(className.loading);\n          }\n        },\n        get: {\n          responseFromXHR: function (xhr) {\n            return $.isPlainObject(xhr) ? settings.dataType == 'json' || settings.dataType == 'jsonp' ? module.decode.json(xhr.responseText) : xhr.responseText : false;\n          },\n          errorFromRequest: function (response, status, httpMessage) {\n            return $.isPlainObject(response) && response.error !== undefined ? response.error // use json error message\n            : settings.error[status] !== undefined ? // use server error message\n            settings.error[status] : httpMessage;\n          },\n          request: function () {\n            return module.request || false;\n          },\n          xhr: function () {\n            return module.xhr || false;\n          },\n          settings: function () {\n            var runSettings;\n            runSettings = settings.beforeSend.call(context, settings);\n\n            if (runSettings) {\n              if (runSettings.success !== undefined) {\n                module.debug('Legacy success callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.success);\n                runSettings.onSuccess = runSettings.success;\n              }\n\n              if (runSettings.failure !== undefined) {\n                module.debug('Legacy failure callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.failure);\n                runSettings.onFailure = runSettings.failure;\n              }\n\n              if (runSettings.complete !== undefined) {\n                module.debug('Legacy complete callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.complete);\n                runSettings.onComplete = runSettings.complete;\n              }\n            }\n\n            if (runSettings === undefined) {\n              module.error(error.noReturnedValue);\n            }\n\n            return runSettings !== undefined ? $.extend(true, {}, runSettings) : $.extend(true, {}, settings);\n          },\n          urlEncodedValue: function (value) {\n            var decodedValue = window.decodeURIComponent(value),\n                encodedValue = window.encodeURIComponent(value),\n                alreadyEncoded = decodedValue !== value;\n\n            if (alreadyEncoded) {\n              module.debug('URL value is already encoded, avoiding double encoding', value);\n              return value;\n            }\n\n            module.verbose('Encoding value using encodeURIComponent', value, encodedValue);\n            return encodedValue;\n          },\n          defaultData: function () {\n            var data = {};\n\n            if (!$.isWindow(element)) {\n              if (module.is.input()) {\n                data.value = $module.val();\n              } else if (!module.is.form()) {} else {\n                data.text = $module.text();\n              }\n            }\n\n            return data;\n          },\n          event: function () {\n            if ($.isWindow(element) || settings.on == 'now') {\n              module.debug('API called without element, no events attached');\n              return false;\n            } else if (settings.on == 'auto') {\n              if ($module.is('input')) {\n                return element.oninput !== undefined ? 'input' : element.onpropertychange !== undefined ? 'propertychange' : 'keyup';\n              } else if ($module.is('form')) {\n                return 'submit';\n              } else {\n                return 'click';\n              }\n            } else {\n              return settings.on;\n            }\n          },\n          templatedURL: function (action) {\n            action = action || $module.data(metadata.action) || settings.action || false;\n            url = $module.data(metadata.url) || settings.url || false;\n\n            if (url) {\n              module.debug('Using specified url', url);\n              return url;\n            }\n\n            if (action) {\n              module.debug('Looking up url for action', action, settings.api);\n\n              if (settings.api[action] === undefined && !module.is.mocked()) {\n                module.error(error.missingAction, settings.action, settings.api);\n                return;\n              }\n\n              url = settings.api[action];\n            } else if (module.is.form()) {\n              url = $module.attr('action') || $context.attr('action') || false;\n              module.debug('No url or action specified, defaulting to form action', url);\n            }\n\n            return url;\n          }\n        },\n        abort: function () {\n          var xhr = module.get.xhr();\n\n          if (xhr && xhr.state() !== 'resolved') {\n            module.debug('Cancelling API request');\n            xhr.abort();\n          }\n        },\n        // reset state\n        reset: function () {\n          module.remove.error();\n          module.remove.loading();\n        },\n        setting: function (name, value) {\n          module.debug('Changing setting', name, value);\n\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                //'Element'        : element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.api.settings = {\n    name: 'API',\n    namespace: 'api',\n    debug: false,\n    verbose: false,\n    performance: true,\n    // object containing all templates endpoints\n    api: {},\n    // whether to cache responses\n    cache: true,\n    // whether new requests should abort previous requests\n    interruptRequests: true,\n    // event binding\n    on: 'auto',\n    // context for applying state classes\n    stateContext: false,\n    // duration for loading state\n    loadingDuration: 0,\n    // whether to hide errors after a period of time\n    hideError: 'auto',\n    // duration for error state\n    errorDuration: 2000,\n    // whether parameters should be encoded with encodeURIComponent\n    encodeParameters: true,\n    // API action to use\n    action: false,\n    // templated URL to use\n    url: false,\n    // base URL to apply to all endpoints\n    base: '',\n    // data that will\n    urlData: {},\n    // whether to add default data to url data\n    defaultData: true,\n    // whether to serialize closest form\n    serializeForm: false,\n    // how long to wait before request should occur\n    throttle: 0,\n    // whether to throttle first request or only repeated\n    throttleFirstRequest: true,\n    // standard ajax settings\n    method: 'get',\n    data: {},\n    dataType: 'json',\n    // mock response\n    mockResponse: false,\n    mockResponseAsync: false,\n    // aliases for mock\n    response: false,\n    responseAsync: false,\n    // callbacks before request\n    beforeSend: function (settings) {\n      return settings;\n    },\n    beforeXHR: function (xhr) {},\n    onRequest: function (promise, xhr) {},\n    // after request\n    onResponse: false,\n    // function(response) { },\n    // response was successful, if JSON passed validation\n    onSuccess: function (response, $module) {},\n    // request finished without aborting\n    onComplete: function (response, $module) {},\n    // failed JSON success test\n    onFailure: function (response, $module) {},\n    // server error\n    onError: function (errorMessage, $module) {},\n    // request aborted\n    onAbort: function (errorMessage, $module) {},\n    successTest: false,\n    // errors\n    error: {\n      beforeSend: 'The before send function has aborted the request',\n      error: 'There was an error with your request',\n      exitConditions: 'API Request Aborted. Exit conditions met',\n      JSONParse: 'JSON could not be parsed during error handling',\n      legacyParameters: 'You are using legacy API success callback names',\n      method: 'The method you called is not defined',\n      missingAction: 'API action used but no url was defined',\n      missingSerialize: 'jquery-serialize-object is required to add form data to an existing data object',\n      missingURL: 'No URL specified for api event',\n      noReturnedValue: 'The beforeSend callback must return a settings object, beforeSend ignored.',\n      noStorage: 'Caching responses locally requires session storage',\n      parseError: 'There was an error parsing your request',\n      requiredParameter: 'Missing a required URL parameter: ',\n      statusMessage: 'Server gave an error: ',\n      timeout: 'Your request timed out'\n    },\n    regExp: {\n      required: /\\{\\$*[A-z0-9]+\\}/g,\n      optional: /\\{\\/\\$*[A-z0-9]+\\}/g\n    },\n    className: {\n      loading: 'loading',\n      error: 'error'\n    },\n    selector: {\n      disabled: '.disabled',\n      form: 'form'\n    },\n    metadata: {\n      action: 'action',\n      url: 'url'\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["client/lib/definitions/behaviors/api.js"],"names":["$","window","document","undefined","api","fn","parameters","$allModules","isFunction","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","namespace","metadata","error","className","eventNamespace","moduleNamespace","$module","$form","closest","form","$context","stateContext","ajaxSettings","requestSettings","url","data","requestStartTime","element","context","instance","module","initialize","bind","events","instantiate","verbose","destroy","removeData","off","triggerEvent","get","event","on","trigger","debug","decode","json","response","JSON","parse","e","read","cachedResponse","Storage","noStorage","sessionStorage","getItem","write","stringify","setItem","is","disabled","loading","interruptRequests","abort","defaultData","urlData","serializeForm","add","formData","cancelled","beforeSend","templatedURL","mocked","missingURL","base","type","method","beforeXHR","success","failure","complete","cache","request","create","resolveWith","throttle","send","throttleFirstRequest","timer","setTimeout","clearTimeout","should","removeError","hideError","filter","length","mockResponse","mockResponseAsync","responseAsync","input","state","abortedRequest","xhr","readyState","validResponse","dataType","successTest","was","succesful","requiredVariables","optionalVariables","match","regExp","required","optional","index","templatedString","variable","indexOf","substr","value","requiredParameter","encodeParameters","urlEncodedValue","replace","canSerialize","serializeObject","serialize","hasOtherData","missingSerialize","set","mockedXHR","onRequest","preventDefault","always","done","textStatus","elapsedTime","timeLeft","loadingDuration","translatedResponse","onResponse","rejectWith","fail","status","httpMessage","onSuccess","firstParameter","secondParameter","responseFromXHR","remove","onComplete","errorMessage","errorFromRequest","onAbort","statusMessage","onError","errorDuration","onFailure","Deferred","responder","asyncResponder","asyncCallback","responseText","ajax","addClass","removeClass","runSettings","legacyParameters","noReturnedValue","decodedValue","decodeURIComponent","encodedValue","encodeURIComponent","alreadyEncoded","isWindow","val","text","oninput","onpropertychange","action","missingAction","attr","reset","setting","name","internal","log","Function","prototype","console","info","apply","message","currentTime","executionTime","previousTime","push","display","title","totalTime","group","table","groupCollapsed","groupEnd","invoke","passedArguments","object","maxDepth","found","split","depth","camelCaseValue","charAt","toUpperCase","isArray","promise","exitConditions","JSONParse","parseError","timeout","jQuery"],"mappings":"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","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n/*!\n * # Semantic UI - API\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ( $, window, document, undefined ) {\n\n\"use strict\";\n\n$.api = $.fn.api = function(parameters) {\n\n  var\n    // use window context if none specified\n    $allModules     = $.isFunction(this)\n        ? $(window)\n        : $(this),\n    moduleSelector = $allModules.selector || '',\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n\n    returnedValue\n  ;\n\n  $allModules\n    .each(function() {\n      var\n        settings          = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.api.settings, parameters)\n          : $.extend({}, $.fn.api.settings),\n\n        // internal aliases\n        namespace       = settings.namespace,\n        metadata        = settings.metadata,\n        selector        = settings.selector,\n        error           = settings.error,\n        className       = settings.className,\n\n        // define namespaces for modules\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        // element that creates request\n        $module         = $(this),\n        $form           = $module.closest(selector.form),\n\n        // context used for state\n        $context        = (settings.stateContext)\n          ? $(settings.stateContext)\n          : $module,\n\n        // request details\n        ajaxSettings,\n        requestSettings,\n        url,\n        data,\n        requestStartTime,\n\n        // standard module\n        element         = this,\n        context         = $context[0],\n        instance        = $module.data(moduleNamespace),\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          if(!methodInvoked) {\n            module.bind.events();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, instance)\n          ;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module for', element);\n          $module\n            .removeData(moduleNamespace)\n            .off(eventNamespace)\n          ;\n        },\n\n        bind: {\n          events: function() {\n            var\n              triggerEvent = module.get.event()\n            ;\n            if( triggerEvent ) {\n              module.verbose('Attaching API events to element', triggerEvent);\n              $module\n                .on(triggerEvent + eventNamespace, module.event.trigger)\n              ;\n            }\n            else if(settings.on == 'now') {\n              module.debug('Querying API endpoint immediately');\n              module.query();\n            }\n          }\n        },\n\n        decode: {\n          json: function(response) {\n            if(response !== undefined && typeof response == 'string') {\n              try {\n               response = JSON.parse(response);\n              }\n              catch(e) {\n                // isnt json string\n              }\n            }\n            return response;\n          }\n        },\n\n        read: {\n          cachedResponse: function(url) {\n            var\n              response\n            ;\n            if(window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n            response = sessionStorage.getItem(url);\n            module.debug('Using cached response', url, response);\n            response = module.decode.json(response);\n            return false;\n          }\n        },\n        write: {\n          cachedResponse: function(url, response) {\n            if(response && response === '') {\n              module.debug('Response empty, not caching', response);\n              return;\n            }\n            if(window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n            if( $.isPlainObject(response) ) {\n              response = JSON.stringify(response);\n            }\n            sessionStorage.setItem(url, response);\n            module.verbose('Storing cached response for url', url, response);\n          }\n        },\n\n        query: function() {\n\n          if(module.is.disabled()) {\n            module.debug('Element is disabled API request aborted');\n            return;\n          }\n\n          if(module.is.loading()) {\n            if(settings.interruptRequests) {\n              module.debug('Interrupting previous request');\n              module.abort();\n            }\n            else {\n              module.debug('Cancelling request, previous request is still pending');\n              return;\n            }\n          }\n\n          // pass element metadata to url (value, text)\n          if(settings.defaultData) {\n            $.extend(true, settings.urlData, module.get.defaultData());\n          }\n\n          // Add form content\n          if(settings.serializeForm) {\n            settings.data = module.add.formData(settings.data);\n          }\n\n          // call beforesend and get any settings changes\n          requestSettings = module.get.settings();\n\n          // check if before send cancelled request\n          if(requestSettings === false) {\n            module.cancelled = true;\n            module.error(error.beforeSend);\n            return;\n          }\n          else {\n            module.cancelled = false;\n          }\n\n          // get url\n          url = module.get.templatedURL();\n\n          if(!url && !module.is.mocked()) {\n            module.error(error.missingURL);\n            return;\n          }\n\n          // replace variables\n          url = module.add.urlData( url );\n          // missing url parameters\n          if( !url && !module.is.mocked()) {\n            return;\n          }\n\n          requestSettings.url = settings.base + url;\n\n          // look for jQuery ajax parameters in settings\n          ajaxSettings = $.extend(true, {}, settings, {\n            type       : settings.method || settings.type,\n            data       : data,\n            url        : settings.base + url,\n            beforeSend : settings.beforeXHR,\n            success    : function() {},\n            failure    : function() {},\n            complete   : function() {}\n          });\n\n          module.debug('Querying URL', ajaxSettings.url);\n          module.verbose('Using AJAX settings', ajaxSettings);\n\n          if(settings.cache === 'local' && module.read.cachedResponse(url)) {\n            module.debug('Response returned from local cache');\n            module.request = module.create.request();\n            module.request.resolveWith(context, [ module.read.cachedResponse(url) ]);\n            return;\n          }\n\n          if( !settings.throttle ) {\n            module.debug('Sending request', data, ajaxSettings.method);\n            module.send.request();\n          }\n          else {\n            if(!settings.throttleFirstRequest && !module.timer) {\n              module.debug('Sending request', data, ajaxSettings.method);\n              module.send.request();\n              module.timer = setTimeout(function(){}, settings.throttle);\n            }\n            else {\n              module.debug('Throttling request', settings.throttle);\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                if(module.timer) {\n                  delete module.timer;\n                }\n                module.debug('Sending throttled request', data, ajaxSettings.method);\n                module.send.request();\n              }, settings.throttle);\n            }\n          }\n\n        },\n\n        should: {\n          removeError: function() {\n            return ( settings.hideError === true || (settings.hideError === 'auto' && !module.is.form()) );\n          }\n        },\n\n        is: {\n          disabled: function() {\n            return ($module.filter(selector.disabled).length > 0);\n          },\n          form: function() {\n            return $module.is('form') || $context.is('form');\n          },\n          mocked: function() {\n            return (settings.mockResponse || settings.mockResponseAsync || settings.response || settings.responseAsync);\n          },\n          input: function() {\n            return $module.is('input');\n          },\n          loading: function() {\n            return (module.request && module.request.state() == 'pending');\n          },\n          abortedRequest: function(xhr) {\n            if(xhr && xhr.readyState !== undefined && xhr.readyState === 0) {\n              module.verbose('XHR request determined to be aborted');\n              return true;\n            }\n            else {\n              module.verbose('XHR request was not aborted');\n              return false;\n            }\n          },\n          validResponse: function(response) {\n            if( (settings.dataType !== 'json' && settings.dataType !== 'jsonp') || !$.isFunction(settings.successTest) ) {\n              module.verbose('Response is not JSON, skipping validation', settings.successTest, response);\n              return true;\n            }\n            module.debug('Checking JSON returned success', settings.successTest, response);\n            if( settings.successTest(response) ) {\n              module.debug('Response passed success test', response);\n              return true;\n            }\n            else {\n              module.debug('Response failed success test', response);\n              return false;\n            }\n          }\n        },\n\n        was: {\n          cancelled: function() {\n            return (module.cancelled || false);\n          },\n          succesful: function() {\n            return (module.request && module.request.state() == 'resolved');\n          },\n          failure: function() {\n            return (module.request && module.request.state() == 'rejected');\n          },\n          complete: function() {\n            return (module.request && (module.request.state() == 'resolved' || module.request.state() == 'rejected') );\n          }\n        },\n\n        add: {\n          urlData: function(url, urlData) {\n            var\n              requiredVariables,\n              optionalVariables\n            ;\n            if(url) {\n              requiredVariables = url.match(settings.regExp.required);\n              optionalVariables = url.match(settings.regExp.optional);\n              urlData           = urlData || settings.urlData;\n              if(requiredVariables) {\n                module.debug('Looking for required URL variables', requiredVariables);\n                $.each(requiredVariables, function(index, templatedString) {\n                  var\n                    // allow legacy {$var} style\n                    variable = (templatedString.indexOf('$') !== -1)\n                      ? templatedString.substr(2, templatedString.length - 3)\n                      : templatedString.substr(1, templatedString.length - 2),\n                    value   = ($.isPlainObject(urlData) && urlData[variable] !== undefined)\n                      ? urlData[variable]\n                      : ($module.data(variable) !== undefined)\n                        ? $module.data(variable)\n                        : ($context.data(variable) !== undefined)\n                          ? $context.data(variable)\n                          : urlData[variable]\n                  ;\n                  // remove value\n                  if(value === undefined) {\n                    module.error(error.requiredParameter, variable, url);\n                    url = false;\n                    return false;\n                  }\n                  else {\n                    module.verbose('Found required variable', variable, value);\n                    value = (settings.encodeParameters)\n                      ? module.get.urlEncodedValue(value)\n                      : value\n                    ;\n                    url = url.replace(templatedString, value);\n                  }\n                });\n              }\n              if(optionalVariables) {\n                module.debug('Looking for optional URL variables', requiredVariables);\n                $.each(optionalVariables, function(index, templatedString) {\n                  var\n                    // allow legacy {/$var} style\n                    variable = (templatedString.indexOf('$') !== -1)\n                      ? templatedString.substr(3, templatedString.length - 4)\n                      : templatedString.substr(2, templatedString.length - 3),\n                    value   = ($.isPlainObject(urlData) && urlData[variable] !== undefined)\n                      ? urlData[variable]\n                      : ($module.data(variable) !== undefined)\n                        ? $module.data(variable)\n                        : ($context.data(variable) !== undefined)\n                          ? $context.data(variable)\n                          : urlData[variable]\n                  ;\n                  // optional replacement\n                  if(value !== undefined) {\n                    module.verbose('Optional variable Found', variable, value);\n                    url = url.replace(templatedString, value);\n                  }\n                  else {\n                    module.verbose('Optional variable not found', variable);\n                    // remove preceding slash if set\n                    if(url.indexOf('/' + templatedString) !== -1) {\n                      url = url.replace('/' + templatedString, '');\n                    }\n                    else {\n                      url = url.replace(templatedString, '');\n                    }\n                  }\n                });\n              }\n            }\n            return url;\n          },\n          formData: function(data) {\n            var\n              canSerialize = ($.fn.serializeObject !== undefined),\n              formData     = (canSerialize)\n                ? $form.serializeObject()\n                : $form.serialize(),\n              hasOtherData\n            ;\n            data         = data || settings.data;\n            hasOtherData = $.isPlainObject(data);\n\n            if(hasOtherData) {\n              if(canSerialize) {\n                module.debug('Extending existing data with form data', data, formData);\n                data = $.extend(true, {}, data, formData);\n              }\n              else {\n                module.error(error.missingSerialize);\n                module.debug('Cant extend data. Replacing data with form data', data, formData);\n                data = formData;\n              }\n            }\n            else {\n              module.debug('Adding form data', formData);\n              data = formData;\n            }\n            return data;\n          }\n        },\n\n        send: {\n          request: function() {\n            module.set.loading();\n            module.request = module.create.request();\n            if( module.is.mocked() ) {\n              module.mockedXHR = module.create.mockedXHR();\n            }\n            else {\n              module.xhr = module.create.xhr();\n            }\n            settings.onRequest.call(context, module.request, module.xhr);\n          }\n        },\n\n        event: {\n          trigger: function(event) {\n            module.query();\n            if(event.type == 'submit' || event.type == 'click') {\n              event.preventDefault();\n            }\n          },\n          xhr: {\n            always: function() {\n              // nothing special\n            },\n            done: function(response, textStatus, xhr) {\n              var\n                context            = this,\n                elapsedTime        = (new Date().getTime() - requestStartTime),\n                timeLeft           = (settings.loadingDuration - elapsedTime),\n                translatedResponse = ( $.isFunction(settings.onResponse) )\n                  ? settings.onResponse.call(context, $.extend(true, {}, response))\n                  : false\n              ;\n              timeLeft = (timeLeft > 0)\n                ? timeLeft\n                : 0\n              ;\n              if(translatedResponse) {\n                module.debug('Modified API response in onResponse callback', settings.onResponse, translatedResponse, response);\n                response = translatedResponse;\n              }\n              if(timeLeft > 0) {\n                module.debug('Response completed early delaying state change by', timeLeft);\n              }\n              setTimeout(function() {\n                if( module.is.validResponse(response) ) {\n                  module.request.resolveWith(context, [response, xhr]);\n                }\n                else {\n                  module.request.rejectWith(context, [xhr, 'invalid']);\n                }\n              }, timeLeft);\n            },\n            fail: function(xhr, status, httpMessage) {\n              var\n                context     = this,\n                elapsedTime = (new Date().getTime() - requestStartTime),\n                timeLeft    = (settings.loadingDuration - elapsedTime)\n              ;\n              timeLeft = (timeLeft > 0)\n                ? timeLeft\n                : 0\n              ;\n              if(timeLeft > 0) {\n                module.debug('Response completed early delaying state change by', timeLeft);\n              }\n              setTimeout(function() {\n                if( module.is.abortedRequest(xhr) ) {\n                  module.request.rejectWith(context, [xhr, 'aborted', httpMessage]);\n                }\n                else {\n                  module.request.rejectWith(context, [xhr, 'error', status, httpMessage]);\n                }\n              }, timeLeft);\n            }\n          },\n          request: {\n            done: function(response, xhr) {\n              module.debug('Successful API Response', response);\n              if(settings.cache === 'local' && url) {\n                module.write.cachedResponse(url, response);\n                module.debug('Saving server response locally', module.cache);\n              }\n              settings.onSuccess.call(context, response, $module, xhr);\n            },\n            complete: function(firstParameter, secondParameter) {\n              var\n                xhr,\n                response\n              ;\n              // have to guess callback parameters based on request success\n              if( module.was.succesful() ) {\n                response = firstParameter;\n                xhr      = secondParameter;\n              }\n              else {\n                xhr      = firstParameter;\n                response = module.get.responseFromXHR(xhr);\n              }\n              module.remove.loading();\n              settings.onComplete.call(context, response, $module, xhr);\n            },\n            fail: function(xhr, status, httpMessage) {\n              var\n                // pull response from xhr if available\n                response     = module.get.responseFromXHR(xhr),\n                errorMessage = module.get.errorFromRequest(response, status, httpMessage)\n              ;\n              if(status == 'aborted') {\n                module.debug('XHR Aborted (Most likely caused by page navigation or CORS Policy)', status, httpMessage);\n                settings.onAbort.call(context, status, $module, xhr);\n              }\n              else if(status == 'invalid') {\n                module.debug('JSON did not pass success test. A server-side error has most likely occurred', response);\n              }\n              else if(status == 'error')  {\n                if(xhr !== undefined) {\n                  module.debug('XHR produced a server error', status, httpMessage);\n                  // make sure we have an error to display to console\n                  if( xhr.status != 200 && httpMessage !== undefined && httpMessage !== '') {\n                    module.error(error.statusMessage + httpMessage, ajaxSettings.url);\n                  }\n                  settings.onError.call(context, errorMessage, $module, xhr);\n                }\n              }\n\n              if(settings.errorDuration && status !== 'aborted') {\n                module.debug('Adding error state');\n                module.set.error();\n                if( module.should.removeError() ) {\n                  setTimeout(module.remove.error, settings.errorDuration);\n                }\n              }\n              module.debug('API Request failed', errorMessage, xhr);\n              settings.onFailure.call(context, response, $module, xhr);\n            }\n          }\n        },\n\n        create: {\n\n          request: function() {\n            // api request promise\n            return $.Deferred()\n              .always(module.event.request.complete)\n              .done(module.event.request.done)\n              .fail(module.event.request.fail)\n            ;\n          },\n\n          mockedXHR: function () {\n            var\n              // xhr does not simulate these properties of xhr but must return them\n              textStatus     = false,\n              status         = false,\n              httpMessage    = false,\n              responder      = settings.mockResponse      || settings.response,\n              asyncResponder = settings.mockResponseAsync || settings.responseAsync,\n              asyncCallback,\n              response,\n              mockedXHR\n            ;\n\n            mockedXHR = $.Deferred()\n              .always(module.event.xhr.complete)\n              .done(module.event.xhr.done)\n              .fail(module.event.xhr.fail)\n            ;\n\n            if(responder) {\n              if( $.isFunction(responder) ) {\n                module.debug('Using specified synchronous callback', responder);\n                response = responder.call(context, requestSettings);\n              }\n              else {\n                module.debug('Using settings specified response', responder);\n                response = responder;\n              }\n              // simulating response\n              mockedXHR.resolveWith(context, [ response, textStatus, { responseText: response }]);\n            }\n            else if( $.isFunction(asyncResponder) ) {\n              asyncCallback = function(response) {\n                module.debug('Async callback returned response', response);\n\n                if(response) {\n                  mockedXHR.resolveWith(context, [ response, textStatus, { responseText: response }]);\n                }\n                else {\n                  mockedXHR.rejectWith(context, [{ responseText: response }, status, httpMessage]);\n                }\n              };\n              module.debug('Using specified async response callback', asyncResponder);\n              asyncResponder.call(context, requestSettings, asyncCallback);\n            }\n            return mockedXHR;\n          },\n\n          xhr: function() {\n            var\n              xhr\n            ;\n            // ajax request promise\n            xhr = $.ajax(ajaxSettings)\n              .always(module.event.xhr.always)\n              .done(module.event.xhr.done)\n              .fail(module.event.xhr.fail)\n            ;\n            module.verbose('Created server request', xhr);\n            return xhr;\n          }\n        },\n\n        set: {\n          error: function() {\n            module.verbose('Adding error state to element', $context);\n            $context.addClass(className.error);\n          },\n          loading: function() {\n            module.verbose('Adding loading state to element', $context);\n            $context.addClass(className.loading);\n            requestStartTime = new Date().getTime();\n          }\n        },\n\n        remove: {\n          error: function() {\n            module.verbose('Removing error state from element', $context);\n            $context.removeClass(className.error);\n          },\n          loading: function() {\n            module.verbose('Removing loading state from element', $context);\n            $context.removeClass(className.loading);\n          }\n        },\n\n        get: {\n          responseFromXHR: function(xhr) {\n            return $.isPlainObject(xhr)\n              ? (settings.dataType == 'json' || settings.dataType == 'jsonp')\n                ? module.decode.json(xhr.responseText)\n                : xhr.responseText\n              : false\n            ;\n          },\n          errorFromRequest: function(response, status, httpMessage) {\n            return ($.isPlainObject(response) && response.error !== undefined)\n              ? response.error // use json error message\n              : (settings.error[status] !== undefined) // use server error message\n                ? settings.error[status]\n                : httpMessage\n            ;\n          },\n          request: function() {\n            return module.request || false;\n          },\n          xhr: function() {\n            return module.xhr || false;\n          },\n          settings: function() {\n            var\n              runSettings\n            ;\n            runSettings = settings.beforeSend.call(context, settings);\n            if(runSettings) {\n              if(runSettings.success !== undefined) {\n                module.debug('Legacy success callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.success);\n                runSettings.onSuccess = runSettings.success;\n              }\n              if(runSettings.failure !== undefined) {\n                module.debug('Legacy failure callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.failure);\n                runSettings.onFailure = runSettings.failure;\n              }\n              if(runSettings.complete !== undefined) {\n                module.debug('Legacy complete callback detected', runSettings);\n                module.error(error.legacyParameters, runSettings.complete);\n                runSettings.onComplete = runSettings.complete;\n              }\n            }\n            if(runSettings === undefined) {\n              module.error(error.noReturnedValue);\n            }\n            return (runSettings !== undefined)\n              ? $.extend(true, {}, runSettings)\n              : $.extend(true, {}, settings)\n            ;\n          },\n          urlEncodedValue: function(value) {\n            var\n              decodedValue   = window.decodeURIComponent(value),\n              encodedValue   = window.encodeURIComponent(value),\n              alreadyEncoded = (decodedValue !== value)\n            ;\n            if(alreadyEncoded) {\n              module.debug('URL value is already encoded, avoiding double encoding', value);\n              return value;\n            }\n            module.verbose('Encoding value using encodeURIComponent', value, encodedValue);\n            return encodedValue;\n          },\n          defaultData: function() {\n            var\n              data = {}\n            ;\n            if( !$.isWindow(element) ) {\n              if( module.is.input() ) {\n                data.value = $module.val();\n              }\n              else if( !module.is.form() ) {\n\n              }\n              else {\n                data.text = $module.text();\n              }\n            }\n            return data;\n          },\n          event: function() {\n            if( $.isWindow(element) || settings.on == 'now' ) {\n              module.debug('API called without element, no events attached');\n              return false;\n            }\n            else if(settings.on == 'auto') {\n              if( $module.is('input') ) {\n                return (element.oninput !== undefined)\n                  ? 'input'\n                  : (element.onpropertychange !== undefined)\n                    ? 'propertychange'\n                    : 'keyup'\n                ;\n              }\n              else if( $module.is('form') ) {\n                return 'submit';\n              }\n              else {\n                return 'click';\n              }\n            }\n            else {\n              return settings.on;\n            }\n          },\n          templatedURL: function(action) {\n            action = action || $module.data(metadata.action) || settings.action || false;\n            url    = $module.data(metadata.url) || settings.url || false;\n            if(url) {\n              module.debug('Using specified url', url);\n              return url;\n            }\n            if(action) {\n              module.debug('Looking up url for action', action, settings.api);\n              if(settings.api[action] === undefined && !module.is.mocked()) {\n                module.error(error.missingAction, settings.action, settings.api);\n                return;\n              }\n              url = settings.api[action];\n            }\n            else if( module.is.form() ) {\n              url = $module.attr('action') || $context.attr('action') || false;\n              module.debug('No url or action specified, defaulting to form action', url);\n            }\n            return url;\n          }\n        },\n\n        abort: function() {\n          var\n            xhr = module.get.xhr()\n          ;\n          if( xhr && xhr.state() !== 'resolved') {\n            module.debug('Cancelling API request');\n            xhr.abort();\n          }\n        },\n\n        // reset state\n        reset: function() {\n          module.remove.error();\n          module.remove.loading();\n        },\n\n        setting: function(name, value) {\n          module.debug('Changing setting', name, value);\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                //'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.api.settings = {\n\n  name              : 'API',\n  namespace         : 'api',\n\n  debug             : false,\n  verbose           : false,\n  performance       : true,\n\n  // object containing all templates endpoints\n  api               : {},\n\n  // whether to cache responses\n  cache             : true,\n\n  // whether new requests should abort previous requests\n  interruptRequests : true,\n\n  // event binding\n  on                : 'auto',\n\n  // context for applying state classes\n  stateContext      : false,\n\n  // duration for loading state\n  loadingDuration   : 0,\n\n  // whether to hide errors after a period of time\n  hideError         : 'auto',\n\n  // duration for error state\n  errorDuration     : 2000,\n\n  // whether parameters should be encoded with encodeURIComponent\n  encodeParameters  : true,\n\n  // API action to use\n  action            : false,\n\n  // templated URL to use\n  url               : false,\n\n  // base URL to apply to all endpoints\n  base              : '',\n\n  // data that will\n  urlData           : {},\n\n  // whether to add default data to url data\n  defaultData          : true,\n\n  // whether to serialize closest form\n  serializeForm        : false,\n\n  // how long to wait before request should occur\n  throttle             : 0,\n\n  // whether to throttle first request or only repeated\n  throttleFirstRequest : true,\n\n  // standard ajax settings\n  method            : 'get',\n  data              : {},\n  dataType          : 'json',\n\n  // mock response\n  mockResponse      : false,\n  mockResponseAsync : false,\n\n  // aliases for mock\n  response          : false,\n  responseAsync     : false,\n\n  // callbacks before request\n  beforeSend  : function(settings) { return settings; },\n  beforeXHR   : function(xhr) {},\n  onRequest   : function(promise, xhr) {},\n\n  // after request\n  onResponse  : false, // function(response) { },\n\n  // response was successful, if JSON passed validation\n  onSuccess   : function(response, $module) {},\n\n  // request finished without aborting\n  onComplete  : function(response, $module) {},\n\n  // failed JSON success test\n  onFailure   : function(response, $module) {},\n\n  // server error\n  onError     : function(errorMessage, $module) {},\n\n  // request aborted\n  onAbort     : function(errorMessage, $module) {},\n\n  successTest : false,\n\n  // errors\n  error : {\n    beforeSend        : 'The before send function has aborted the request',\n    error             : 'There was an error with your request',\n    exitConditions    : 'API Request Aborted. Exit conditions met',\n    JSONParse         : 'JSON could not be parsed during error handling',\n    legacyParameters  : 'You are using legacy API success callback names',\n    method            : 'The method you called is not defined',\n    missingAction     : 'API action used but no url was defined',\n    missingSerialize  : 'jquery-serialize-object is required to add form data to an existing data object',\n    missingURL        : 'No URL specified for api event',\n    noReturnedValue   : 'The beforeSend callback must return a settings object, beforeSend ignored.',\n    noStorage         : 'Caching responses locally requires session storage',\n    parseError        : 'There was an error parsing your request',\n    requiredParameter : 'Missing a required URL parameter: ',\n    statusMessage     : 'Server gave an error: ',\n    timeout           : 'Your request timed out'\n  },\n\n  regExp  : {\n    required : /\\{\\$*[A-z0-9]+\\}/g,\n    optional : /\\{\\/\\$*[A-z0-9]+\\}/g,\n  },\n\n  className: {\n    loading : 'loading',\n    error   : 'error'\n  },\n\n  selector: {\n    disabled : '.disabled',\n    form      : 'form'\n  },\n\n  metadata: {\n    action  : 'action',\n    url     : 'url'\n  }\n};\n\n\n\n})( jQuery, window, document );\n"]},"sourceType":"script","hash":"6520453b870c0f8fcc6e9fb87a0bba6dab134542"}
