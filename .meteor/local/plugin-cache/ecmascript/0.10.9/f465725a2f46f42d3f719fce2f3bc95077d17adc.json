{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"client/lib/definitions/behaviors/form.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/lib/definitions/behaviors/form.js","filename":"client/lib/definitions/behaviors/form.js","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/martijn/Documents/GitHub/QRSMeteor","root":"/home/martijn/Documents/GitHub/QRSMeteor","generatorOpts":{"filename":"client/lib/definitions/behaviors/form.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/definitions/behaviors/form.js"}},"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n\n/*!\n * # Semantic UI - Form Validation\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  $.fn.form = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        legacyParameters = arguments[1],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function () {\n      var $module = $(this),\n          element = this,\n          formErrors = [],\n          keyHeldDown = false,\n          // set at run-time\n      $field,\n          $group,\n          $message,\n          $prompt,\n          $submit,\n          $clear,\n          $reset,\n          settings,\n          validation,\n          metadata,\n          selector,\n          className,\n          error,\n          namespace,\n          moduleNamespace,\n          eventNamespace,\n          instance,\n          module;\n      module = {\n        initialize: function () {\n          // settings grabbed at run time\n          module.get.settings();\n\n          if (methodInvoked) {\n            if (instance === undefined) {\n              module.instantiate();\n            }\n\n            module.invoke(query);\n          } else {\n            module.verbose('Initializing form validation', $module, settings);\n            module.bindEvents();\n            module.set.defaults();\n            module.instantiate();\n          }\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying previous module', instance);\n          module.removeEvents();\n          $module.removeData(moduleNamespace);\n        },\n        refresh: function () {\n          module.verbose('Refreshing selector cache');\n          $field = $module.find(selector.field);\n          $group = $module.find(selector.group);\n          $message = $module.find(selector.message);\n          $prompt = $module.find(selector.prompt);\n          $submit = $module.find(selector.submit);\n          $clear = $module.find(selector.clear);\n          $reset = $module.find(selector.reset);\n        },\n        submit: function () {\n          module.verbose('Submitting form', $module);\n          $module.submit();\n        },\n        attachEvents: function (selector, action) {\n          action = action || 'submit';\n          $(selector).on('click' + eventNamespace, function (event) {\n            module[action]();\n            event.preventDefault();\n          });\n        },\n        bindEvents: function () {\n          module.verbose('Attaching form events');\n          $module.on('submit' + eventNamespace, module.validate.form).on('blur' + eventNamespace, selector.field, module.event.field.blur).on('click' + eventNamespace, selector.submit, module.submit).on('click' + eventNamespace, selector.reset, module.reset).on('click' + eventNamespace, selector.clear, module.clear);\n\n          if (settings.keyboardShortcuts) {\n            $module.on('keydown' + eventNamespace, selector.field, module.event.field.keydown);\n          }\n\n          $field.each(function () {\n            var $input = $(this),\n                type = $input.prop('type'),\n                inputEvent = module.get.changeEvent(type, $input);\n            $(this).on(inputEvent + eventNamespace, module.event.field.change);\n          });\n        },\n        clear: function () {\n          $field.each(function () {\n            var $field = $(this),\n                $element = $field.parent(),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue) || '',\n                isCheckbox = $element.is(selector.uiCheckbox),\n                isDropdown = $element.is(selector.uiDropdown),\n                isErrored = $fieldGroup.hasClass(className.error);\n\n            if (isErrored) {\n              module.verbose('Resetting error on field', $fieldGroup);\n              $fieldGroup.removeClass(className.error);\n              $prompt.remove();\n            }\n\n            if (isDropdown) {\n              module.verbose('Resetting dropdown value', $element, defaultValue);\n              $element.dropdown('clear');\n            } else if (isCheckbox) {\n              $field.prop('checked', false);\n            } else {\n              module.verbose('Resetting field value', $field, defaultValue);\n              $field.val('');\n            }\n          });\n        },\n        reset: function () {\n          $field.each(function () {\n            var $field = $(this),\n                $element = $field.parent(),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue),\n                isCheckbox = $element.is(selector.uiCheckbox),\n                isDropdown = $element.is(selector.uiDropdown),\n                isErrored = $fieldGroup.hasClass(className.error);\n\n            if (defaultValue === undefined) {\n              return;\n            }\n\n            if (isErrored) {\n              module.verbose('Resetting error on field', $fieldGroup);\n              $fieldGroup.removeClass(className.error);\n              $prompt.remove();\n            }\n\n            if (isDropdown) {\n              module.verbose('Resetting dropdown value', $element, defaultValue);\n              $element.dropdown('restore defaults');\n            } else if (isCheckbox) {\n              module.verbose('Resetting checkbox value', $element, defaultValue);\n              $field.prop('checked', defaultValue);\n            } else {\n              module.verbose('Resetting field value', $field, defaultValue);\n              $field.val(defaultValue);\n            }\n          });\n        },\n        is: {\n          bracketedRule: function (rule) {\n            return rule.type && rule.type.match(settings.regExp.bracket);\n          },\n          valid: function () {\n            var allValid = true;\n            module.verbose('Checking if form is valid');\n            $.each(validation, function (fieldName, field) {\n              if (!module.validate.field(field, fieldName)) {\n                allValid = false;\n              }\n            });\n            return allValid;\n          }\n        },\n        removeEvents: function () {\n          $module.off(eventNamespace);\n          $field.off(eventNamespace);\n          $submit.off(eventNamespace);\n          $field.off(eventNamespace);\n        },\n        event: {\n          field: {\n            keydown: function (event) {\n              var $field = $(this),\n                  key = event.which,\n                  keyCode = {\n                enter: 13,\n                escape: 27\n              };\n\n              if (key == keyCode.escape) {\n                module.verbose('Escape key pressed blurring field');\n                $field.blur();\n              }\n\n              if (!event.ctrlKey && key == keyCode.enter && $field.is(selector.input) && $field.not(selector.checkbox).length > 0) {\n                if (!keyHeldDown) {\n                  $field.one('keyup' + eventNamespace, module.event.field.keyup);\n                  module.submit();\n                  module.debug('Enter pressed on input submitting form');\n                }\n\n                keyHeldDown = true;\n              }\n            },\n            keyup: function () {\n              keyHeldDown = false;\n            },\n            blur: function (event) {\n              var $field = $(this),\n                  $fieldGroup = $field.closest($group),\n                  validationRules = module.get.validation($field);\n\n              if ($fieldGroup.hasClass(className.error)) {\n                module.debug('Revalidating field', $field, validationRules);\n                module.validate.form.call(module, event, true);\n              } else if (settings.on == 'blur' || settings.on == 'change') {\n                if (validationRules) {\n                  module.validate.field(validationRules);\n                }\n              }\n            },\n            change: function (event) {\n              var $field = $(this),\n                  $fieldGroup = $field.closest($group);\n\n              if (settings.on == 'change' || $fieldGroup.hasClass(className.error) && settings.revalidate) {\n                clearTimeout(module.timer);\n                module.timer = setTimeout(function () {\n                  module.debug('Revalidating field', $field, module.get.validation($field));\n                  module.validate.form.call(module, event, true);\n                }, settings.delay);\n              }\n            }\n          }\n        },\n        get: {\n          ancillaryValue: function (rule) {\n            if (!rule.type || !module.is.bracketedRule(rule)) {\n              return false;\n            }\n\n            return rule.type.match(settings.regExp.bracket)[1] + '';\n          },\n          ruleName: function (rule) {\n            if (module.is.bracketedRule(rule)) {\n              return rule.type.replace(rule.type.match(settings.regExp.bracket)[0], '');\n            }\n\n            return rule.type;\n          },\n          changeEvent: function (type, $input) {\n            if (type == 'checkbox' || type == 'radio' || type == 'hidden' || $input.is('select')) {\n              return 'change';\n            } else {\n              return module.get.inputEvent();\n            }\n          },\n          inputEvent: function () {\n            return document.createElement('input').oninput !== undefined ? 'input' : document.createElement('input').onpropertychange !== undefined ? 'propertychange' : 'keyup';\n          },\n          prompt: function (rule, field) {\n            var ruleName = module.get.ruleName(rule),\n                ancillary = module.get.ancillaryValue(rule),\n                prompt = rule.prompt || settings.prompt[ruleName] || settings.text.unspecifiedRule,\n                requiresValue = prompt.search('{value}') !== -1,\n                requiresName = prompt.search('{name}') !== -1,\n                $label,\n                $field,\n                name;\n\n            if (requiresName || requiresValue) {\n              $field = module.get.field(field.identifier);\n            }\n\n            if (requiresValue) {\n              prompt = prompt.replace('{value}', $field.val());\n            }\n\n            if (requiresName) {\n              $label = $field.closest(selector.group).find('label').eq(0);\n              name = $label.size() == 1 ? $label.text() : $field.prop('placeholder') || settings.text.unspecifiedField;\n              prompt = prompt.replace('{name}', name);\n            }\n\n            prompt = prompt.replace('{identifier}', field.identifier);\n            prompt = prompt.replace('{ruleValue}', ancillary);\n\n            if (!rule.prompt) {\n              module.verbose('Using default validation prompt for type', prompt, ruleName);\n            }\n\n            return prompt;\n          },\n          settings: function () {\n            if ($.isPlainObject(parameters)) {\n              var keys = Object.keys(parameters),\n                  isLegacySettings = keys.length > 0 ? parameters[keys[0]].identifier !== undefined && parameters[keys[0]].rules !== undefined : false,\n                  ruleKeys;\n\n              if (isLegacySettings) {\n                // 1.x (ducktyped)\n                settings = $.extend(true, {}, $.fn.form.settings, legacyParameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, parameters);\n                module.error(settings.error.oldSyntax, element);\n                module.verbose('Extending settings from legacy parameters', validation, settings);\n              } else {\n                // 2.x\n                if (parameters.fields) {\n                  ruleKeys = Object.keys(parameters.fields);\n\n                  if (typeof parameters.fields[ruleKeys[0]] == 'string' || $.isArray(parameters.fields[ruleKeys[0]])) {\n                    $.each(parameters.fields, function (name, rules) {\n                      if (typeof rules == 'string') {\n                        rules = [rules];\n                      }\n\n                      parameters.fields[name] = {\n                        rules: []\n                      };\n                      $.each(rules, function (index, rule) {\n                        parameters.fields[name].rules.push({\n                          type: rule\n                        });\n                      });\n                    });\n                  }\n                }\n\n                settings = $.extend(true, {}, $.fn.form.settings, parameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, settings.fields);\n                module.verbose('Extending settings', validation, settings);\n              }\n            } else {\n              settings = $.fn.form.settings;\n              validation = $.fn.form.settings.defaults;\n              module.verbose('Using default form validation', validation, settings);\n            } // shorthand\n\n\n            namespace = settings.namespace;\n            metadata = settings.metadata;\n            selector = settings.selector;\n            className = settings.className;\n            error = settings.error;\n            moduleNamespace = 'module-' + namespace;\n            eventNamespace = '.' + namespace; // grab instance\n\n            instance = $module.data(moduleNamespace); // refresh selector cache\n\n            module.refresh();\n          },\n          field: function (identifier) {\n            module.verbose('Finding field with identifier', identifier);\n\n            if ($field.filter('#' + identifier).length > 0) {\n              return $field.filter('#' + identifier);\n            } else if ($field.filter('[name=\"' + identifier + '\"]').length > 0) {\n              return $field.filter('[name=\"' + identifier + '\"]');\n            } else if ($field.filter('[name=\"' + identifier + '[]\"]').length > 0) {\n              return $field.filter('[name=\"' + identifier + '[]\"]');\n            } else if ($field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]').length > 0) {\n              return $field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]');\n            }\n\n            return $('<input/>');\n          },\n          fields: function (fields) {\n            var $fields = $();\n            $.each(fields, function (index, name) {\n              $fields = $fields.add(module.get.field(name));\n            });\n            return $fields;\n          },\n          validation: function ($field) {\n            var fieldValidation, identifier;\n\n            if (!validation) {\n              return false;\n            }\n\n            $.each(validation, function (fieldName, field) {\n              identifier = field.identifier || fieldName;\n\n              if (module.get.field(identifier)[0] == $field[0]) {\n                field.identifier = identifier;\n                fieldValidation = field;\n              }\n            });\n            return fieldValidation || false;\n          },\n          value: function (field) {\n            var fields = [],\n                results;\n            fields.push(field);\n            results = module.get.values.call(element, fields);\n            return results[field];\n          },\n          values: function (fields) {\n            var $fields = $.isArray(fields) ? module.get.fields(fields) : $field,\n                values = {};\n            $fields.each(function (index, field) {\n              var $field = $(field),\n                  type = $field.prop('type'),\n                  name = $field.prop('name'),\n                  value = $field.val(),\n                  isCheckbox = $field.is(selector.checkbox),\n                  isRadio = $field.is(selector.radio),\n                  isMultiple = name.indexOf('[]') !== -1,\n                  isChecked = isCheckbox ? $field.is(':checked') : false;\n\n              if (name) {\n                if (isMultiple) {\n                  name = name.replace('[]', '');\n\n                  if (!values[name]) {\n                    values[name] = [];\n                  }\n\n                  if (isCheckbox) {\n                    if (isChecked) {\n                      values[name].push(value || true);\n                    } else {\n                      values[name].push(false);\n                    }\n                  } else {\n                    values[name].push(value);\n                  }\n                } else {\n                  if (isRadio) {\n                    if (isChecked) {\n                      values[name] = value;\n                    }\n                  } else if (isCheckbox) {\n                    if (isChecked) {\n                      values[name] = value || true;\n                    } else {\n                      values[name] = false;\n                    }\n                  } else {\n                    values[name] = value;\n                  }\n                }\n              }\n            });\n            return values;\n          }\n        },\n        has: {\n          field: function (identifier) {\n            module.verbose('Checking for existence of a field with identifier', identifier);\n\n            if (typeof identifier !== 'string') {\n              module.error(error.identifier, identifier);\n            }\n\n            if ($field.filter('#' + identifier).length > 0) {\n              return true;\n            } else if ($field.filter('[name=\"' + identifier + '\"]').length > 0) {\n              return true;\n            } else if ($field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]').length > 0) {\n              return true;\n            }\n\n            return false;\n          }\n        },\n        add: {\n          prompt: function (identifier, errors) {\n            var $field = module.get.field(identifier),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.children(selector.prompt),\n                promptExists = $prompt.length !== 0;\n            errors = typeof errors == 'string' ? [errors] : errors;\n            module.verbose('Adding field error state', identifier);\n            $fieldGroup.addClass(className.error);\n\n            if (settings.inline) {\n              if (!promptExists) {\n                $prompt = settings.templates.prompt(errors);\n                $prompt.appendTo($fieldGroup);\n              }\n\n              $prompt.html(errors[0]);\n\n              if (!promptExists) {\n                if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                  module.verbose('Displaying error with css transition', settings.transition);\n                  $prompt.transition(settings.transition + ' in', settings.duration);\n                } else {\n                  module.verbose('Displaying error with fallback javascript animation');\n                  $prompt.fadeIn(settings.duration);\n                }\n              } else {\n                module.verbose('Inline errors are disabled, no inline error added', identifier);\n              }\n            }\n          },\n          errors: function (errors) {\n            module.debug('Adding form error messages', errors);\n            module.set.error();\n            $message.html(settings.templates.error(errors));\n          }\n        },\n        remove: {\n          prompt: function (identifier) {\n            var $field = module.get.field(identifier),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.children(selector.prompt);\n            $fieldGroup.removeClass(className.error);\n\n            if (settings.inline && $prompt.is(':visible')) {\n              module.verbose('Removing prompt for field', identifier);\n\n              if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                $prompt.transition(settings.transition + ' out', settings.duration, function () {\n                  $prompt.remove();\n                });\n              } else {\n                $prompt.fadeOut(settings.duration, function () {\n                  $prompt.remove();\n                });\n              }\n            }\n          }\n        },\n        set: {\n          success: function () {\n            $module.removeClass(className.error).addClass(className.success);\n          },\n          defaults: function () {\n            $field.each(function () {\n              var $field = $(this),\n                  isCheckbox = $field.filter(selector.checkbox).length > 0,\n                  value = isCheckbox ? $field.is(':checked') : $field.val();\n              $field.data(metadata.defaultValue, value);\n            });\n          },\n          error: function () {\n            $module.removeClass(className.success).addClass(className.error);\n          },\n          value: function (field, value) {\n            var fields = {};\n            fields[field] = value;\n            return module.set.values.call(element, fields);\n          },\n          values: function (fields) {\n            if ($.isEmptyObject(fields)) {\n              return;\n            }\n\n            $.each(fields, function (key, value) {\n              var $field = module.get.field(key),\n                  $element = $field.parent(),\n                  isMultiple = $.isArray(value),\n                  isCheckbox = $element.is(selector.uiCheckbox),\n                  isDropdown = $element.is(selector.uiDropdown),\n                  isRadio = $field.is(selector.radio) && isCheckbox,\n                  fieldExists = $field.length > 0,\n                  $multipleField;\n\n              if (fieldExists) {\n                if (isMultiple && isCheckbox) {\n                  module.verbose('Selecting multiple', value, $field);\n                  $element.checkbox('uncheck');\n                  $.each(value, function (index, value) {\n                    $multipleField = $field.filter('[value=\"' + value + '\"]');\n                    $element = $multipleField.parent();\n\n                    if ($multipleField.length > 0) {\n                      $element.checkbox('check');\n                    }\n                  });\n                } else if (isRadio) {\n                  module.verbose('Selecting radio value', value, $field);\n                  $field.filter('[value=\"' + value + '\"]').parent(selector.uiCheckbox).checkbox('check');\n                } else if (isCheckbox) {\n                  module.verbose('Setting checkbox value', value, $element);\n\n                  if (value === true) {\n                    $element.checkbox('check');\n                  } else {\n                    $element.checkbox('uncheck');\n                  }\n                } else if (isDropdown) {\n                  module.verbose('Setting dropdown value', value, $element);\n                  $element.dropdown('set selected', value);\n                } else {\n                  module.verbose('Setting field value', value, $field);\n                  $field.val(value);\n                }\n              }\n            });\n          }\n        },\n        validate: {\n          form: function (event, ignoreCallbacks) {\n            var values = module.get.values(),\n                apiRequest; // input keydown event will fire submit repeatedly by browser default\n\n            if (keyHeldDown) {\n              return false;\n            } // reset errors\n\n\n            formErrors = [];\n\n            if (module.is.valid()) {\n              module.debug('Form has no validation errors, submitting');\n              module.set.success();\n\n              if (ignoreCallbacks !== true) {\n                return settings.onSuccess.call(element, event, values);\n              }\n            } else {\n              module.debug('Form has errors');\n              module.set.error();\n\n              if (!settings.inline) {\n                module.add.errors(formErrors);\n              } // prevent ajax submit\n\n\n              if ($module.data('moduleApi') !== undefined) {\n                event.stopImmediatePropagation();\n              }\n\n              if (ignoreCallbacks !== true) {\n                return settings.onFailure.call(element, formErrors, values);\n              }\n            }\n          },\n          // takes a validation object and returns whether field passes validation\n          field: function (field, fieldName) {\n            var identifier = field.identifier || fieldName,\n                $field = module.get.field(identifier),\n                fieldValid = true,\n                fieldErrors = [];\n\n            if (!field.identifier) {\n              module.debug('Using field name as identifier', identifier);\n              field.identifier = identifier;\n            }\n\n            if ($field.prop('disabled')) {\n              module.debug('Field is disabled. Skipping', identifier);\n              fieldValid = true;\n            } else if (field.optional && $.trim($field.val()) === '') {\n              module.debug('Field is optional and empty. Skipping', identifier);\n              fieldValid = true;\n            } else if (field.rules !== undefined) {\n              $.each(field.rules, function (index, rule) {\n                if (module.has.field(identifier) && !module.validate.rule(field, rule)) {\n                  module.debug('Field is invalid', identifier, rule.type);\n                  fieldErrors.push(module.get.prompt(rule, field));\n                  fieldValid = false;\n                }\n              });\n            }\n\n            if (fieldValid) {\n              module.remove.prompt(identifier, fieldErrors);\n              settings.onValid.call($field);\n            } else {\n              formErrors = formErrors.concat(fieldErrors);\n              module.add.prompt(identifier, fieldErrors);\n              settings.onInvalid.call($field, fieldErrors);\n              return false;\n            }\n\n            return true;\n          },\n          // takes validation rule and returns whether field passes rule\n          rule: function (field, rule) {\n            var $field = module.get.field(field.identifier),\n                type = rule.type,\n                value = $field.val(),\n                isValid = true,\n                ancillary = module.get.ancillaryValue(rule),\n                ruleName = module.get.ruleName(rule),\n                ruleFunction = settings.rules[ruleName];\n\n            if (!$.isFunction(ruleFunction)) {\n              module.error(error.noRule, ruleName);\n              return;\n            } // cast to string avoiding encoding special values\n\n\n            value = value === undefined || value === '' || value === null ? '' : $.trim(value + '');\n            return ruleFunction.call($field, value, ancillary);\n          }\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n      module.initialize();\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.form.settings = {\n    name: 'Form',\n    namespace: 'form',\n    debug: false,\n    verbose: false,\n    performance: true,\n    fields: false,\n    keyboardShortcuts: true,\n    on: 'submit',\n    inline: false,\n    delay: 200,\n    revalidate: true,\n    transition: 'scale',\n    duration: 200,\n    onValid: function () {},\n    onInvalid: function () {},\n    onSuccess: function () {\n      return true;\n    },\n    onFailure: function () {\n      return false;\n    },\n    metadata: {\n      defaultValue: 'default',\n      validate: 'validate'\n    },\n    regExp: {\n      bracket: /\\[(.*)\\]/i,\n      decimal: /^\\d*(\\.)\\d+/,\n      email: \"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\",\n      escape: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n      flags: /^\\/(.*)\\/(.*)?/,\n      integer: /^\\-?\\d+$/,\n      number: /^\\-?\\d*(\\.\\d+)?$/,\n      url: /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/i\n    },\n    text: {\n      unspecifiedRule: 'Please enter a valid value',\n      unspecifiedField: 'This field'\n    },\n    prompt: {\n      empty: '{name} must have a value',\n      checked: '{name} must be checked',\n      email: '{name} must be a valid e-mail',\n      url: '{name} must be a valid url',\n      regExp: '{name} is not formatted correctly',\n      integer: '{name} must be an integer',\n      decimal: '{name} must be a decimal number',\n      number: '{name} must be set to a number',\n      is: '{name} must be \"{ruleValue}\"',\n      isExactly: '{name} must be exactly \"{ruleValue}\"',\n      not: '{name} cannot be set to \"{ruleValue}\"',\n      notExactly: '{name} cannot be set to exactly \"{ruleValue}\"',\n      contain: '{name} cannot contain \"{ruleValue}\"',\n      containExactly: '{name} cannot contain exactly \"{ruleValue}\"',\n      doesntContain: '{name} must contain  \"{ruleValue}\"',\n      doesntContainExactly: '{name} must contain exactly \"{ruleValue}\"',\n      minLength: '{name} must be at least {ruleValue} characters',\n      length: '{name} must be at least {ruleValue} characters',\n      exactLength: '{name} must be exactly {ruleValue} characters',\n      maxLength: '{name} cannot be longer than {ruleValue} characters',\n      match: '{name} must match {ruleValue} field',\n      different: '{name} must have a different value than {ruleValue} field',\n      creditCard: '{name} must be a valid credit card number',\n      minCount: '{name} must have at least {ruleValue} choices',\n      exactCount: '{name} must have exactly {ruleValue} choices',\n      maxCount: '{name} must have {ruleValue} or less choices'\n    },\n    selector: {\n      checkbox: 'input[type=\"checkbox\"], input[type=\"radio\"]',\n      clear: '.clear',\n      field: 'input, textarea, select',\n      group: '.field',\n      input: 'input',\n      message: '.error.message',\n      prompt: '.prompt.label',\n      radio: 'input[type=\"radio\"]',\n      reset: '.reset:not([type=\"reset\"])',\n      submit: '.submit:not([type=\"submit\"])',\n      uiCheckbox: '.ui.checkbox',\n      uiDropdown: '.ui.dropdown'\n    },\n    className: {\n      error: 'error',\n      label: 'ui prompt label',\n      pressed: 'down',\n      success: 'success'\n    },\n    error: {\n      identifier: 'You must specify a string identifier for each field',\n      method: 'The method you called is not defined.',\n      noRule: 'There is no rule matching the one you specified',\n      oldSyntax: 'Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically.'\n    },\n    templates: {\n      // template that produces error message\n      error: function (errors) {\n        var html = '<ul class=\"list\">';\n        $.each(errors, function (index, value) {\n          html += '<li>' + value + '</li>';\n        });\n        html += '</ul>';\n        return $(html);\n      },\n      // template that produces label\n      prompt: function (errors) {\n        return $('<div/>').addClass('ui basic red pointing prompt label').html(errors[0]);\n      }\n    },\n    rules: {\n      // is not empty or blank string\n      empty: function (value) {\n        return !(value === undefined || '' === value || $.isArray(value) && value.length === 0);\n      },\n      // checkbox checked\n      checked: function () {\n        return $(this).filter(':checked').length > 0;\n      },\n      // is most likely an email\n      email: function (value) {\n        var emailRegExp = new RegExp($.fn.form.settings.regExp.email, 'i');\n        return emailRegExp.test(value);\n      },\n      // value is most likely url\n      url: function (value) {\n        return $.fn.form.settings.regExp.url.test(value);\n      },\n      // matches specified regExp\n      regExp: function (value, regExp) {\n        var regExpParts = regExp.match($.fn.form.settings.regExp.flags),\n            flags; // regular expression specified as /baz/gi (flags)\n\n        if (regExpParts) {\n          regExp = regExpParts.length >= 2 ? regExpParts[1] : regExp;\n          flags = regExpParts.length >= 3 ? regExpParts[2] : '';\n        }\n\n        return value.match(new RegExp(regExp, flags));\n      },\n      // is valid integer or matches range\n      integer: function (value, range) {\n        var intRegExp = $.fn.form.settings.regExp.integer,\n            min,\n            max,\n            parts;\n\n        if (!range || ['', '..'].indexOf(range) !== -1) {// do nothing\n        } else if (range.indexOf('..') == -1) {\n          if (intRegExp.test(range)) {\n            min = max = range - 0;\n          }\n        } else {\n          parts = range.split('..', 2);\n\n          if (intRegExp.test(parts[0])) {\n            min = parts[0] - 0;\n          }\n\n          if (intRegExp.test(parts[1])) {\n            max = parts[1] - 0;\n          }\n        }\n\n        return intRegExp.test(value) && (min === undefined || value >= min) && (max === undefined || value <= max);\n      },\n      // is valid number (with decimal)\n      decimal: function (value) {\n        return $.fn.form.settings.regExp.decimal.test(value);\n      },\n      // is valid number\n      number: function (value) {\n        return $.fn.form.settings.regExp.number.test(value);\n      },\n      // is value (case insensitive)\n      is: function (value, text) {\n        text = typeof text == 'string' ? text.toLowerCase() : text;\n        value = typeof value == 'string' ? value.toLowerCase() : value;\n        return value == text;\n      },\n      // is value\n      isExactly: function (value, text) {\n        return value == text;\n      },\n      // value is not another value (case insensitive)\n      not: function (value, notValue) {\n        value = typeof value == 'string' ? value.toLowerCase() : value;\n        notValue = typeof notValue == 'string' ? notValue.toLowerCase() : notValue;\n        return value != notValue;\n      },\n      // value is not another value (case sensitive)\n      notExactly: function (value, notValue) {\n        return value != notValue;\n      },\n      // value contains text (insensitive)\n      contains: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text, 'i')) !== -1;\n      },\n      // value contains text (case sensitive)\n      containsExactly: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text)) !== -1;\n      },\n      // value contains text (insensitive)\n      doesntContain: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text, 'i')) === -1;\n      },\n      // value contains text (case sensitive)\n      doesntContainExactly: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text)) === -1;\n      },\n      // is at least string length\n      minLength: function (value, requiredLength) {\n        return value !== undefined ? value.length >= requiredLength : false;\n      },\n      // see rls notes for 2.0.6 (this is a duplicate of minLength)\n      length: function (value, requiredLength) {\n        return value !== undefined ? value.length >= requiredLength : false;\n      },\n      // is exactly length\n      exactLength: function (value, requiredLength) {\n        return value !== undefined ? value.length == requiredLength : false;\n      },\n      // is less than length\n      maxLength: function (value, maxLength) {\n        return value !== undefined ? value.length <= maxLength : false;\n      },\n      // matches another field\n      match: function (value, identifier) {\n        var $form = $(this),\n            matchingValue;\n\n        if ($('[data-validate=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[data-validate=\"' + identifier + '\"]').val();\n        } else if ($('#' + identifier).length > 0) {\n          matchingValue = $('#' + identifier).val();\n        } else if ($('[name=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '\"]').val();\n        } else if ($('[name=\"' + identifier + '[]\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '[]\"]');\n        }\n\n        return matchingValue !== undefined ? value.toString() == matchingValue.toString() : false;\n      },\n      // different than another field\n      different: function (value, identifier) {\n        // use either id or name of field\n        var $form = $(this),\n            matchingValue;\n\n        if ($('[data-validate=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[data-validate=\"' + identifier + '\"]').val();\n        } else if ($('#' + identifier).length > 0) {\n          matchingValue = $('#' + identifier).val();\n        } else if ($('[name=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '\"]').val();\n        } else if ($('[name=\"' + identifier + '[]\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '[]\"]');\n        }\n\n        return matchingValue !== undefined ? value.toString() !== matchingValue.toString() : false;\n      },\n      creditCard: function (cardNumber, cardTypes) {\n        var cards = {\n          visa: {\n            pattern: /^4/,\n            length: [16]\n          },\n          amex: {\n            pattern: /^3[47]/,\n            length: [15]\n          },\n          mastercard: {\n            pattern: /^5[1-5]/,\n            length: [16]\n          },\n          discover: {\n            pattern: /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,\n            length: [16]\n          },\n          unionPay: {\n            pattern: /^(62|88)/,\n            length: [16, 17, 18, 19]\n          },\n          jcb: {\n            pattern: /^35(2[89]|[3-8][0-9])/,\n            length: [16]\n          },\n          maestro: {\n            pattern: /^(5018|5020|5038|6304|6759|676[1-3])/,\n            length: [12, 13, 14, 15, 16, 17, 18, 19]\n          },\n          dinersClub: {\n            pattern: /^(30[0-5]|^36)/,\n            length: [14]\n          },\n          laser: {\n            pattern: /^(6304|670[69]|6771)/,\n            length: [16, 17, 18, 19]\n          },\n          visaElectron: {\n            pattern: /^(4026|417500|4508|4844|491(3|7))/,\n            length: [16]\n          }\n        },\n            valid = {},\n            validCard = false,\n            requiredTypes = typeof cardTypes == 'string' ? cardTypes.split(',') : false,\n            unionPay,\n            validation;\n\n        if (typeof cardNumber !== 'string' || cardNumber.length === 0) {\n          return;\n        } // verify card types\n\n\n        if (requiredTypes) {\n          $.each(requiredTypes, function (index, type) {\n            // verify each card type\n            validation = cards[type];\n\n            if (validation) {\n              valid = {\n                length: $.inArray(cardNumber.length, validation.length) !== -1,\n                pattern: cardNumber.search(validation.pattern) !== -1\n              };\n\n              if (valid.length && valid.pattern) {\n                validCard = true;\n              }\n            }\n          });\n\n          if (!validCard) {\n            return false;\n          }\n        } // skip luhn for UnionPay\n\n\n        unionPay = {\n          number: $.inArray(cardNumber.length, cards.unionPay.length) !== -1,\n          pattern: cardNumber.search(cards.unionPay.pattern) !== -1\n        };\n\n        if (unionPay.number && unionPay.pattern) {\n          return true;\n        } // verify luhn, adapted from  <https://gist.github.com/2134376>\n\n\n        var length = cardNumber.length,\n            multiple = 0,\n            producedValue = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]],\n            sum = 0;\n\n        while (length--) {\n          sum += producedValue[multiple][parseInt(cardNumber.charAt(length), 10)];\n          multiple ^= 1;\n        }\n\n        return sum % 10 === 0 && sum > 0;\n      },\n      minCount: function (value, minCount) {\n        if (minCount == 0) {\n          return true;\n        }\n\n        if (minCount == 1) {\n          return value !== '';\n        }\n\n        return value.split(',').length >= minCount;\n      },\n      exactCount: function (value, exactCount) {\n        if (exactCount == 0) {\n          return value === '';\n        }\n\n        if (exactCount == 1) {\n          return value !== '' && value.search(',') === -1;\n        }\n\n        return value.split(',').length == exactCount;\n      },\n      maxCount: function (value, maxCount) {\n        if (maxCount == 0) {\n          return false;\n        }\n\n        if (maxCount == 1) {\n          return value.search(',') === -1;\n        }\n\n        return value.split(',').length <= maxCount;\n      }\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["client/lib/definitions/behaviors/form.js"],"names":["$","window","document","undefined","fn","form","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","legacyParameters","methodInvoked","queryArguments","slice","call","returnedValue","each","$module","element","formErrors","keyHeldDown","$field","$group","$message","$prompt","$submit","$clear","$reset","settings","validation","metadata","className","error","namespace","moduleNamespace","eventNamespace","instance","module","initialize","get","instantiate","invoke","verbose","bindEvents","set","defaults","data","destroy","removeEvents","removeData","refresh","find","field","group","message","prompt","submit","clear","reset","attachEvents","action","on","event","preventDefault","validate","blur","keyboardShortcuts","keydown","$input","type","prop","inputEvent","changeEvent","change","$element","parent","$fieldGroup","closest","defaultValue","isCheckbox","is","uiCheckbox","isDropdown","uiDropdown","isErrored","hasClass","removeClass","remove","dropdown","val","bracketedRule","rule","match","regExp","bracket","valid","allValid","fieldName","off","key","which","keyCode","enter","escape","ctrlKey","input","not","checkbox","length","one","keyup","debug","validationRules","revalidate","clearTimeout","timer","setTimeout","delay","ancillaryValue","ruleName","replace","createElement","oninput","onpropertychange","ancillary","text","unspecifiedRule","requiresValue","search","requiresName","$label","name","identifier","eq","size","unspecifiedField","isPlainObject","keys","Object","isLegacySettings","rules","ruleKeys","extend","oldSyntax","fields","isArray","index","push","filter","$fields","add","fieldValidation","value","results","values","isRadio","radio","isMultiple","indexOf","isChecked","has","errors","children","promptExists","addClass","inline","templates","appendTo","html","transition","duration","fadeIn","fadeOut","success","isEmptyObject","fieldExists","$multipleField","ignoreCallbacks","apiRequest","onSuccess","stopImmediatePropagation","onFailure","fieldValid","fieldErrors","optional","trim","onValid","concat","onInvalid","isValid","ruleFunction","isFunction","noRule","setting","internal","log","Function","prototype","bind","console","info","apply","currentTime","executionTime","previousTime","display","title","totalTime","table","groupCollapsed","groupEnd","passedArguments","context","object","maxDepth","found","response","split","depth","camelCaseValue","charAt","toUpperCase","decimal","email","flags","integer","number","url","empty","checked","isExactly","notExactly","contain","containExactly","doesntContain","doesntContainExactly","minLength","exactLength","maxLength","different","creditCard","minCount","exactCount","maxCount","label","pressed","method","emailRegExp","RegExp","test","regExpParts","range","intRegExp","min","max","parts","toLowerCase","notValue","contains","containsExactly","requiredLength","$form","matchingValue","toString","cardNumber","cardTypes","cards","visa","pattern","amex","mastercard","discover","unionPay","jcb","maestro","dinersClub","laser","visaElectron","validCard","requiredTypes","inArray","multiple","producedValue","sum","parseInt","jQuery"],"mappings":"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","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n/*!\n * # Semantic UI - Form Validation\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ( $, window, document, undefined ) {\n\n\"use strict\";\n\n$.fn.form = function(parameters) {\n  var\n    $allModules      = $(this),\n    moduleSelector   = $allModules.selector || '',\n\n    time             = new Date().getTime(),\n    performance      = [],\n\n    query            = arguments[0],\n    legacyParameters = arguments[1],\n    methodInvoked    = (typeof query == 'string'),\n    queryArguments   = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n  $allModules\n    .each(function() {\n      var\n        $module     = $(this),\n        element     = this,\n\n        formErrors  = [],\n        keyHeldDown = false,\n\n        // set at run-time\n        $field,\n        $group,\n        $message,\n        $prompt,\n        $submit,\n        $clear,\n        $reset,\n\n        settings,\n        validation,\n\n        metadata,\n        selector,\n        className,\n        error,\n\n        namespace,\n        moduleNamespace,\n        eventNamespace,\n\n        instance,\n        module\n      ;\n\n      module      = {\n\n        initialize: function() {\n\n          // settings grabbed at run time\n          module.get.settings();\n          if(methodInvoked) {\n            if(instance === undefined) {\n              module.instantiate();\n            }\n            module.invoke(query);\n          }\n          else {\n            module.verbose('Initializing form validation', $module, settings);\n            module.bindEvents();\n            module.set.defaults();\n            module.instantiate();\n          }\n        },\n\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module', instance);\n          module.removeEvents();\n          $module\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        refresh: function() {\n          module.verbose('Refreshing selector cache');\n          $field      = $module.find(selector.field);\n          $group      = $module.find(selector.group);\n          $message    = $module.find(selector.message);\n          $prompt     = $module.find(selector.prompt);\n\n          $submit     = $module.find(selector.submit);\n          $clear      = $module.find(selector.clear);\n          $reset      = $module.find(selector.reset);\n        },\n\n        submit: function() {\n          module.verbose('Submitting form', $module);\n          $module\n            .submit()\n          ;\n        },\n\n        attachEvents: function(selector, action) {\n          action = action || 'submit';\n          $(selector)\n            .on('click' + eventNamespace, function(event) {\n              module[action]();\n              event.preventDefault();\n            })\n          ;\n        },\n\n        bindEvents: function() {\n          module.verbose('Attaching form events');\n          $module\n            .on('submit' + eventNamespace, module.validate.form)\n            .on('blur'   + eventNamespace, selector.field, module.event.field.blur)\n            .on('click'  + eventNamespace, selector.submit, module.submit)\n            .on('click'  + eventNamespace, selector.reset, module.reset)\n            .on('click'  + eventNamespace, selector.clear, module.clear)\n          ;\n          if(settings.keyboardShortcuts) {\n            $module\n              .on('keydown' + eventNamespace, selector.field, module.event.field.keydown)\n            ;\n          }\n          $field\n            .each(function() {\n              var\n                $input     = $(this),\n                type       = $input.prop('type'),\n                inputEvent = module.get.changeEvent(type, $input)\n              ;\n              $(this)\n                .on(inputEvent + eventNamespace, module.event.field.change)\n              ;\n            })\n          ;\n        },\n\n        clear: function() {\n          $field\n            .each(function () {\n              var\n                $field       = $(this),\n                $element     = $field.parent(),\n                $fieldGroup  = $field.closest($group),\n                $prompt      = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue) || '',\n                isCheckbox   = $element.is(selector.uiCheckbox),\n                isDropdown   = $element.is(selector.uiDropdown),\n                isErrored    = $fieldGroup.hasClass(className.error)\n              ;\n              if(isErrored) {\n                module.verbose('Resetting error on field', $fieldGroup);\n                $fieldGroup.removeClass(className.error);\n                $prompt.remove();\n              }\n              if(isDropdown) {\n                module.verbose('Resetting dropdown value', $element, defaultValue);\n                $element.dropdown('clear');\n              }\n              else if(isCheckbox) {\n                $field.prop('checked', false);\n              }\n              else {\n                module.verbose('Resetting field value', $field, defaultValue);\n                $field.val('');\n              }\n            })\n          ;\n        },\n\n        reset: function() {\n          $field\n            .each(function () {\n              var\n                $field       = $(this),\n                $element     = $field.parent(),\n                $fieldGroup  = $field.closest($group),\n                $prompt      = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue),\n                isCheckbox   = $element.is(selector.uiCheckbox),\n                isDropdown   = $element.is(selector.uiDropdown),\n                isErrored    = $fieldGroup.hasClass(className.error)\n              ;\n              if(defaultValue === undefined) {\n                return;\n              }\n              if(isErrored) {\n                module.verbose('Resetting error on field', $fieldGroup);\n                $fieldGroup.removeClass(className.error);\n                $prompt.remove();\n              }\n              if(isDropdown) {\n                module.verbose('Resetting dropdown value', $element, defaultValue);\n                $element.dropdown('restore defaults');\n              }\n              else if(isCheckbox) {\n                module.verbose('Resetting checkbox value', $element, defaultValue);\n                $field.prop('checked', defaultValue);\n              }\n              else {\n                module.verbose('Resetting field value', $field, defaultValue);\n                $field.val(defaultValue);\n              }\n            })\n          ;\n        },\n\n        is: {\n          bracketedRule: function(rule) {\n            return (rule.type && rule.type.match(settings.regExp.bracket));\n          },\n          valid: function() {\n            var\n              allValid = true\n            ;\n            module.verbose('Checking if form is valid');\n            $.each(validation, function(fieldName, field) {\n              if( !( module.validate.field(field, fieldName) ) ) {\n                allValid = false;\n              }\n            });\n            return allValid;\n          }\n        },\n\n        removeEvents: function() {\n          $module\n            .off(eventNamespace)\n          ;\n          $field\n            .off(eventNamespace)\n          ;\n          $submit\n            .off(eventNamespace)\n          ;\n          $field\n            .off(eventNamespace)\n          ;\n        },\n\n        event: {\n          field: {\n            keydown: function(event) {\n              var\n                $field  = $(this),\n                key     = event.which,\n                keyCode = {\n                  enter  : 13,\n                  escape : 27\n                }\n              ;\n              if( key == keyCode.escape) {\n                module.verbose('Escape key pressed blurring field');\n                $field\n                  .blur()\n                ;\n              }\n              if(!event.ctrlKey && key == keyCode.enter && $field.is(selector.input) && $field.not(selector.checkbox).length > 0 ) {\n                if(!keyHeldDown) {\n                  $field\n                    .one('keyup' + eventNamespace, module.event.field.keyup)\n                  ;\n                  module.submit();\n                  module.debug('Enter pressed on input submitting form');\n                }\n                keyHeldDown = true;\n              }\n            },\n            keyup: function() {\n              keyHeldDown = false;\n            },\n            blur: function(event) {\n              var\n                $field          = $(this),\n                $fieldGroup     = $field.closest($group),\n                validationRules = module.get.validation($field)\n              ;\n              if( $fieldGroup.hasClass(className.error) ) {\n                module.debug('Revalidating field', $field, validationRules);\n                module.validate.form.call(module, event, true);\n              }\n              else if(settings.on == 'blur' || settings.on == 'change') {\n                if(validationRules) {\n                  module.validate.field( validationRules );\n                }\n              }\n            },\n            change: function(event) {\n              var\n                $field      = $(this),\n                $fieldGroup = $field.closest($group)\n              ;\n              if(settings.on == 'change' || ( $fieldGroup.hasClass(className.error) && settings.revalidate) ) {\n                clearTimeout(module.timer);\n                module.timer = setTimeout(function() {\n                  module.debug('Revalidating field', $field,  module.get.validation($field));\n                  module.validate.form.call(module, event, true);\n                }, settings.delay);\n              }\n            }\n          }\n\n        },\n\n        get: {\n          ancillaryValue: function(rule) {\n            if(!rule.type || !module.is.bracketedRule(rule)) {\n              return false;\n            }\n            return rule.type.match(settings.regExp.bracket)[1] + '';\n          },\n          ruleName: function(rule) {\n            if( module.is.bracketedRule(rule) ) {\n              return rule.type.replace(rule.type.match(settings.regExp.bracket)[0], '');\n            }\n            return rule.type;\n          },\n          changeEvent: function(type, $input) {\n            if(type == 'checkbox' || type == 'radio' || type == 'hidden' || $input.is('select')) {\n              return 'change';\n            }\n            else {\n              return module.get.inputEvent();\n            }\n          },\n          inputEvent: function() {\n            return (document.createElement('input').oninput !== undefined)\n              ? 'input'\n              : (document.createElement('input').onpropertychange !== undefined)\n                ? 'propertychange'\n                : 'keyup'\n            ;\n          },\n          prompt: function(rule, field) {\n            var\n              ruleName      = module.get.ruleName(rule),\n              ancillary     = module.get.ancillaryValue(rule),\n              prompt        = rule.prompt || settings.prompt[ruleName] || settings.text.unspecifiedRule,\n              requiresValue = (prompt.search('{value}') !== -1),\n              requiresName  = (prompt.search('{name}') !== -1),\n              $label,\n              $field,\n              name\n            ;\n            if(requiresName || requiresValue) {\n              $field = module.get.field(field.identifier);\n            }\n            if(requiresValue) {\n              prompt = prompt.replace('{value}', $field.val());\n            }\n            if(requiresName) {\n              $label = $field.closest(selector.group).find('label').eq(0);\n              name = ($label.size() == 1)\n                ? $label.text()\n                : $field.prop('placeholder') || settings.text.unspecifiedField\n              ;\n              prompt = prompt.replace('{name}', name);\n            }\n            prompt = prompt.replace('{identifier}', field.identifier);\n            prompt = prompt.replace('{ruleValue}', ancillary);\n            if(!rule.prompt) {\n              module.verbose('Using default validation prompt for type', prompt, ruleName);\n            }\n            return prompt;\n          },\n          settings: function() {\n            if($.isPlainObject(parameters)) {\n              var\n                keys     = Object.keys(parameters),\n                isLegacySettings = (keys.length > 0)\n                  ? (parameters[keys[0]].identifier !== undefined && parameters[keys[0]].rules !== undefined)\n                  : false,\n                ruleKeys\n              ;\n              if(isLegacySettings) {\n                // 1.x (ducktyped)\n                settings   = $.extend(true, {}, $.fn.form.settings, legacyParameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, parameters);\n                module.error(settings.error.oldSyntax, element);\n                module.verbose('Extending settings from legacy parameters', validation, settings);\n              }\n              else {\n                // 2.x\n                if(parameters.fields) {\n                  ruleKeys = Object.keys(parameters.fields);\n                  if( typeof parameters.fields[ruleKeys[0]] == 'string' || $.isArray(parameters.fields[ruleKeys[0]]) ) {\n                    $.each(parameters.fields, function(name, rules) {\n                      if(typeof rules == 'string') {\n                        rules = [rules];\n                      }\n                      parameters.fields[name] = {\n                        rules: []\n                      };\n                      $.each(rules, function(index, rule) {\n                        parameters.fields[name].rules.push({ type: rule });\n                      });\n                    });\n                  }\n                }\n\n                settings   = $.extend(true, {}, $.fn.form.settings, parameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, settings.fields);\n                module.verbose('Extending settings', validation, settings);\n              }\n            }\n            else {\n              settings   = $.fn.form.settings;\n              validation = $.fn.form.settings.defaults;\n              module.verbose('Using default form validation', validation, settings);\n            }\n\n            // shorthand\n            namespace       = settings.namespace;\n            metadata        = settings.metadata;\n            selector        = settings.selector;\n            className       = settings.className;\n            error           = settings.error;\n            moduleNamespace = 'module-' + namespace;\n            eventNamespace  = '.' + namespace;\n\n            // grab instance\n            instance = $module.data(moduleNamespace);\n\n            // refresh selector cache\n            module.refresh();\n          },\n          field: function(identifier) {\n            module.verbose('Finding field with identifier', identifier);\n            if( $field.filter('#' + identifier).length > 0 ) {\n              return $field.filter('#' + identifier);\n            }\n            else if( $field.filter('[name=\"' + identifier +'\"]').length > 0 ) {\n              return $field.filter('[name=\"' + identifier +'\"]');\n            }\n            else if( $field.filter('[name=\"' + identifier +'[]\"]').length > 0 ) {\n              return $field.filter('[name=\"' + identifier +'[]\"]');\n            }\n            else if( $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]').length > 0 ) {\n              return $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]');\n            }\n            return $('<input/>');\n          },\n          fields: function(fields) {\n            var\n              $fields = $()\n            ;\n            $.each(fields, function(index, name) {\n              $fields = $fields.add( module.get.field(name) );\n            });\n            return $fields;\n          },\n          validation: function($field) {\n            var\n              fieldValidation,\n              identifier\n            ;\n            if(!validation) {\n              return false;\n            }\n            $.each(validation, function(fieldName, field) {\n              identifier = field.identifier || fieldName;\n              if( module.get.field(identifier)[0] == $field[0] ) {\n                field.identifier = identifier;\n                fieldValidation = field;\n              }\n            });\n            return fieldValidation || false;\n          },\n          value: function (field) {\n            var\n              fields = [],\n              results\n            ;\n            fields.push(field);\n            results = module.get.values.call(element, fields);\n            return results[field];\n          },\n          values: function (fields) {\n            var\n              $fields = $.isArray(fields)\n                ? module.get.fields(fields)\n                : $field,\n              values = {}\n            ;\n            $fields.each(function(index, field) {\n              var\n                $field     = $(field),\n                type       = $field.prop('type'),\n                name       = $field.prop('name'),\n                value      = $field.val(),\n                isCheckbox = $field.is(selector.checkbox),\n                isRadio    = $field.is(selector.radio),\n                isMultiple = (name.indexOf('[]') !== -1),\n                isChecked  = (isCheckbox)\n                  ? $field.is(':checked')\n                  : false\n              ;\n              if(name) {\n                if(isMultiple) {\n                  name = name.replace('[]', '');\n                  if(!values[name]) {\n                    values[name] = [];\n                  }\n                  if(isCheckbox) {\n                    if(isChecked) {\n                      values[name].push(value || true);\n                    }\n                    else {\n                      values[name].push(false);\n                    }\n                  }\n                  else {\n                    values[name].push(value);\n                  }\n                }\n                else {\n                  if(isRadio) {\n                    if(isChecked) {\n                      values[name] = value;\n                    }\n                  }\n                  else if(isCheckbox) {\n                    if(isChecked) {\n                      values[name] = value || true;\n                    }\n                    else {\n                      values[name] = false;\n                    }\n                  }\n                  else {\n                    values[name] = value;\n                  }\n                }\n              }\n            });\n            return values;\n          }\n        },\n\n        has: {\n\n          field: function(identifier) {\n            module.verbose('Checking for existence of a field with identifier', identifier);\n            if(typeof identifier !== 'string') {\n              module.error(error.identifier, identifier);\n            }\n            if( $field.filter('#' + identifier).length > 0 ) {\n              return true;\n            }\n            else if( $field.filter('[name=\"' + identifier +'\"]').length > 0 ) {\n              return true;\n            }\n            else if( $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]').length > 0 ) {\n              return true;\n            }\n            return false;\n          }\n\n        },\n\n        add: {\n          prompt: function(identifier, errors) {\n            var\n              $field       = module.get.field(identifier),\n              $fieldGroup  = $field.closest($group),\n              $prompt      = $fieldGroup.children(selector.prompt),\n              promptExists = ($prompt.length !== 0)\n            ;\n            errors = (typeof errors == 'string')\n              ? [errors]\n              : errors\n            ;\n            module.verbose('Adding field error state', identifier);\n            $fieldGroup\n              .addClass(className.error)\n            ;\n            if(settings.inline) {\n              if(!promptExists) {\n                $prompt = settings.templates.prompt(errors);\n                $prompt\n                  .appendTo($fieldGroup)\n                ;\n              }\n              $prompt\n                .html(errors[0])\n              ;\n              if(!promptExists) {\n                if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                  module.verbose('Displaying error with css transition', settings.transition);\n                  $prompt.transition(settings.transition + ' in', settings.duration);\n                }\n                else {\n                  module.verbose('Displaying error with fallback javascript animation');\n                  $prompt\n                    .fadeIn(settings.duration)\n                  ;\n                }\n              }\n              else {\n                module.verbose('Inline errors are disabled, no inline error added', identifier);\n              }\n            }\n          },\n          errors: function(errors) {\n            module.debug('Adding form error messages', errors);\n            module.set.error();\n            $message\n              .html( settings.templates.error(errors) )\n            ;\n          }\n        },\n\n        remove: {\n          prompt: function(identifier) {\n            var\n              $field      = module.get.field(identifier),\n              $fieldGroup = $field.closest($group),\n              $prompt     = $fieldGroup.children(selector.prompt)\n            ;\n            $fieldGroup\n              .removeClass(className.error)\n            ;\n            if(settings.inline && $prompt.is(':visible')) {\n              module.verbose('Removing prompt for field', identifier);\n              if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                $prompt.transition(settings.transition + ' out', settings.duration, function() {\n                  $prompt.remove();\n                });\n              }\n              else {\n                $prompt\n                  .fadeOut(settings.duration, function(){\n                    $prompt.remove();\n                  })\n                ;\n              }\n            }\n          }\n        },\n\n        set: {\n          success: function() {\n            $module\n              .removeClass(className.error)\n              .addClass(className.success)\n            ;\n          },\n          defaults: function () {\n            $field\n              .each(function () {\n                var\n                  $field     = $(this),\n                  isCheckbox = ($field.filter(selector.checkbox).length > 0),\n                  value      = (isCheckbox)\n                    ? $field.is(':checked')\n                    : $field.val()\n                ;\n                $field.data(metadata.defaultValue, value);\n              })\n            ;\n          },\n          error: function() {\n            $module\n              .removeClass(className.success)\n              .addClass(className.error)\n            ;\n          },\n          value: function (field, value) {\n            var\n              fields = {}\n            ;\n            fields[field] = value;\n            return module.set.values.call(element, fields);\n          },\n          values: function (fields) {\n            if($.isEmptyObject(fields)) {\n              return;\n            }\n            $.each(fields, function(key, value) {\n              var\n                $field      = module.get.field(key),\n                $element    = $field.parent(),\n                isMultiple  = $.isArray(value),\n                isCheckbox  = $element.is(selector.uiCheckbox),\n                isDropdown  = $element.is(selector.uiDropdown),\n                isRadio     = ($field.is(selector.radio) && isCheckbox),\n                fieldExists = ($field.length > 0),\n                $multipleField\n              ;\n              if(fieldExists) {\n                if(isMultiple && isCheckbox) {\n                  module.verbose('Selecting multiple', value, $field);\n                  $element.checkbox('uncheck');\n                  $.each(value, function(index, value) {\n                    $multipleField = $field.filter('[value=\"' + value + '\"]');\n                    $element       = $multipleField.parent();\n                    if($multipleField.length > 0) {\n                      $element.checkbox('check');\n                    }\n                  });\n                }\n                else if(isRadio) {\n                  module.verbose('Selecting radio value', value, $field);\n                  $field.filter('[value=\"' + value + '\"]')\n                    .parent(selector.uiCheckbox)\n                      .checkbox('check')\n                  ;\n                }\n                else if(isCheckbox) {\n                  module.verbose('Setting checkbox value', value, $element);\n                  if(value === true) {\n                    $element.checkbox('check');\n                  }\n                  else {\n                    $element.checkbox('uncheck');\n                  }\n                }\n                else if(isDropdown) {\n                  module.verbose('Setting dropdown value', value, $element);\n                  $element.dropdown('set selected', value);\n                }\n                else {\n                  module.verbose('Setting field value', value, $field);\n                  $field.val(value);\n                }\n              }\n            });\n          }\n        },\n\n        validate: {\n\n          form: function(event, ignoreCallbacks) {\n            var\n              values = module.get.values(),\n              apiRequest\n            ;\n\n            // input keydown event will fire submit repeatedly by browser default\n            if(keyHeldDown) {\n              return false;\n            }\n\n            // reset errors\n            formErrors = [];\n            if( module.is.valid() ) {\n              module.debug('Form has no validation errors, submitting');\n              module.set.success();\n              if(ignoreCallbacks !== true) {\n                return settings.onSuccess.call(element, event, values);\n              }\n            }\n            else {\n              module.debug('Form has errors');\n              module.set.error();\n              if(!settings.inline) {\n                module.add.errors(formErrors);\n              }\n              // prevent ajax submit\n              if($module.data('moduleApi') !== undefined) {\n                event.stopImmediatePropagation();\n              }\n              if(ignoreCallbacks !== true) {\n                return settings.onFailure.call(element, formErrors, values);\n              }\n            }\n          },\n\n          // takes a validation object and returns whether field passes validation\n          field: function(field, fieldName) {\n            var\n              identifier  = field.identifier || fieldName,\n              $field      = module.get.field(identifier),\n              fieldValid  = true,\n              fieldErrors = []\n            ;\n            if(!field.identifier) {\n              module.debug('Using field name as identifier', identifier);\n              field.identifier = identifier;\n            }\n            if($field.prop('disabled')) {\n              module.debug('Field is disabled. Skipping', identifier);\n              fieldValid = true;\n            }\n            else if(field.optional && $.trim($field.val()) === ''){\n              module.debug('Field is optional and empty. Skipping', identifier);\n              fieldValid = true;\n            }\n            else if(field.rules !== undefined) {\n              $.each(field.rules, function(index, rule) {\n                if( module.has.field(identifier) && !( module.validate.rule(field, rule) ) ) {\n                  module.debug('Field is invalid', identifier, rule.type);\n                  fieldErrors.push(module.get.prompt(rule, field));\n                  fieldValid = false;\n                }\n              });\n            }\n            if(fieldValid) {\n              module.remove.prompt(identifier, fieldErrors);\n              settings.onValid.call($field);\n            }\n            else {\n              formErrors = formErrors.concat(fieldErrors);\n              module.add.prompt(identifier, fieldErrors);\n              settings.onInvalid.call($field, fieldErrors);\n              return false;\n            }\n            return true;\n          },\n\n          // takes validation rule and returns whether field passes rule\n          rule: function(field, rule) {\n            var\n              $field       = module.get.field(field.identifier),\n              type         = rule.type,\n              value        = $field.val(),\n              isValid      = true,\n              ancillary    = module.get.ancillaryValue(rule),\n              ruleName     = module.get.ruleName(rule),\n              ruleFunction = settings.rules[ruleName]\n            ;\n            if( !$.isFunction(ruleFunction) ) {\n              module.error(error.noRule, ruleName);\n              return;\n            }\n            // cast to string avoiding encoding special values\n            value = (value === undefined || value === '' || value === null)\n              ? ''\n              : $.trim(value + '')\n            ;\n            return ruleFunction.call($field, value, ancillary);\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n      module.initialize();\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.form.settings = {\n\n  name              : 'Form',\n  namespace         : 'form',\n\n  debug             : false,\n  verbose           : false,\n  performance       : true,\n\n  fields            : false,\n\n  keyboardShortcuts : true,\n  on                : 'submit',\n  inline            : false,\n\n  delay             : 200,\n  revalidate        : true,\n\n  transition        : 'scale',\n  duration          : 200,\n\n  onValid           : function() {},\n  onInvalid         : function() {},\n  onSuccess         : function() { return true; },\n  onFailure         : function() { return false; },\n\n  metadata : {\n    defaultValue : 'default',\n    validate     : 'validate'\n  },\n\n  regExp: {\n    bracket : /\\[(.*)\\]/i,\n    decimal : /^\\d*(\\.)\\d+/,\n    email   : \"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\",\n    escape  : /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n    flags   : /^\\/(.*)\\/(.*)?/,\n    integer : /^\\-?\\d+$/,\n    number  : /^\\-?\\d*(\\.\\d+)?$/,\n    url     : /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/i\n  },\n\n  text: {\n    unspecifiedRule  : 'Please enter a valid value',\n    unspecifiedField : 'This field'\n  },\n\n  prompt: {\n    empty                : '{name} must have a value',\n    checked              : '{name} must be checked',\n    email                : '{name} must be a valid e-mail',\n    url                  : '{name} must be a valid url',\n    regExp               : '{name} is not formatted correctly',\n    integer              : '{name} must be an integer',\n    decimal              : '{name} must be a decimal number',\n    number               : '{name} must be set to a number',\n    is                   : '{name} must be \"{ruleValue}\"',\n    isExactly            : '{name} must be exactly \"{ruleValue}\"',\n    not                  : '{name} cannot be set to \"{ruleValue}\"',\n    notExactly           : '{name} cannot be set to exactly \"{ruleValue}\"',\n    contain              : '{name} cannot contain \"{ruleValue}\"',\n    containExactly       : '{name} cannot contain exactly \"{ruleValue}\"',\n    doesntContain        : '{name} must contain  \"{ruleValue}\"',\n    doesntContainExactly : '{name} must contain exactly \"{ruleValue}\"',\n    minLength            : '{name} must be at least {ruleValue} characters',\n    length               : '{name} must be at least {ruleValue} characters',\n    exactLength          : '{name} must be exactly {ruleValue} characters',\n    maxLength            : '{name} cannot be longer than {ruleValue} characters',\n    match                : '{name} must match {ruleValue} field',\n    different            : '{name} must have a different value than {ruleValue} field',\n    creditCard           : '{name} must be a valid credit card number',\n    minCount             : '{name} must have at least {ruleValue} choices',\n    exactCount           : '{name} must have exactly {ruleValue} choices',\n    maxCount             : '{name} must have {ruleValue} or less choices'\n  },\n\n  selector : {\n    checkbox   : 'input[type=\"checkbox\"], input[type=\"radio\"]',\n    clear      : '.clear',\n    field      : 'input, textarea, select',\n    group      : '.field',\n    input      : 'input',\n    message    : '.error.message',\n    prompt     : '.prompt.label',\n    radio      : 'input[type=\"radio\"]',\n    reset      : '.reset:not([type=\"reset\"])',\n    submit     : '.submit:not([type=\"submit\"])',\n    uiCheckbox : '.ui.checkbox',\n    uiDropdown : '.ui.dropdown'\n  },\n\n  className : {\n    error   : 'error',\n    label   : 'ui prompt label',\n    pressed : 'down',\n    success : 'success'\n  },\n\n  error: {\n    identifier : 'You must specify a string identifier for each field',\n    method     : 'The method you called is not defined.',\n    noRule     : 'There is no rule matching the one you specified',\n    oldSyntax  : 'Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically.'\n  },\n\n  templates: {\n\n    // template that produces error message\n    error: function(errors) {\n      var\n        html = '<ul class=\"list\">'\n      ;\n      $.each(errors, function(index, value) {\n        html += '<li>' + value + '</li>';\n      });\n      html += '</ul>';\n      return $(html);\n    },\n\n    // template that produces label\n    prompt: function(errors) {\n      return $('<div/>')\n        .addClass('ui basic red pointing prompt label')\n        .html(errors[0])\n      ;\n    }\n  },\n\n  rules: {\n\n    // is not empty or blank string\n    empty: function(value) {\n      return !(value === undefined || '' === value || $.isArray(value) && value.length === 0);\n    },\n\n    // checkbox checked\n    checked: function() {\n      return ($(this).filter(':checked').length > 0);\n    },\n\n    // is most likely an email\n    email: function(value){\n      var\n        emailRegExp = new RegExp($.fn.form.settings.regExp.email, 'i')\n      ;\n      return emailRegExp.test(value);\n    },\n\n    // value is most likely url\n    url: function(value) {\n      return $.fn.form.settings.regExp.url.test(value);\n    },\n\n    // matches specified regExp\n    regExp: function(value, regExp) {\n      var\n        regExpParts = regExp.match($.fn.form.settings.regExp.flags),\n        flags\n      ;\n      // regular expression specified as /baz/gi (flags)\n      if(regExpParts) {\n        regExp = (regExpParts.length >= 2)\n          ? regExpParts[1]\n          : regExp\n        ;\n        flags = (regExpParts.length >= 3)\n          ? regExpParts[2]\n          : ''\n        ;\n      }\n      return value.match( new RegExp(regExp, flags) );\n    },\n\n    // is valid integer or matches range\n    integer: function(value, range) {\n      var\n        intRegExp = $.fn.form.settings.regExp.integer,\n        min,\n        max,\n        parts\n      ;\n      if( !range || ['', '..'].indexOf(range) !== -1) {\n        // do nothing\n      }\n      else if(range.indexOf('..') == -1) {\n        if(intRegExp.test(range)) {\n          min = max = range - 0;\n        }\n      }\n      else {\n        parts = range.split('..', 2);\n        if(intRegExp.test(parts[0])) {\n          min = parts[0] - 0;\n        }\n        if(intRegExp.test(parts[1])) {\n          max = parts[1] - 0;\n        }\n      }\n      return (\n        intRegExp.test(value) &&\n        (min === undefined || value >= min) &&\n        (max === undefined || value <= max)\n      );\n    },\n\n    // is valid number (with decimal)\n    decimal: function(value) {\n      return $.fn.form.settings.regExp.decimal.test(value);\n    },\n\n    // is valid number\n    number: function(value) {\n      return $.fn.form.settings.regExp.number.test(value);\n    },\n\n    // is value (case insensitive)\n    is: function(value, text) {\n      text = (typeof text == 'string')\n        ? text.toLowerCase()\n        : text\n      ;\n      value = (typeof value == 'string')\n        ? value.toLowerCase()\n        : value\n      ;\n      return (value == text);\n    },\n\n    // is value\n    isExactly: function(value, text) {\n      return (value == text);\n    },\n\n    // value is not another value (case insensitive)\n    not: function(value, notValue) {\n      value = (typeof value == 'string')\n        ? value.toLowerCase()\n        : value\n      ;\n      notValue = (typeof notValue == 'string')\n        ? notValue.toLowerCase()\n        : notValue\n      ;\n      return (value != notValue);\n    },\n\n    // value is not another value (case sensitive)\n    notExactly: function(value, notValue) {\n      return (value != notValue);\n    },\n\n    // value contains text (insensitive)\n    contains: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text, 'i') ) !== -1);\n    },\n\n    // value contains text (case sensitive)\n    containsExactly: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text) ) !== -1);\n    },\n\n    // value contains text (insensitive)\n    doesntContain: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text, 'i') ) === -1);\n    },\n\n    // value contains text (case sensitive)\n    doesntContainExactly: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text) ) === -1);\n    },\n\n    // is at least string length\n    minLength: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length >= requiredLength)\n        : false\n      ;\n    },\n\n    // see rls notes for 2.0.6 (this is a duplicate of minLength)\n    length: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length >= requiredLength)\n        : false\n      ;\n    },\n\n    // is exactly length\n    exactLength: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length == requiredLength)\n        : false\n      ;\n    },\n\n    // is less than length\n    maxLength: function(value, maxLength) {\n      return (value !== undefined)\n        ? (value.length <= maxLength)\n        : false\n      ;\n    },\n\n    // matches another field\n    match: function(value, identifier) {\n      var\n        $form = $(this),\n        matchingValue\n      ;\n      if( $('[data-validate=\"'+ identifier +'\"]').length > 0 ) {\n        matchingValue = $('[data-validate=\"'+ identifier +'\"]').val();\n      }\n      else if($('#' + identifier).length > 0) {\n        matchingValue = $('#' + identifier).val();\n      }\n      else if($('[name=\"' + identifier +'\"]').length > 0) {\n        matchingValue = $('[name=\"' + identifier + '\"]').val();\n      }\n      else if( $('[name=\"' + identifier +'[]\"]').length > 0 ) {\n        matchingValue = $('[name=\"' + identifier +'[]\"]');\n      }\n      return (matchingValue !== undefined)\n        ? ( value.toString() == matchingValue.toString() )\n        : false\n      ;\n    },\n\n    // different than another field\n    different: function(value, identifier) {\n      // use either id or name of field\n      var\n        $form = $(this),\n        matchingValue\n      ;\n      if( $('[data-validate=\"'+ identifier +'\"]').length > 0 ) {\n        matchingValue = $('[data-validate=\"'+ identifier +'\"]').val();\n      }\n      else if($('#' + identifier).length > 0) {\n        matchingValue = $('#' + identifier).val();\n      }\n      else if($('[name=\"' + identifier +'\"]').length > 0) {\n        matchingValue = $('[name=\"' + identifier + '\"]').val();\n      }\n      else if( $('[name=\"' + identifier +'[]\"]').length > 0 ) {\n        matchingValue = $('[name=\"' + identifier +'[]\"]');\n      }\n      return (matchingValue !== undefined)\n        ? ( value.toString() !== matchingValue.toString() )\n        : false\n      ;\n    },\n\n    creditCard: function(cardNumber, cardTypes) {\n      var\n        cards = {\n          visa: {\n            pattern : /^4/,\n            length  : [16]\n          },\n          amex: {\n            pattern : /^3[47]/,\n            length  : [15]\n          },\n          mastercard: {\n            pattern : /^5[1-5]/,\n            length  : [16]\n          },\n          discover: {\n            pattern : /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,\n            length  : [16]\n          },\n          unionPay: {\n            pattern : /^(62|88)/,\n            length  : [16, 17, 18, 19]\n          },\n          jcb: {\n            pattern : /^35(2[89]|[3-8][0-9])/,\n            length  : [16]\n          },\n          maestro: {\n            pattern : /^(5018|5020|5038|6304|6759|676[1-3])/,\n            length  : [12, 13, 14, 15, 16, 17, 18, 19]\n          },\n          dinersClub: {\n            pattern : /^(30[0-5]|^36)/,\n            length  : [14]\n          },\n          laser: {\n            pattern : /^(6304|670[69]|6771)/,\n            length  : [16, 17, 18, 19]\n          },\n          visaElectron: {\n            pattern : /^(4026|417500|4508|4844|491(3|7))/,\n            length  : [16]\n          }\n        },\n        valid         = {},\n        validCard     = false,\n        requiredTypes = (typeof cardTypes == 'string')\n          ? cardTypes.split(',')\n          : false,\n        unionPay,\n        validation\n      ;\n\n      if(typeof cardNumber !== 'string' || cardNumber.length === 0) {\n        return;\n      }\n\n      // verify card types\n      if(requiredTypes) {\n        $.each(requiredTypes, function(index, type){\n          // verify each card type\n          validation = cards[type];\n          if(validation) {\n            valid = {\n              length  : ($.inArray(cardNumber.length, validation.length) !== -1),\n              pattern : (cardNumber.search(validation.pattern) !== -1)\n            };\n            if(valid.length && valid.pattern) {\n              validCard = true;\n            }\n          }\n        });\n\n        if(!validCard) {\n          return false;\n        }\n      }\n\n      // skip luhn for UnionPay\n      unionPay = {\n        number  : ($.inArray(cardNumber.length, cards.unionPay.length) !== -1),\n        pattern : (cardNumber.search(cards.unionPay.pattern) !== -1)\n      };\n      if(unionPay.number && unionPay.pattern) {\n        return true;\n      }\n\n      // verify luhn, adapted from  <https://gist.github.com/2134376>\n      var\n        length        = cardNumber.length,\n        multiple      = 0,\n        producedValue = [\n          [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n          [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]\n        ],\n        sum           = 0\n      ;\n      while (length--) {\n        sum += producedValue[multiple][parseInt(cardNumber.charAt(length), 10)];\n        multiple ^= 1;\n      }\n      return (sum % 10 === 0 && sum > 0);\n    },\n\n    minCount: function(value, minCount) {\n      if(minCount == 0) {\n        return true;\n      }\n      if(minCount == 1) {\n        return (value !== '');\n      }\n      return (value.split(',').length >= minCount);\n    },\n\n    exactCount: function(value, exactCount) {\n      if(exactCount == 0) {\n        return (value === '');\n      }\n      if(exactCount == 1) {\n        return (value !== '' && value.search(',') === -1);\n      }\n      return (value.split(',').length == exactCount);\n    },\n\n    maxCount: function(value, maxCount) {\n      if(maxCount == 0) {\n        return false;\n      }\n      if(maxCount == 1) {\n        return (value.search(',') === -1);\n      }\n      return (value.split(',').length <= maxCount);\n    }\n  }\n\n};\n\n})( jQuery, window, document );\n"]},"sourceType":"script","hash":"f465725a2f46f42d3f719fce2f3bc95077d17adc"}
