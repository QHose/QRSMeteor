{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"packages/callback-hook/hook_tests.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"packages/callback-hook/hook_tests.js","filename":"packages/callback-hook/hook_tests.js","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/martijn/Documents/GitHub/QRSMeteor","root":"/home/martijn/Documents/GitHub/QRSMeteor","presets":[],"generatorOpts":{"filename":"packages/callback-hook/hook_tests.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/callback-hook/hook_tests.js"}},"code":"Tinytest.add(\"callback-hook - binds to registrar's env by default\", function (test) {\n  var hook = new Hook();\n  var envVar = new Meteor.EnvironmentVariable();\n  envVar.withValue(\"registrar's value\", function () {\n    hook.register(function () {\n      test.equal(envVar.get(), \"registrar's value\");\n    });\n  });\n  envVar.withValue(\"invoker's value\", function () {\n    hook.each(function (callback) {\n      callback();\n    });\n  });\n});\nTinytest.add(\"callback-hook - uses invoker's env with {bindEnvironment: false}\", function (test) {\n  var hook = new Hook({\n    bindEnvironment: false\n  });\n  var envVar = new Meteor.EnvironmentVariable();\n  envVar.withValue(\"registrar's value\", function () {\n    hook.register(function () {\n      test.equal(envVar.get(), \"invoker's value\");\n    });\n  });\n  envVar.withValue(\"invoker's value\", function () {\n    hook.each(function (callback) {\n      callback();\n    });\n  });\n});\nTinytest.add(\"callback-hook - exceptions unhandled with {bindEnvironment: false}\", function (test) {\n  var hook = new Hook({\n    bindEnvironment: false\n  });\n  hook.register(function () {\n    throw new Error(\"Test error\");\n  });\n  hook.each(function (callback) {\n    test.throws(callback, \"Test error\");\n  });\n});\nTinytest.add(\"callback-hook - exceptionHandler used with {bindEnvironment: false}\", function (test) {\n  var exToThrow = new Error(\"Test error\");\n  var thrownEx = null;\n  var hook = new Hook({\n    bindEnvironment: false,\n    exceptionHandler: function (ex) {\n      thrownEx = ex;\n    }\n  });\n  hook.register(function () {\n    throw exToThrow;\n  });\n  hook.each(function (callback) {\n    callback();\n  });\n  test.equal(exToThrow, thrownEx);\n});","map":{"version":3,"sources":["packages/callback-hook/hook_tests.js"],"names":["Tinytest","add","test","hook","Hook","envVar","Meteor","EnvironmentVariable","withValue","register","equal","get","each","callback","bindEnvironment","Error","throws","exToThrow","thrownEx","exceptionHandler","ex"],"mappings":"AAAAA,SAASC,GAAT,CAAa,qDAAb,EAAoE,UAAUC,IAAV,EAAgB;AAClF,MAAIC,OAAO,IAAIC,IAAJ,EAAX;AACA,MAAIC,SAAS,IAAIC,OAAOC,mBAAX,EAAb;AACAF,SAAOG,SAAP,CAAiB,mBAAjB,EAAsC,YAAW;AAC/CL,SAAKM,QAAL,CAAc,YAAW;AACvBP,WAAKQ,KAAL,CAAWL,OAAOM,GAAP,EAAX,EAAyB,mBAAzB;AACD,KAFD;AAGD,GAJD;AAKAN,SAAOG,SAAP,CAAiB,iBAAjB,EAAoC,YAAW;AAC7CL,SAAKS,IAAL,CAAU,UAASC,QAAT,EAAmB;AAC3BA;AACD,KAFD;AAGD,GAJD;AAKD,CAbD;AAeAb,SAASC,GAAT,CAAa,kEAAb,EAAiF,UAAUC,IAAV,EAAgB;AAC/F,MAAIC,OAAO,IAAIC,IAAJ,CAAS;AAAEU,qBAAiB;AAAnB,GAAT,CAAX;AACA,MAAIT,SAAS,IAAIC,OAAOC,mBAAX,EAAb;AACAF,SAAOG,SAAP,CAAiB,mBAAjB,EAAsC,YAAW;AAC/CL,SAAKM,QAAL,CAAc,YAAW;AACvBP,WAAKQ,KAAL,CAAWL,OAAOM,GAAP,EAAX,EAAyB,iBAAzB;AACD,KAFD;AAGD,GAJD;AAKAN,SAAOG,SAAP,CAAiB,iBAAjB,EAAoC,YAAW;AAC7CL,SAAKS,IAAL,CAAU,UAASC,QAAT,EAAmB;AAC3BA;AACD,KAFD;AAGD,GAJD;AAKD,CAbD;AAeAb,SAASC,GAAT,CAAa,oEAAb,EAAmF,UAAUC,IAAV,EAAgB;AACjG,MAAIC,OAAO,IAAIC,IAAJ,CAAS;AAAEU,qBAAiB;AAAnB,GAAT,CAAX;AACAX,OAAKM,QAAL,CAAc,YAAW;AACvB,UAAM,IAAIM,KAAJ,CAAU,YAAV,CAAN;AACD,GAFD;AAGAZ,OAAKS,IAAL,CAAU,UAASC,QAAT,EAAmB;AAC3BX,SAAKc,MAAL,CAAYH,QAAZ,EAAsB,YAAtB;AACD,GAFD;AAGD,CARD;AAUAb,SAASC,GAAT,CAAa,qEAAb,EAAoF,UAAUC,IAAV,EAAgB;AAClG,MAAIe,YAAY,IAAIF,KAAJ,CAAU,YAAV,CAAhB;AACA,MAAIG,WAAW,IAAf;AACA,MAAIf,OAAO,IAAIC,IAAJ,CAAS;AAClBU,qBAAiB,KADC;AAElBK,sBAAkB,UAAUC,EAAV,EAAc;AAAEF,iBAAWE,EAAX;AAAgB;AAFhC,GAAT,CAAX;AAIAjB,OAAKM,QAAL,CAAc,YAAW;AACvB,UAAMQ,SAAN;AACD,GAFD;AAGAd,OAAKS,IAAL,CAAU,UAASC,QAAT,EAAmB;AAC3BA;AACD,GAFD;AAGAX,OAAKQ,KAAL,CAAWO,SAAX,EAAsBC,QAAtB;AACD,CAdD","sourcesContent":["Tinytest.add(\"callback-hook - binds to registrar's env by default\", function (test) {\n  var hook = new Hook();\n  var envVar = new Meteor.EnvironmentVariable;\n  envVar.withValue(\"registrar's value\", function() {\n    hook.register(function() {\n      test.equal(envVar.get(), \"registrar's value\");\n    });\n  });\n  envVar.withValue(\"invoker's value\", function() {\n    hook.each(function(callback) {\n      callback();\n    });\n  });\n});\n\nTinytest.add(\"callback-hook - uses invoker's env with {bindEnvironment: false}\", function (test) {\n  var hook = new Hook({ bindEnvironment: false });\n  var envVar = new Meteor.EnvironmentVariable;\n  envVar.withValue(\"registrar's value\", function() {\n    hook.register(function() {\n      test.equal(envVar.get(), \"invoker's value\");\n    });\n  });\n  envVar.withValue(\"invoker's value\", function() {\n    hook.each(function(callback) {\n      callback();\n    });\n  });\n});\n\nTinytest.add(\"callback-hook - exceptions unhandled with {bindEnvironment: false}\", function (test) {\n  var hook = new Hook({ bindEnvironment: false });\n  hook.register(function() {\n    throw new Error(\"Test error\");\n  });\n  hook.each(function(callback) {\n    test.throws(callback, \"Test error\");\n  });\n});\n\nTinytest.add(\"callback-hook - exceptionHandler used with {bindEnvironment: false}\", function (test) {\n  var exToThrow = new Error(\"Test error\");\n  var thrownEx = null;\n  var hook = new Hook({\n    bindEnvironment: false,\n    exceptionHandler: function (ex) { thrownEx = ex; }\n  });\n  hook.register(function() {\n    throw exToThrow;\n  });\n  hook.each(function(callback) {\n    callback();\n  });\n  test.equal(exToThrow, thrownEx);\n});\n"]},"sourceType":"script","hash":"1fa90716137d7ed389933ae48a8e36931267b680"}
