{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"client/lib/definitions/modules/search.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/lib/definitions/modules/search.js","filename":"client/lib/definitions/modules/search.js","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/martijn/Documents/GitHub/QRSMeteor","root":"/home/martijn/Documents/GitHub/QRSMeteor","generatorOpts":{"filename":"client/lib/definitions/modules/search.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/definitions/modules/search.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\n/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n\n/*!\n * # Semantic UI - Search\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  $.fn.search = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $(this).each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.search.settings, parameters) : $.extend({}, $.fn.search.settings),\n          className = settings.className,\n          metadata = settings.metadata,\n          regExp = settings.regExp,\n          fields = settings.fields,\n          selector = settings.selector,\n          error = settings.error,\n          namespace = settings.namespace,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = namespace + '-module',\n          $module = $(this),\n          $prompt = $module.find(selector.prompt),\n          $searchButton = $module.find(selector.searchButton),\n          $results = $module.find(selector.results),\n          $result = $module.find(selector.result),\n          $category = $module.find(selector.category),\n          element = this,\n          instance = $module.data(moduleNamespace),\n          module;\n      module = {\n        initialize: function () {\n          module.verbose('Initializing module');\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying instance');\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n        bind: {\n          events: function () {\n            module.verbose('Binding events to search');\n\n            if (settings.automatic) {\n              $module.on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input);\n              $prompt.attr('autocomplete', 'off');\n            }\n\n            $module // prompt\n            .on('focus' + eventNamespace, selector.prompt, module.event.focus).on('blur' + eventNamespace, selector.prompt, module.event.blur).on('keydown' + eventNamespace, selector.prompt, module.handleKeyboard) // search button\n            .on('click' + eventNamespace, selector.searchButton, module.query) // results\n            .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown).on('mouseup' + eventNamespace, selector.results, module.event.result.mouseup).on('click' + eventNamespace, selector.result, module.event.result.click);\n          }\n        },\n        determine: {\n          searchFields: function () {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if (parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n        event: {\n          input: function () {\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.query, settings.searchDelay);\n          },\n          focus: function () {\n            module.set.focus();\n\n            if (module.has.minimumCharacters()) {\n              module.query();\n\n              if (module.can.show()) {\n                module.showResults();\n              }\n            }\n          },\n          blur: function (event) {\n            var pageLostFocus = document.activeElement === this,\n                callback = function () {\n              module.cancel.query();\n              module.remove.focus();\n              module.timer = setTimeout(module.hideResults, settings.hideDelay);\n            };\n\n            if (pageLostFocus) {\n              return;\n            }\n\n            if (module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module.one('click', selector.results, function (event) {\n                if (!module.is.animating() && !module.is.hidden()) {\n                  callback();\n                }\n              });\n            } else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function () {\n              module.resultsClicked = true;\n            },\n            mouseup: function () {\n              module.resultsClicked = false;\n            },\n            click: function (event) {\n              module.debug('Search result selected');\n              var $result = $(this),\n                  $title = $result.find(selector.title).eq(0),\n                  $link = $result.find('a[href]').eq(0),\n                  href = $link.attr('href') || false,\n                  target = $link.attr('target') || false,\n                  title = $title.html(),\n                  // title is used for result lookup\n              value = $title.length > 0 ? $title.text() : false,\n                  results = module.get.results(),\n                  result = $result.data(metadata.result) || module.get.result(value, results),\n                  returnedValue;\n\n              if ($.isFunction(settings.onSelect)) {\n                if (settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  return;\n                }\n              }\n\n              module.hideResults();\n\n              if (value) {\n                module.set.value(value);\n              }\n\n              if (href) {\n                module.verbose('Opening search link found in result', $link);\n\n                if (target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                } else {\n                  window.location.href = href;\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function (event) {\n          var // force selector refresh\n          $result = $module.find(selector.result),\n              $category = $module.find(selector.category),\n              currentIndex = $result.index($result.filter('.' + className.active)),\n              resultSize = $result.length,\n              keyCode = event.which,\n              keys = {\n            backspace: 8,\n            enter: 13,\n            escape: 27,\n            upArrow: 38,\n            downArrow: 40\n          },\n              newIndex; // search shortcuts\n\n          if (keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.trigger.blur();\n          }\n\n          if (module.is.visible()) {\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n\n              if ($result.filter('.' + className.active).length > 0) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            } else if (keyCode == keys.upArrow) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = currentIndex - 1 < 0 ? currentIndex : currentIndex - 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            } else if (keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = currentIndex + 1 >= resultSize ? currentIndex : currentIndex + 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            }\n          } else {\n            // query shortcuts\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n        setup: {\n          api: function () {\n            var apiSettings = {\n              debug: settings.debug,\n              on: false,\n              cache: 'local',\n              action: 'search',\n              onError: module.error\n            },\n                searchHTML;\n            module.verbose('First request, initializing API');\n            $module.api(apiSettings);\n          }\n        },\n        can: {\n          useAPI: function () {\n            return $.fn.api !== undefined;\n          },\n          show: function () {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function () {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n        is: {\n          animating: function () {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function () {\n            return $results.hasClass(className.hidden);\n          },\n          empty: function () {\n            return $results.html() === '';\n          },\n          visible: function () {\n            return $results.filter(':visible').length > 0;\n          },\n          focused: function () {\n            return $prompt.filter(':focus').length > 0;\n          }\n        },\n        trigger: {\n          blur: function () {\n            var events = document.createEvent('HTMLEvents'),\n                promptElement = $prompt[0];\n\n            if (promptElement) {\n              module.verbose('Triggering native blur event');\n              events.initEvent('blur', false, false);\n              promptElement.dispatchEvent(events);\n            }\n          }\n        },\n        get: {\n          inputEvent: function () {\n            var prompt = $prompt[0],\n                inputEvent = prompt !== undefined && prompt.oninput !== undefined ? 'input' : prompt !== undefined && prompt.onpropertychange !== undefined ? 'propertychange' : 'keyup';\n            return inputEvent;\n          },\n          value: function () {\n            return $prompt.val();\n          },\n          results: function () {\n            var results = $module.data(metadata.results);\n            return results;\n          },\n          result: function (value, results) {\n            var lookupFields = ['title', 'id'],\n                result = false;\n            value = value !== undefined ? value : module.get.value();\n            results = results !== undefined ? results : module.get.results();\n\n            if (settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function (index, category) {\n                if ($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0]; // don't continue searching if a result is found\n\n                  if (result) {\n                    return false;\n                  }\n                }\n              });\n            } else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n\n            return result || false;\n          }\n        },\n        set: {\n          focus: function () {\n            $module.addClass(className.focus);\n          },\n          loading: function () {\n            $module.addClass(className.loading);\n          },\n          value: function (value) {\n            module.verbose('Setting search input value', value);\n            $prompt.val(value);\n          },\n          type: function (type) {\n            type = type || settings.type;\n\n            if (settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function () {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n        remove: {\n          loading: function () {\n            $module.removeClass(className.loading);\n          },\n          focus: function () {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function () {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n        query: function () {\n          var searchTerm = module.get.value(),\n              cache = module.read.cache(searchTerm);\n\n          if (module.has.minimumCharacters()) {\n            if (cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n            } else {\n              module.debug('Querying for', searchTerm);\n\n              if ($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n              } else if (module.can.useAPI()) {\n                module.search.remote(searchTerm);\n              } else {\n                module.error(error.source);\n              }\n            }\n\n            settings.onSearchQuery.call(element, searchTerm);\n          } else {\n            module.hideResults();\n          }\n        },\n        search: {\n          local: function (searchTerm) {\n            var results = module.search.object(searchTerm, settings.content),\n                searchHTML;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned local search results', results);\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html: searchHTML,\n              results: results\n            });\n          },\n          remote: function (searchTerm) {\n            var apiSettings = {\n              onSuccess: function (response) {\n                module.parse.response.call(element, response, searchTerm);\n              },\n              onFailure: function () {\n                module.displayMessage(error.serverError);\n              },\n              urlData: {\n                query: searchTerm\n              }\n            };\n\n            if (!$module.api('get request')) {\n              module.setup.api();\n            }\n\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.debug('Executing search', apiSettings);\n            module.cancel.query();\n            $module.api('setting', apiSettings).api('query');\n          },\n          object: function (searchTerm, source, searchFields) {\n            var results = [],\n                fuzzyResults = [],\n                searchExp = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n                matchRegExp = new RegExp(regExp.beginsWith + searchExp, 'i'),\n                // avoid duplicates when pushing results\n            addResult = function (array, result) {\n              var notResult = $.inArray(result, results) == -1,\n                  notFuzzyResult = $.inArray(result, fuzzyResults) == -1;\n\n              if (notResult && notFuzzyResult) {\n                array.push(result);\n              }\n            };\n\n            source = source || settings.source;\n            searchFields = searchFields !== undefined ? searchFields : settings.searchFields; // search fields should be array to loop correctly\n\n            if (!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            } // exit conditions if no source\n\n\n            if (source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            } // iterate through search fields looking for matches\n\n\n            $.each(searchFields, function (index, field) {\n              $.each(source, function (label, content) {\n                var fieldExists = typeof content[field] == 'string';\n\n                if (fieldExists) {\n                  if (content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  } else if (settings.searchFullText && module.fuzzySearch(searchTerm, content[field])) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            return $.merge(results, fuzzyResults);\n          }\n        },\n        fuzzySearch: function (query, term) {\n          var termLength = term.length,\n              queryLength = query.length;\n\n          if (typeof query !== 'string') {\n            return false;\n          }\n\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (queryLength > termLength) {\n            return false;\n          }\n\n          if (queryLength === termLength) {\n            return query === term;\n          }\n\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var queryCharacter = query.charCodeAt(characterIndex);\n\n            while (nextCharacterIndex < termLength) {\n              if (term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n\n            return false;\n          }\n\n          return true;\n        },\n        parse: {\n          response: function (response, searchTerm) {\n            var searchHTML = module.generateResults(response);\n            module.verbose('Parsing server response', response);\n\n            if (response !== undefined) {\n              if (searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html: searchHTML,\n                  results: response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n        cancel: {\n          query: function () {\n            if (module.can.useAPI()) {\n              $module.api('abort');\n            }\n          }\n        },\n        has: {\n          minimumCharacters: function () {\n            var searchTerm = module.get.value(),\n                numCharacters = searchTerm.length;\n            return numCharacters >= settings.minCharacters;\n          }\n        },\n        clear: {\n          cache: function (value) {\n            var cache = $module.data(metadata.cache);\n\n            if (!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            } else if (value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        read: {\n          cache: function (name) {\n            var cache = $module.data(metadata.cache);\n\n            if (settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (0, _typeof2.default)(cache) == 'object' && cache[name] !== undefined ? cache[name] : false;\n            }\n\n            return false;\n          }\n        },\n        create: {\n          id: function (resultIndex, categoryIndex) {\n            var resultID = resultIndex + 1,\n                // not zero indexed\n            categoryID = categoryIndex + 1,\n                firstCharCode,\n                letterID,\n                id;\n\n            if (categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            } else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n\n            return id;\n          },\n          results: function () {\n            if ($results.length === 0) {\n              $results = $('<div />').addClass(className.results).appendTo($module);\n            }\n          }\n        },\n        inject: {\n          result: function (result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var $selectedResult = categoryIndex !== undefined ? $results.children().eq(categoryIndex).children(selector.result).eq(resultIndex) : $results.children(selector.result).eq(resultIndex);\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult.data(metadata.result, result);\n          },\n          id: function (results) {\n            module.debug('Injecting unique ids into results');\n            var // since results may be object, we must use counters\n            categoryIndex = 0,\n                resultIndex = 0;\n\n            if (settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function (index, category) {\n                resultIndex = 0;\n                $.each(category.results, function (index, value) {\n                  var result = category.results[index];\n\n                  if (result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            } else {\n              // top level\n              $.each(results, function (index, value) {\n                var result = results[index];\n\n                if (result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n\n            return results;\n          }\n        },\n        save: {\n          results: function (results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n        write: {\n          cache: function (name, value) {\n            var cache = $module.data(metadata.cache) !== undefined ? $module.data(metadata.cache) : {};\n\n            if (settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        addResults: function (html) {\n          if ($.isFunction(settings.onResultsAdd)) {\n            if (settings.onResultsAdd.call($results, html) === false) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n\n          $results.html(html);\n\n          if (module.can.show()) {\n            module.showResults();\n          }\n        },\n        showResults: function () {\n          if (!module.is.visible()) {\n            if (module.can.transition()) {\n              module.debug('Showing results with css animations');\n              $results.transition({\n                animation: settings.transition + ' in',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                queue: true\n              });\n            } else {\n              module.debug('Showing results with javascript');\n              $results.stop().fadeIn(settings.duration, settings.easing);\n            }\n\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function () {\n          if (module.is.visible()) {\n            if (module.can.transition()) {\n              module.debug('Hiding results with css animations');\n              $results.transition({\n                animation: settings.transition + ' out',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                queue: true\n              });\n            } else {\n              module.debug('Hiding results with javascript');\n              $results.stop().fadeOut(settings.duration, settings.easing);\n            }\n\n            settings.onResultsClose.call($results);\n          }\n        },\n        generateResults: function (response) {\n          module.debug('Generating html from response', response);\n          var template = settings.templates[settings.type],\n              isProperObject = $.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results]),\n              isProperArray = $.isArray(response[fields.results]) && response[fields.results].length > 0,\n              html = '';\n\n          if (isProperObject || isProperArray) {\n            if (settings.maxResults > 0) {\n              if (isProperObject) {\n                if (settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              } else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n\n            if ($.isFunction(template)) {\n              html = template(response, fields);\n            } else {\n              module.error(error.noTemplate, false);\n            }\n          } else {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n\n          settings.onResults.call(element, response);\n          return html;\n        },\n        displayMessage: function (text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults(settings.templates.message(text, type));\n          return settings.templates.message(text, type);\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.search.settings = {\n    name: 'Search',\n    namespace: 'search',\n    debug: false,\n    verbose: false,\n    performance: true,\n    type: 'standard',\n    // template to use (specified in settings.templates)\n    minCharacters: 1,\n    // minimum characters required to search\n    apiSettings: false,\n    // API config\n    source: false,\n    // object to search\n    searchFields: ['title', 'description'],\n    // fields to search\n    displayField: '',\n    // field to display in standard results template\n    searchFullText: true,\n    // whether to include fuzzy results in local search\n    automatic: true,\n    // whether to add events to prompt automatically\n    hideDelay: 0,\n    // delay before hiding menu after blur\n    searchDelay: 200,\n    // delay before searching\n    maxResults: 7,\n    // maximum results returned from local\n    cache: true,\n    // whether to store lookups in local cache\n    // transition settings\n    transition: 'scale',\n    duration: 200,\n    easing: 'easeOutExpo',\n    // callbacks\n    onSelect: false,\n    onResultsAdd: false,\n    onSearchQuery: function (query) {},\n    onResults: function (response) {},\n    onResultsOpen: function () {},\n    onResultsClose: function () {},\n    className: {\n      animating: 'animating',\n      active: 'active',\n      empty: 'empty',\n      focus: 'focus',\n      hidden: 'hidden',\n      loading: 'loading',\n      results: 'results',\n      pressed: 'down'\n    },\n    error: {\n      source: 'Cannot search. No source used, and Semantic API module was not included',\n      noResults: 'Your search returned no results',\n      logging: 'Error in debug logging, exiting.',\n      noEndpoint: 'No search endpoint was specified',\n      noTemplate: 'A valid template name was not specified.',\n      serverError: 'There was an issue querying the server.',\n      maxResults: 'Results must be an array to use maxResults setting',\n      method: 'The method you called is not defined.'\n    },\n    metadata: {\n      cache: 'cache',\n      results: 'results',\n      result: 'result'\n    },\n    regExp: {\n      escape: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n      beginsWith: '(?:\\s|^)'\n    },\n    // maps api response attributes to internal representation\n    fields: {\n      categories: 'results',\n      // array of categories (category view)\n      categoryName: 'name',\n      // name of category (category view)\n      categoryResults: 'results',\n      // array of results (category view)\n      description: 'description',\n      // result description\n      image: 'image',\n      // result image\n      price: 'price',\n      // result price\n      results: 'results',\n      // array of results (standard)\n      title: 'title',\n      // result title\n      url: 'url',\n      // result url\n      action: 'action',\n      // \"view more\" object name\n      actionText: 'text',\n      // \"view more\" text\n      actionURL: 'url' // \"view more\" url\n\n    },\n    selector: {\n      prompt: '.prompt',\n      searchButton: '.search.button',\n      results: '.results',\n      category: '.category',\n      result: '.result',\n      title: '.title, .name'\n    },\n    templates: {\n      escape: function (string) {\n        var badChars = /[&<>\"'`]/g,\n            shouldEscape = /[&<>\"'`]/,\n            escape = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n            escapedChar = function (chr) {\n          return escape[chr];\n        };\n\n        if (shouldEscape.test(string)) {\n          return string.replace(badChars, escapedChar);\n        }\n\n        return string;\n      },\n      message: function (message, type) {\n        var html = '';\n\n        if (message !== undefined && type !== undefined) {\n          html += '' + '<div class=\"message ' + type + '\">'; // message type\n\n          if (type == 'empty') {\n            html += '' + '<div class=\"header\">No Results</div class=\"header\">' + '<div class=\"description\">' + message + '</div class=\"description\">';\n          } else {\n            html += ' <div class=\"description\">' + message + '</div>';\n          }\n\n          html += '</div>';\n        }\n\n        return html;\n      },\n      category: function (response, fields) {\n        var html = '',\n            escape = $.fn.search.settings.templates.escape;\n\n        if (response[fields.categoryResults] !== undefined) {\n          // each category\n          $.each(response[fields.categoryResults], function (index, category) {\n            if (category[fields.results] !== undefined && category.results.length > 0) {\n              html += '<div class=\"category\">';\n\n              if (category[fields.categoryName] !== undefined) {\n                html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n              } // each item inside category\n\n\n              $.each(category.results, function (index, result) {\n                if (result[fields.url]) {\n                  html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n                } else {\n                  html += '<a class=\"result\">';\n                }\n\n                if (result[fields.image] !== undefined) {\n                  html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n                }\n\n                html += '<div class=\"content\">';\n\n                if (result[fields.price] !== undefined) {\n                  html += '<div class=\"price\">' + result[fields.price] + '</div>';\n                }\n\n                if (result[fields.title] !== undefined) {\n                  html += '<div class=\"title\">' + result[fields.title] + '</div>';\n                }\n\n                if (result[fields.description] !== undefined) {\n                  html += '<div class=\"description\">' + result[fields.description] + '</div>';\n                }\n\n                html += '' + '</div>';\n                html += '</a>';\n              });\n              html += '' + '</div>';\n            }\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      },\n      standard: function (response, fields) {\n        var html = '';\n\n        if (response[fields.results] !== undefined) {\n          // each result\n          $.each(response[fields.results], function (index, result) {\n            if (result[fields.url]) {\n              html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n            } else {\n              html += '<a class=\"result\">';\n            }\n\n            if (result[fields.image] !== undefined) {\n              html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n            }\n\n            html += '<div class=\"content\">';\n\n            if (result[fields.price] !== undefined) {\n              html += '<div class=\"price\">' + result[fields.price] + '</div>';\n            }\n\n            if (result[fields.title] !== undefined) {\n              html += '<div class=\"title\">' + result[fields.title] + '</div>';\n            }\n\n            if (result[fields.description] !== undefined) {\n              html += '<div class=\"description\">' + result[fields.description] + '</div>';\n            }\n\n            html += '' + '</div>';\n            html += '</a>';\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      }\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["client/lib/definitions/modules/search.js"],"names":["$","window","document","undefined","fn","search","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","className","metadata","regExp","fields","error","namespace","eventNamespace","moduleNamespace","$module","$prompt","find","prompt","$searchButton","searchButton","$results","results","$result","result","$category","category","element","instance","data","module","initialize","verbose","determine","searchFields","bind","events","set","type","create","instantiate","destroy","off","removeData","automatic","on","get","inputEvent","event","input","attr","focus","blur","handleKeyboard","mousedown","mouseup","click","clearTimeout","timer","setTimeout","searchDelay","has","minimumCharacters","can","show","showResults","pageLostFocus","activeElement","callback","cancel","remove","hideResults","hideDelay","resultsClicked","debug","one","is","animating","hidden","$title","title","eq","$link","href","target","html","value","length","text","isFunction","onSelect","ctrlKey","open","location","currentIndex","index","filter","active","resultSize","keyCode","which","keys","backspace","enter","escape","upArrow","downArrow","newIndex","trigger","visible","preventDefault","removeClass","addClass","closest","buttonPressed","buttonFocus","setup","api","apiSettings","cache","action","onError","searchHTML","useAPI","focused","empty","transition","hasClass","createEvent","promptElement","initEvent","dispatchEvent","oninput","onpropertychange","val","lookupFields","isArray","object","loading","pressed","searchTerm","read","save","addResults","inject","id","source","local","remote","onSearchQuery","content","generateResults","write","onSuccess","response","parse","onFailure","displayMessage","serverError","urlData","fuzzyResults","searchExp","toString","replace","matchRegExp","RegExp","beginsWith","addResult","array","notResult","inArray","notFuzzyResult","push","field","label","fieldExists","searchFullText","fuzzySearch","merge","term","termLength","queryLength","toLowerCase","characterIndex","nextCharacterIndex","queryCharacter","charCodeAt","numCharacters","minCharacters","clear","name","resultIndex","categoryIndex","resultID","categoryID","firstCharCode","letterID","String","fromCharCode","appendTo","$selectedResult","children","onResultsAdd","animation","duration","queue","stop","fadeIn","easing","onResultsOpen","fadeOut","onResultsClose","template","templates","isProperObject","isEmptyObject","isProperArray","maxResults","noTemplate","noResults","onResults","message","setting","internal","log","Function","prototype","console","info","apply","currentTime","executionTime","previousTime","display","totalTime","group","table","groupCollapsed","groupEnd","invoke","passedArguments","context","maxDepth","found","split","depth","camelCaseValue","charAt","toUpperCase","displayField","logging","noEndpoint","method","categories","categoryName","categoryResults","description","image","price","url","actionText","actionURL","string","badChars","shouldEscape","escapedChar","chr","test","standard","jQuery"],"mappings":"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","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.8\n*/\n/*!\n * # Semantic UI - Search\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n\"use strict\";\n\n$.fn.search = function(parameters) {\n  var\n    $allModules     = $(this),\n    moduleSelector  = $allModules.selector || '',\n\n    time            = new Date().getTime(),\n    performance     = [],\n\n    query           = arguments[0],\n    methodInvoked   = (typeof query == 'string'),\n    queryArguments  = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n  $(this)\n    .each(function() {\n      var\n        settings          = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.search.settings, parameters)\n          : $.extend({}, $.fn.search.settings),\n\n        className       = settings.className,\n        metadata        = settings.metadata,\n        regExp          = settings.regExp,\n        fields          = settings.fields,\n        selector        = settings.selector,\n        error           = settings.error,\n        namespace       = settings.namespace,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = namespace + '-module',\n\n        $module         = $(this),\n        $prompt         = $module.find(selector.prompt),\n        $searchButton   = $module.find(selector.searchButton),\n        $results        = $module.find(selector.results),\n        $result         = $module.find(selector.result),\n        $category       = $module.find(selector.category),\n\n        element         = this,\n        instance        = $module.data(moduleNamespace),\n\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.verbose('Initializing module');\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n        destroy: function() {\n          module.verbose('Destroying instance');\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding events to search');\n            if(settings.automatic) {\n              $module\n                .on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input)\n              ;\n              $prompt\n                .attr('autocomplete', 'off')\n              ;\n            }\n            $module\n              // prompt\n              .on('focus'     + eventNamespace, selector.prompt, module.event.focus)\n              .on('blur'      + eventNamespace, selector.prompt, module.event.blur)\n              .on('keydown'   + eventNamespace, selector.prompt, module.handleKeyboard)\n              // search button\n              .on('click'     + eventNamespace, selector.searchButton, module.query)\n              // results\n              .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown)\n              .on('mouseup'   + eventNamespace, selector.results, module.event.result.mouseup)\n              .on('click'     + eventNamespace, selector.result,  module.event.result.click)\n            ;\n          }\n        },\n\n        determine: {\n          searchFields: function() {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if(parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n\n        event: {\n          input: function() {\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.query, settings.searchDelay);\n          },\n          focus: function() {\n            module.set.focus();\n            if( module.has.minimumCharacters() ) {\n              module.query();\n              if( module.can.show() ) {\n                module.showResults();\n              }\n            }\n          },\n          blur: function(event) {\n            var\n              pageLostFocus = (document.activeElement === this),\n              callback      = function() {\n                module.cancel.query();\n                module.remove.focus();\n                module.timer = setTimeout(module.hideResults, settings.hideDelay);\n              }\n            ;\n            if(pageLostFocus) {\n              return;\n            }\n            if(module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module\n                .one('click', selector.results, function(event) {\n                  if( !module.is.animating() && !module.is.hidden() ) {\n                    callback();\n                  }\n                })\n              ;\n            }\n            else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function() {\n              module.resultsClicked = true;\n            },\n            mouseup: function() {\n              module.resultsClicked = false;\n            },\n            click: function(event) {\n              module.debug('Search result selected');\n              var\n                $result = $(this),\n                $title  = $result.find(selector.title).eq(0),\n                $link   = $result.find('a[href]').eq(0),\n                href    = $link.attr('href')   || false,\n                target  = $link.attr('target') || false,\n                title   = $title.html(),\n                // title is used for result lookup\n                value   = ($title.length > 0)\n                  ? $title.text()\n                  : false,\n                results = module.get.results(),\n                result  = $result.data(metadata.result) || module.get.result(value, results),\n                returnedValue\n              ;\n              if( $.isFunction(settings.onSelect) ) {\n                if(settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  return;\n                }\n              }\n              module.hideResults();\n              if(value) {\n                module.set.value(value);\n              }\n              if(href) {\n                module.verbose('Opening search link found in result', $link);\n                if(target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                }\n                else {\n                  window.location.href = (href);\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function(event) {\n          var\n            // force selector refresh\n            $result      = $module.find(selector.result),\n            $category    = $module.find(selector.category),\n            currentIndex = $result.index( $result.filter('.' + className.active) ),\n            resultSize   = $result.length,\n\n            keyCode      = event.which,\n            keys         = {\n              backspace : 8,\n              enter     : 13,\n              escape    : 27,\n              upArrow   : 38,\n              downArrow : 40\n            },\n            newIndex\n          ;\n          // search shortcuts\n          if(keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.trigger.blur();\n          }\n          if( module.is.visible() ) {\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n              if( $result.filter('.' + className.active).length > 0 ) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            }\n            else if(keyCode == keys.upArrow) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = (currentIndex - 1 < 0)\n                ? currentIndex\n                : currentIndex - 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n            else if(keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = (currentIndex + 1 >= resultSize)\n                ? currentIndex\n                : currentIndex + 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n          }\n          else {\n            // query shortcuts\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n\n        setup: {\n          api: function() {\n            var\n              apiSettings = {\n                debug     : settings.debug,\n                on        : false,\n                cache     : 'local',\n                action    : 'search',\n                onError   : module.error\n              },\n              searchHTML\n            ;\n            module.verbose('First request, initializing API');\n            $module.api(apiSettings);\n          }\n        },\n\n        can: {\n          useAPI: function() {\n            return $.fn.api !== undefined;\n          },\n          show: function() {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function() {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n\n        is: {\n          animating: function() {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function() {\n            return $results.hasClass(className.hidden);\n          },\n          empty: function() {\n            return ($results.html() === '');\n          },\n          visible: function() {\n            return ($results.filter(':visible').length > 0);\n          },\n          focused: function() {\n            return ($prompt.filter(':focus').length > 0);\n          }\n        },\n\n        trigger: {\n          blur: function() {\n            var\n              events        = document.createEvent('HTMLEvents'),\n              promptElement = $prompt[0]\n            ;\n            if(promptElement) {\n              module.verbose('Triggering native blur event');\n              events.initEvent('blur', false, false);\n              promptElement.dispatchEvent(events);\n            }\n          }\n        },\n\n        get: {\n          inputEvent: function() {\n            var\n              prompt = $prompt[0],\n              inputEvent   = (prompt !== undefined && prompt.oninput !== undefined)\n                ? 'input'\n                : (prompt !== undefined && prompt.onpropertychange !== undefined)\n                  ? 'propertychange'\n                  : 'keyup'\n            ;\n            return inputEvent;\n          },\n          value: function() {\n            return $prompt.val();\n          },\n          results: function() {\n            var\n              results = $module.data(metadata.results)\n            ;\n            return results;\n          },\n          result: function(value, results) {\n            var\n              lookupFields = ['title', 'id'],\n              result       = false\n            ;\n            value = (value !== undefined)\n              ? value\n              : module.get.value()\n            ;\n            results = (results !== undefined)\n              ? results\n              : module.get.results()\n            ;\n            if(settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function(index, category) {\n                if($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0];\n                  // don't continue searching if a result is found\n                  if(result) {\n                    return false;\n                  }\n                }\n              });\n            }\n            else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n            return result || false;\n          },\n        },\n\n        set: {\n          focus: function() {\n            $module.addClass(className.focus);\n          },\n          loading: function() {\n            $module.addClass(className.loading);\n          },\n          value: function(value) {\n            module.verbose('Setting search input value', value);\n            $prompt\n              .val(value)\n            ;\n          },\n          type: function(type) {\n            type = type || settings.type;\n            if(settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function() {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n\n        remove: {\n          loading: function() {\n            $module.removeClass(className.loading);\n          },\n          focus: function() {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function() {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n\n        query: function() {\n          var\n            searchTerm = module.get.value(),\n            cache = module.read.cache(searchTerm)\n          ;\n          if( module.has.minimumCharacters() )  {\n            if(cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n            }\n            else {\n              module.debug('Querying for', searchTerm);\n              if($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n              }\n              else if( module.can.useAPI() ) {\n                module.search.remote(searchTerm);\n              }\n              else {\n                module.error(error.source);\n              }\n            }\n            settings.onSearchQuery.call(element, searchTerm);\n          }\n          else {\n            module.hideResults();\n          }\n        },\n\n        search: {\n          local: function(searchTerm) {\n            var\n              results = module.search.object(searchTerm, settings.content),\n              searchHTML\n            ;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned local search results', results);\n\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html    : searchHTML,\n              results : results\n            });\n          },\n          remote: function(searchTerm) {\n            var\n              apiSettings = {\n                onSuccess : function(response) {\n                  module.parse.response.call(element, response, searchTerm);\n                },\n                onFailure: function() {\n                  module.displayMessage(error.serverError);\n                },\n                urlData: {\n                  query: searchTerm\n                }\n              }\n            ;\n            if( !$module.api('get request') ) {\n              module.setup.api();\n            }\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.debug('Executing search', apiSettings);\n            module.cancel.query();\n            $module\n              .api('setting', apiSettings)\n              .api('query')\n            ;\n          },\n          object: function(searchTerm, source, searchFields) {\n            var\n              results      = [],\n              fuzzyResults = [],\n              searchExp    = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n              matchRegExp  = new RegExp(regExp.beginsWith + searchExp, 'i'),\n\n              // avoid duplicates when pushing results\n              addResult = function(array, result) {\n                var\n                  notResult      = ($.inArray(result, results) == -1),\n                  notFuzzyResult = ($.inArray(result, fuzzyResults) == -1)\n                ;\n                if(notResult && notFuzzyResult) {\n                  array.push(result);\n                }\n              }\n            ;\n            source = source || settings.source;\n            searchFields = (searchFields !== undefined)\n              ? searchFields\n              : settings.searchFields\n            ;\n\n            // search fields should be array to loop correctly\n            if(!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            }\n\n            // exit conditions if no source\n            if(source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            }\n\n            // iterate through search fields looking for matches\n            $.each(searchFields, function(index, field) {\n              $.each(source, function(label, content) {\n                var\n                  fieldExists = (typeof content[field] == 'string')\n                ;\n                if(fieldExists) {\n                  if( content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  }\n                  else if(settings.searchFullText && module.fuzzySearch(searchTerm, content[field]) ) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            return $.merge(results, fuzzyResults);\n          }\n        },\n\n        fuzzySearch: function(query, term) {\n          var\n            termLength  = term.length,\n            queryLength = query.length\n          ;\n          if(typeof query !== 'string') {\n            return false;\n          }\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(queryLength > termLength) {\n            return false;\n          }\n          if(queryLength === termLength) {\n            return (query === term);\n          }\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var\n              queryCharacter = query.charCodeAt(characterIndex)\n            ;\n            while(nextCharacterIndex < termLength) {\n              if(term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n            return false;\n          }\n          return true;\n        },\n\n        parse: {\n          response: function(response, searchTerm) {\n            var\n              searchHTML = module.generateResults(response)\n            ;\n            module.verbose('Parsing server response', response);\n            if(response !== undefined) {\n              if(searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html    : searchHTML,\n                  results : response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n\n        cancel: {\n          query: function() {\n            if( module.can.useAPI() ) {\n              $module.api('abort');\n            }\n          }\n        },\n\n        has: {\n          minimumCharacters: function() {\n            var\n              searchTerm    = module.get.value(),\n              numCharacters = searchTerm.length\n            ;\n            return (numCharacters >= settings.minCharacters);\n          }\n        },\n\n        clear: {\n          cache: function(value) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            }\n            else if(value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n\n        read: {\n          cache: function(name) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (typeof cache == 'object') && (cache[name] !== undefined)\n                ? cache[name]\n                : false\n              ;\n            }\n            return false;\n          }\n        },\n\n        create: {\n          id: function(resultIndex, categoryIndex) {\n            var\n              resultID      = (resultIndex + 1), // not zero indexed\n              categoryID    = (categoryIndex + 1),\n              firstCharCode,\n              letterID,\n              id\n            ;\n            if(categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id          = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            }\n            else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n            return id;\n          },\n          results: function() {\n            if($results.length === 0) {\n              $results = $('<div />')\n                .addClass(className.results)\n                .appendTo($module)\n              ;\n            }\n          }\n        },\n\n        inject: {\n          result: function(result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var\n              $selectedResult = (categoryIndex !== undefined)\n                ? $results\n                    .children().eq(categoryIndex)\n                      .children(selector.result).eq(resultIndex)\n                : $results\n                    .children(selector.result).eq(resultIndex)\n            ;\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult\n              .data(metadata.result, result)\n            ;\n          },\n          id: function(results) {\n            module.debug('Injecting unique ids into results');\n            var\n              // since results may be object, we must use counters\n              categoryIndex = 0,\n              resultIndex   = 0\n            ;\n            if(settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function(index, category) {\n                resultIndex = 0;\n                $.each(category.results, function(index, value) {\n                  var\n                    result = category.results[index]\n                  ;\n                  if(result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            }\n            else {\n              // top level\n              $.each(results, function(index, value) {\n                var\n                  result = results[index]\n                ;\n                if(result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n            return results;\n          }\n        },\n\n        save: {\n          results: function(results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n\n        write: {\n          cache: function(name, value) {\n            var\n              cache = ($module.data(metadata.cache) !== undefined)\n                ? $module.data(metadata.cache)\n                : {}\n            ;\n            if(settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module\n                .data(metadata.cache, cache)\n              ;\n            }\n          }\n        },\n\n        addResults: function(html) {\n          if( $.isFunction(settings.onResultsAdd) ) {\n            if( settings.onResultsAdd.call($results, html) === false ) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n          $results\n            .html(html)\n          ;\n          if( module.can.show() ) {\n            module.showResults();\n          }\n        },\n\n        showResults: function() {\n          if(!module.is.visible()) {\n            if( module.can.transition() ) {\n              module.debug('Showing results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' in',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Showing results with javascript');\n              $results\n                .stop()\n                .fadeIn(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function() {\n          if( module.is.visible() ) {\n            if( module.can.transition() ) {\n              module.debug('Hiding results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' out',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Hiding results with javascript');\n              $results\n                .stop()\n                .fadeOut(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsClose.call($results);\n          }\n        },\n\n        generateResults: function(response) {\n          module.debug('Generating html from response', response);\n          var\n            template       = settings.templates[settings.type],\n            isProperObject = ($.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results])),\n            isProperArray  = ($.isArray(response[fields.results]) && response[fields.results].length > 0),\n            html           = ''\n          ;\n          if(isProperObject || isProperArray ) {\n            if(settings.maxResults > 0) {\n              if(isProperObject) {\n                if(settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              }\n              else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n            if($.isFunction(template)) {\n              html = template(response, fields);\n            }\n            else {\n              module.error(error.noTemplate, false);\n            }\n          }\n          else {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n          settings.onResults.call(element, response);\n          return html;\n        },\n\n        displayMessage: function(text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults( settings.templates.message(text, type) );\n          return settings.templates.message(text, type);\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.search.settings = {\n\n  name           : 'Search',\n  namespace      : 'search',\n\n  debug          : false,\n  verbose        : false,\n  performance    : true,\n\n  type           : 'standard',\n  // template to use (specified in settings.templates)\n\n  minCharacters  : 1,\n  // minimum characters required to search\n\n  apiSettings    : false,\n  // API config\n\n  source         : false,\n  // object to search\n\n  searchFields   : [\n    'title',\n    'description'\n  ],\n  // fields to search\n\n  displayField   : '',\n  // field to display in standard results template\n\n  searchFullText : true,\n  // whether to include fuzzy results in local search\n\n  automatic      : true,\n  // whether to add events to prompt automatically\n\n  hideDelay      : 0,\n  // delay before hiding menu after blur\n\n  searchDelay    : 200,\n  // delay before searching\n\n  maxResults     : 7,\n  // maximum results returned from local\n\n  cache          : true,\n  // whether to store lookups in local cache\n\n  // transition settings\n  transition     : 'scale',\n  duration       : 200,\n  easing         : 'easeOutExpo',\n\n  // callbacks\n  onSelect       : false,\n  onResultsAdd   : false,\n\n  onSearchQuery  : function(query){},\n  onResults      : function(response){},\n\n  onResultsOpen  : function(){},\n  onResultsClose : function(){},\n\n  className: {\n    animating : 'animating',\n    active    : 'active',\n    empty     : 'empty',\n    focus     : 'focus',\n    hidden    : 'hidden',\n    loading   : 'loading',\n    results   : 'results',\n    pressed   : 'down'\n  },\n\n  error : {\n    source      : 'Cannot search. No source used, and Semantic API module was not included',\n    noResults   : 'Your search returned no results',\n    logging     : 'Error in debug logging, exiting.',\n    noEndpoint  : 'No search endpoint was specified',\n    noTemplate  : 'A valid template name was not specified.',\n    serverError : 'There was an issue querying the server.',\n    maxResults  : 'Results must be an array to use maxResults setting',\n    method      : 'The method you called is not defined.'\n  },\n\n  metadata: {\n    cache   : 'cache',\n    results : 'results',\n    result  : 'result'\n  },\n\n  regExp: {\n    escape     : /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n    beginsWith : '(?:\\s|^)'\n  },\n\n  // maps api response attributes to internal representation\n  fields: {\n    categories      : 'results',     // array of categories (category view)\n    categoryName    : 'name',        // name of category (category view)\n    categoryResults : 'results',     // array of results (category view)\n    description     : 'description', // result description\n    image           : 'image',       // result image\n    price           : 'price',       // result price\n    results         : 'results',     // array of results (standard)\n    title           : 'title',       // result title\n    url             : 'url',         // result url\n    action          : 'action',      // \"view more\" object name\n    actionText      : 'text',        // \"view more\" text\n    actionURL       : 'url'          // \"view more\" url\n  },\n\n  selector : {\n    prompt       : '.prompt',\n    searchButton : '.search.button',\n    results      : '.results',\n    category     : '.category',\n    result       : '.result',\n    title        : '.title, .name'\n  },\n\n  templates: {\n    escape: function(string) {\n      var\n        badChars     = /[&<>\"'`]/g,\n        shouldEscape = /[&<>\"'`]/,\n        escape       = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n        escapedChar  = function(chr) {\n          return escape[chr];\n        }\n      ;\n      if(shouldEscape.test(string)) {\n        return string.replace(badChars, escapedChar);\n      }\n      return string;\n    },\n    message: function(message, type) {\n      var\n        html = ''\n      ;\n      if(message !== undefined && type !== undefined) {\n        html +=  ''\n          + '<div class=\"message ' + type + '\">'\n        ;\n        // message type\n        if(type == 'empty') {\n          html += ''\n            + '<div class=\"header\">No Results</div class=\"header\">'\n            + '<div class=\"description\">' + message + '</div class=\"description\">'\n          ;\n        }\n        else {\n          html += ' <div class=\"description\">' + message + '</div>';\n        }\n        html += '</div>';\n      }\n      return html;\n    },\n    category: function(response, fields) {\n      var\n        html = '',\n        escape = $.fn.search.settings.templates.escape\n      ;\n      if(response[fields.categoryResults] !== undefined) {\n\n        // each category\n        $.each(response[fields.categoryResults], function(index, category) {\n          if(category[fields.results] !== undefined && category.results.length > 0) {\n\n            html  += '<div class=\"category\">';\n\n            if(category[fields.categoryName] !== undefined) {\n              html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n            }\n\n            // each item inside category\n            $.each(category.results, function(index, result) {\n              if(result[fields.url]) {\n                html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n              }\n              else {\n                html  += '<a class=\"result\">';\n              }\n              if(result[fields.image] !== undefined) {\n                html += ''\n                  + '<div class=\"image\">'\n                  + ' <img src=\"' + result[fields.image] + '\">'\n                  + '</div>'\n                ;\n              }\n              html += '<div class=\"content\">';\n              if(result[fields.price] !== undefined) {\n                html += '<div class=\"price\">' + result[fields.price] + '</div>';\n              }\n              if(result[fields.title] !== undefined) {\n                html += '<div class=\"title\">' + result[fields.title] + '</div>';\n              }\n              if(result[fields.description] !== undefined) {\n                html += '<div class=\"description\">' + result[fields.description] + '</div>';\n              }\n              html  += ''\n                + '</div>'\n              ;\n              html += '</a>';\n            });\n            html  += ''\n              + '</div>'\n            ;\n          }\n        });\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    },\n    standard: function(response, fields) {\n      var\n        html = ''\n      ;\n      if(response[fields.results] !== undefined) {\n\n        // each result\n        $.each(response[fields.results], function(index, result) {\n          if(result[fields.url]) {\n            html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n          }\n          else {\n            html  += '<a class=\"result\">';\n          }\n          if(result[fields.image] !== undefined) {\n            html += ''\n              + '<div class=\"image\">'\n              + ' <img src=\"' + result[fields.image] + '\">'\n              + '</div>'\n            ;\n          }\n          html += '<div class=\"content\">';\n          if(result[fields.price] !== undefined) {\n            html += '<div class=\"price\">' + result[fields.price] + '</div>';\n          }\n          if(result[fields.title] !== undefined) {\n            html += '<div class=\"title\">' + result[fields.title] + '</div>';\n          }\n          if(result[fields.description] !== undefined) {\n            html += '<div class=\"description\">' + result[fields.description] + '</div>';\n          }\n          html  += ''\n            + '</div>'\n          ;\n          html += '</a>';\n        });\n\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    }\n  }\n};\n\n})( jQuery, window, document );\n"]},"sourceType":"script","hash":"4644c705655fd69d7a4c5e27f8fdf58dad88231e"}
