{"version":3,"sources":["meteor://ðŸ’»app/packages/shim-common/server.js"],"names":["module","export","hasOwn","doNotNeedShim","makeScript","Object","prototype","hasOwnProperty","request","minimumMajorVersions","queryForceParam","browser","url","query","forced","call","name","major","packagePath","Meteor","isProduction"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAAAA,OAAOC,MAAP,CAAc;AAACC,UAAO,MAAIA,MAAZ;AAAmBC,iBAAc,MAAIA,aAArC;AAAmDC,cAAW,MAAIA;AAAlE,CAAd;AAEO,MAAMF,SAASG,OAAOC,SAAP,CAAiBC,cAAhC;;AAEA,SAASJ,aAAT,EACL;AACAK,OAFK,EAGL;AAEAC,uBAAuB,EALlB,EAML;AAEAC,eARK,EASL;AACA,QAAM;AAAEC,WAAF;AAAWC;AAAX,MAAmBJ,OAAzB;;AAEA,MAAIE,eAAJ,EAAqB;AACnB,UAAMG,QAAQD,OAAOA,IAAIC,KAAzB;AACA,UAAMC,SAASD,SAASA,MAAMH,eAAN,CAAxB;;AACA,QAAII,MAAJ,EAAY;AACV,aAAO,KAAP;AACD;AACF;;AAED,MAAIH,WACAT,OAAOa,IAAP,CAAYN,oBAAZ,EAAkCE,QAAQK,IAA1C,CADA,IAEAL,QAAQM,KAAR,IAAiBR,qBAAqBE,QAAQK,IAA7B,CAFrB,EAEyD;AACvD,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD;;AAEM,SAASZ,UAAT,CAAoBc,WAApB,EAAiC;AACtC,SAAO,8BAA8BA,WAA9B,IACLC,OAAOC,YAAP,GAAsB,SAAtB,GAAkC,KAD7B,IAEH,aAFJ;AAGD,C","file":"/packages/shim-common.js","sourcesContent":["\"use strict\";\n\nexport const hasOwn = Object.prototype.hasOwnProperty;\n\nexport function doNotNeedShim(\n  // The HTTP request object, as exposed (for example) by sink.request.\n  request,\n  // Map from lowercase browser names to the minimum major version of that\n  // browser that no longer needs the shim.\n  minimumMajorVersions = {},\n  // Optional URL query parameter that can be used to force the shim to be\n  // injected into the HTTP response.\n  queryForceParam,\n) {\n  const { browser, url } = request;\n\n  if (queryForceParam) {\n    const query = url && url.query;\n    const forced = query && query[queryForceParam];\n    if (forced) {\n      return false;\n    }\n  }\n\n  if (browser &&\n      hasOwn.call(minimumMajorVersions, browser.name) &&\n      browser.major >= minimumMajorVersions[browser.name]) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function makeScript(packagePath) {\n  return '\\n<script src=\"/packages/' + packagePath + (\n    Meteor.isProduction ? \".min.js\" : \".js\"\n  ) + '\"></script>';\n}\n"]}